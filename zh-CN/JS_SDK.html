<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>JS SDK · PlatON</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Web3.js 调用接口 "/><meta name="docsearch:language" content="zh-CN"/><meta property="og:title" content="JS SDK · PlatON"/><meta property="og:type" content="website"/><meta property="og:url" content="https://luo-dahui.github.io//docs/"/><meta property="og:description" content="## Web3.js 调用接口 "/><meta property="og:image" content="https://luo-dahui.github.io//docs/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://luo-dahui.github.io//docs/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/docs/img/logo.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mermaid@8.4.0/dist/mermaid.min.js"></script><script type="text/javascript" src="/docs/js/custom.js"></script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="https://www.platon.network/?lang=zh"><img class="logo" src="/docs/img/PlatON-logo.svg" alt="PlatON"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/docs/img/language.svg" alt="Languages icon"/>中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/JS_SDK">English</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>API参考</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">概述<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/">概述</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">初步了解<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/lat_introduced">什么是LAT</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/staking_and_delegation">质押&amp;委托</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Network_Description">网络说明</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">进阶了解<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/PlatON_Overall_Solution">总体架构</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Economic_Model">经济模型</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/PlatON_Solution">共识机制</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/PlatON_Governance_Solution">治理机制</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Wasm_Operation_Principle">Wasm虚拟机</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">PlatON节点<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/PlatON_Validation_Introduce">验证节点介绍</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Become_PlatON_Main_Verification">成为主网验证节点</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">节点工具</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/OnLine_MTool_Manual">MTool在线教程</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/OffLine_MTool_Manual">MTool离线教程</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Command_Line_Tools">命令行工具</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">开发者<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/PlatON_Overview_DevGuide">开发指南</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">设置开发环境</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Become_PlatON_Dev_Verification">加入开发网</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Build_Private_Chain">部署私有网络</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">智能合约</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/PlatON_system_contract">系统合约</a></li></ul></div><div class="navGroup subNavGroup sonNavGroup"><h4 class="navGroupSubcategoryTitle sonNavTitle">Solidity合约</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Solidity_Dev_Manual">入门手册</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Solidity_Contract_Migrate">合约迁移教程</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Solidity_Contract_Dev_Costs">合约开发成本</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Solidity_Contract_Best_Practice">合约开发最佳实践</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Solidity_Contract_Security_Dev_Guide">合约安全开发指南</a></li></ul></div><div class="navGroup subNavGroup sonNavGroup"><h4 class="navGroupSubcategoryTitle sonNavTitle">Wasm合约</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Wasm_Dev_Manual">入门手册</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Wasm_Contract_Dev_Costs">合约开发成本</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Wasm_Contract_Best_Practice">合约开发最佳实践</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Wasm_Contract_API">合约API</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API参考</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Python_SDK">Python SDK</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/zh-CN/JS_SDK">JS SDK</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Java_SDK">Java SDK</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Json_Rpc">JSON-RPC</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Standards">Standards</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">数据分析<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/PlatON_BlockChain_Browser">PlatScan</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/PlatEye">PlatEye</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">钱包<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/ATON-user-manual">ATON钱包</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/PlatON_Samurai">Samurai</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/Third_Party_Walle">第三方钱包</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">community<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/community">社区项目</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">JS SDK</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="web3js-调用接口"></a><a href="#web3js-调用接口" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Web3.js 调用接口</h2>
<p>通过 web3.js 提供的web3对象与底层链进行交互。底层实现上，它通过 RPC 调用与本地节点通信。web3.js可以与任何暴露了RPC接口的PlatON节点连接。</p>
<h3><a class="anchor" aria-hidden="true" id="准备工作"></a><a href="#准备工作" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>准备工作</h3>
<p>首先请确保本地成功安装了nodeJS环境，由于该项目使用了<a href="https://github.com/lerna/lerna">lerna</a>管理工具来优化托管在git\npm上的多package代码库的工作流，所以你在安装之前确保已经全局安装了lerna包。<strong>如果没有，执行命令<code>npm i lerna -g</code>进行全局安装。</strong></p>
<p>然后你就可以通过 npm 包管理工具或者 yarn 包管理工具将client-sdk-js引入到项目工程中，通过如下步骤：</p>
<ul>
<li>npm: <code>npm i PlatONnetwork/client-sdk-js#0.15.1-develop</code></li>
<li>yarn: <code>yarn add PlatONnetwork/client-sdk-js#0.15.1-develop</code></li>
</ul>
<p>然后需要创建web3的实例，设置一个provider。可参考如下代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// in node.js</span>
<span class="hljs-keyword">var</span> Web3 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3'</span>);

<span class="hljs-keyword">var</span> web3 = <span class="hljs-keyword">new</span> Web3(<span class="hljs-string">'http://127.0.0.1:6789'</span>);
<span class="hljs-built_in">console</span>.log(web3);
&gt; {
    <span class="hljs-attr">platon</span>: ... ,
    <span class="hljs-attr">utils</span>: ...,
    <span class="hljs-attr">ppos</span>: ...,
    ...
}
</code></pre>
<p>成功引入后，现在可以使用web3的相关API了。</p>
<h3><a class="anchor" aria-hidden="true" id="详细使用"></a><a href="#详细使用" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>详细使用</h3>
<h4><a class="anchor" aria-hidden="true" id="web3version"></a><a href="#web3version" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.version</h4>
<p><code>web3.version</code>属性记录了web3容器对象的版本。</p>
<p>调用方法：</p>
<pre><code class="hljs css language-js">Web3.version
web3.version
</code></pre>
<p>返回值：</p>
<p><code>String</code>: 当前版本字符串</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.version;
&gt; <span class="hljs-string">"0.13.1"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3modules"></a><a href="#web3modules" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.modules</h4>
<p><code>web3.modules</code>属性返回一个包含所有子模块类的对象，可以用来
手工实例化这些子模块类。</p>
<p>调用方法：</p>
<pre><code class="hljs css language-js">Web3.modules
web3.modules
</code></pre>
<p>返回值：</p>
<p><code>Object</code>: 子模块列表:</p>
<ul>
<li><code>Platon</code> - Function: Platon模块类，用来与PlatON网络进行交互。参见web3.platon。</li>
<li><code>Net</code> - Function: Net模块类，用来与网络属性进行交互。参见web3.platon.net。</li>
<li><code>Personal</code> - Function: Personal模块类，用来与PlatON账户进行交互。参见web3.platon.personal。</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.modules
&gt; {
    <span class="hljs-attr">Platon</span>: Platon <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">provider</span>),
    <span class="hljs-title">Net</span>: <span class="hljs-title">Net</span> <span class="hljs-title">function</span>(<span class="hljs-params">provider</span>),
    <span class="hljs-title">Personal</span>: <span class="hljs-title">Personal</span> <span class="hljs-title">function</span>(<span class="hljs-params">provider</span>)
}
</span></code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3setprovider"></a><a href="#web3setprovider" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.setProvider</h4>
<p><code>web3.setProvider()</code>方法用来修改指定模块的底层通讯服务提供器。</p>
<p>调用：</p>
<pre><code class="hljs">web3.set<span class="hljs-constructor">Provider(<span class="hljs-params">myProvider</span>)</span>
web3.platon.set<span class="hljs-constructor">Provider(<span class="hljs-params">myProvider</span>)</span><span class="hljs-operator">
...
</span></code></pre>
<p>注意：当在web3上直接调用<code>setProvider()</code>方法时，将为所有其他子模块设置服务提供器，例如web3.platon不受影响，因为该子模块始终使用独立的服务提供器。</p>
<p>参数：</p>
<p><code>Object</code> - myProvider: 有效的服务提供器对象。</p>
<p>返回值：</p>
<p><code>Boolean</code></p>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> Web3 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3'</span>);
<span class="hljs-keyword">var</span> web3 = <span class="hljs-keyword">new</span> Web3(<span class="hljs-string">'http://localhost:8545'</span>);
<span class="hljs-comment">// 或者</span>
<span class="hljs-keyword">var</span> web3 = <span class="hljs-keyword">new</span> Web3(<span class="hljs-keyword">new</span> Web3.providers.HttpProvider(<span class="hljs-string">'http://localhost:8545'</span>));

<span class="hljs-comment">// 改变服务提供器</span>
web3.setProvider(<span class="hljs-string">'ws://localhost:8546'</span>);
<span class="hljs-comment">// 或者</span>
web3.setProvider(<span class="hljs-keyword">new</span> Web3.providers.WebsocketProvider(<span class="hljs-string">'ws://localhost:8546'</span>));
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3providers"></a><a href="#web3providers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.providers</h4>
<p>返回当前有效的通信服务提供器。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.providers</span>
<span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.providers</span>
...
</code></pre>
<p>返回值：</p>
<p><code>Object</code>， 参见以下服务提供器对象:</p>
<ul>
<li>Object - HttpProvider: HTTP服务提供器已经被弃用，因为它不支持订阅。</li>
<li>Object - WebsocketProvider:  Websocket服务提供器是用于传统的浏览器中的标准方法。</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> Web3 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3'</span>);
<span class="hljs-comment">// 使用指定的服务提供器（例如在Mist中）或实例化一个新的websocket提供器</span>
<span class="hljs-keyword">var</span> web3 = <span class="hljs-keyword">new</span> Web3(Web3.givenProvider || <span class="hljs-string">'ws://remotenode.com:8546'</span>);
<span class="hljs-comment">// 或者</span>
<span class="hljs-keyword">var</span> web3 = <span class="hljs-keyword">new</span> Web3(Web3.givenProvider || <span class="hljs-keyword">new</span> Web3.providers.WebsocketProvider(<span class="hljs-string">'ws://remotenode.com:8546'</span>));
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3givenprovider"></a><a href="#web3givenprovider" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.givenProvider</h4>
<p>在以太坊兼容的浏览器中使用web3.js时，<code>web3.givenProvider</code>属性将返回浏览器设置的原生
服务提供器，否则返回<code>null</code>。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.givenProvider</span>
<span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.givenProvider</span>
...
</code></pre>
<p>返回值：</p>
<p><code>Object</code>: 浏览器设置好的提供器，或者null;</p>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3currentprovider"></a><a href="#web3currentprovider" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.currentProvider</h4>
<p><code>web3.currentProvider</code>属性返回当前在用的通信服务提供器，如果没有的话则返回<code>null</code>。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.currentProvider</span>
<span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.currentProvider</span>
...
</code></pre>
<p>返回值：</p>
<p><code>Object</code>： 当前在用的服务提供器，或者null。</p>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3batchrequest"></a><a href="#web3batchrequest" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.BatchRequest</h4>
<p><code>web3.BatchRequest</code>类用来创建并执行批请求。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-keyword">new</span> <span class="hljs-type">web3</span>.BatchRequest()
<span class="hljs-keyword">new</span> <span class="hljs-type">web3</span>.platon.BatchRequest()
</code></pre>
<p>参数：</p>
<p>无</p>
<p>返回值：</p>
<p>一个对象，具有如下方法：</p>
<ul>
<li><code>add(request)</code>: 将请求对象添加到批调用中</li>
<li><code>execute()</code>: 执行批请求</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> contract = <span class="hljs-keyword">new</span> web3.platon.Contract(abi, address);

<span class="hljs-keyword">var</span> batch = <span class="hljs-keyword">new</span> web3.BatchRequest();
batch.add(web3.platon.getBalance.request(<span class="hljs-string">'lax1w9x7ye4qalarnl9v59zzhyn7tug9864rr2fc35'</span>, <span class="hljs-string">'latest'</span>, callback));
batch.add(contract.methods.balance(address).call.request({<span class="hljs-attr">from</span>: <span class="hljs-string">'lax1w9x7ye4qalarnl9v59zzhyn7tug9864rr2fc35'</span>}, callback2));
batch.execute();
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platondefaultaccount"></a><a href="#web3platondefaultaccount" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.defaultAccount</h4>
<p><code>web3.platon.defaultAccount</code>属性记录了默认地址，在以下方法中如果没有指定<code>from</code>属性，
将使用该属性的值作为默认的<code>from</code>属性值。</p>
<ul>
<li>web3.platon.sendTransaction()</li>
<li>web3.platon.call()</li>
<li>new web3.platon.Contract() -&gt; myContract.methods.myMethod().call()</li>
<li>new web3.platon.Contract() -&gt; myContract.methods.myMethod().send()</li>
</ul>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.defaultAccount</span>
</code></pre>
<p>属性：</p>
<p><code>String</code> - 以太坊地址对应的bech32编码地址，你应当在节点或keystore中存有该地址的私钥。默认值为<code>undefined</code></p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.defaultAccount;
&gt; <span class="hljs-literal">undefined</span>

<span class="hljs-comment">// set the default account</span>
web3.platon.defaultAccount = <span class="hljs-string">'lax1fyeszufxwxk62p46djncj86rd553skpptsj8v6'</span>;
</code></pre>
<blockquote>
<p>注意：</p>
<p><strong>所有地址格式必须带引号，如上：'lax1fyeszufxwxk62p46djncj86rd553skpptsj8v6'。</strong></p>
</blockquote>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platondefaultblock"></a><a href="#web3platondefaultblock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.defaultBlock</h4>
<p><code>web3.platon.defaultBlock</code>属性记录默认块，默认值为<code>latest</code>。该属性值用于以下方法调用：</p>
<ul>
<li>web3.platon.getBalance()</li>
<li>web3.platon.getCode()</li>
<li>web3.platon.getTransactionCount()</li>
<li>web3.platon.getStorageAt()</li>
<li>web3.platon.call()</li>
<li>new web3.platon.Contract() -&gt; myContract.methods.myMethod().call()</li>
</ul>
<p>在以上方法中，可以传入<code>defaultBlock</code>参数来覆盖该属性值。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.defaultBlock</span>
</code></pre>
<p>属性：</p>
<p>默认块参数的值为以下列表中之一：</p>
<ul>
<li>Number: 一个具体的块编号</li>
<li>&quot;genesis&quot; - String: 创世块</li>
<li>&quot;latest&quot; - String: 最后一个块，即当前的链头块</li>
<li>&quot;pending&quot; - String: 当前挖掘中的块，其中包含挂起的交易</li>
</ul>
<p>默认值为&quot;latest&quot;</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.defaultBlock;
&gt; <span class="hljs-string">"latest"</span>

<span class="hljs-comment">// 设置默认块属性</span>
web3.platon.defaultBlock = <span class="hljs-number">231</span>;
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongetprotocolversion"></a><a href="#web3platongetprotocolversion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getProtocolVersion</h4>
<p>返回节点的以太坊协议版本。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.getProtocolVersion</span>(<span class="hljs-selector-attr">[callback]</span>)
</code></pre>
<p>返回值：</p>
<p>一个Promise对象，其解析值为协议版本字符串。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.getProtocolVersion().then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-string">"63"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonissyncing"></a><a href="#web3platonissyncing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.isSyncing</h4>
<p><code>web3.platon.isSyncing()</code>方法用来检查节点当前是否已经与网络同步。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.isSyncing</span>(<span class="hljs-selector-attr">[callback]</span>)
</code></pre>
<p>返回值：</p>
<p>一个Promise对象，其解析值为<code>Object</code>或<code>Boolean</code>。如果节点尚未与网络同步，
则返回false，否则返回一个同步对象，具有以下属性：</p>
<ul>
<li>startingBlock - Number: 同步起始块编号</li>
<li>currentBlock - Number: 当前已同步块编号</li>
<li>highestBlock - Number: 预估的目标同步块编号</li>
<li>knownStates - Number: 预估的要下载的状态</li>
<li>pulledStates - Number: 已经下载的状态</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.isSyncing().then(<span class="hljs-built_in">console</span>.log);
&gt; {
    <span class="hljs-attr">startingBlock</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">currentBlock</span>: <span class="hljs-number">312</span>,
    <span class="hljs-attr">highestBlock</span>: <span class="hljs-number">512</span>,
    <span class="hljs-attr">knownStates</span>: <span class="hljs-number">234566</span>,
    <span class="hljs-attr">pulledStates</span>: <span class="hljs-number">123455</span>
}
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongetgasprice"></a><a href="#web3platongetgasprice" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getGasPrice</h4>
<p><code>web3.platon.getGasPrice()</code>方法用来获取当前gas价格，该价格由最近的若干块
的gas价格中值决定。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.getGasPrice</span>(<span class="hljs-selector-attr">[callback]</span>)
</code></pre>
<p>返回值：</p>
<p>一个Promise对象，其解析值为表示当前gas价格的字符串，单位为VON。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.getGasPrice().then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-string">"20000000000"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongetaccounts"></a><a href="#web3platongetaccounts" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getAccounts</h4>
<p><code>web3.platon.getAccounts()</code>方法返回当前节点控制的账户列表。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.getAccounts</span>(<span class="hljs-selector-attr">[callback]</span>)
</code></pre>
<p>返回值</p>
<p>一个Promise对象，其解析值为账户地址数组。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.getAccounts().then(<span class="hljs-built_in">console</span>.log);
&gt; [<span class="hljs-string">"lax1fyeszufxwxk62p46djncj86rd553skpptsj8v6"</span>, <span class="hljs-string">"lax1kg7y7wfwzqsyxppyxcdvhkkkwlf64ccl8x93ut"</span>]
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongetblocknumber"></a><a href="#web3platongetblocknumber" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getBlockNumber</h4>
<p><code>web3.platon.getBlockNumber()</code>方法返回当前块编号。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.getBlockNumber</span>(<span class="hljs-selector-attr">[callback]</span>)
</code></pre>
<p>返回值：</p>
<p>一个Promise对象，其解析值为最近一个块的编号，Number类型。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.getBlockNumber().then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-number">2744</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongetbalance"></a><a href="#web3platongetbalance" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getBalance</h4>
<p><code>web3.platon.getBalance()</code>方法用来获取指定块中特定账户地址的余额。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.getBalance</span>(<span class="hljs-selector-tag">address</span> <span class="hljs-selector-attr">[, defaultBlock]</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>address</code>：String - 要检查余额的账户地址，bech32 address格式，lax开头的为测试网，lat开头的为主网</li>
<li><code>defaultBlock</code>：Number|String - 可选，使用该参数覆盖web3.platon.defaultBlock属性值</li>
<li><code>callback</code>：Function - 可选的回调函数，该回调的第一个参数为error对象，第二个参数为结果值</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为指定账户地址的余额字符串，以VON为单位。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.getBalance(<span class="hljs-string">"lax1fyeszufxwxk62p46djncj86rd553skpptsj8v6"</span>)
.then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-string">"1000000000000"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongetstorageat"></a><a href="#web3platongetstorageat" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getStorageAt</h4>
<p><code>web3.platon.getStorageAt()</code>方法返回一个以太坊地址的指定位置存储内容。</p>
<p>调用：</p>
<pre><code class="hljs">web3.platon.get<span class="hljs-constructor">StorageAt(<span class="hljs-params">address</span>, <span class="hljs-params">position</span> [, <span class="hljs-params">defaultBlock</span>] [, <span class="hljs-params">callback</span>])</span>
</code></pre>
<p>参数：</p>
<ul>
<li><code>address</code>：String - 要读取的地址</li>
<li><code>position</code>：Number - 存储中的索引编号</li>
<li><code>defaultBlock</code>：Number|String - 可选，使用该参数覆盖web3.platon.defaultBlock属性值</li>
<li><code>callback</code>：Function - 可选的回调函数, 其第一个参数为错误对象，第二个参数为结果。</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为存储中指定位置的内容。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.getStorageAt(<span class="hljs-string">"lax1fyeszufxwxk62p46djncj86rd553skpptsj8v6"</span>, <span class="hljs-number">0</span>)
.then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-string">"0x033456732123ffff2342342dd12342434324234234fd234fd23fd4f23d4234"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongetcode"></a><a href="#web3platongetcode" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getCode</h4>
<p><code>web3.platon.getCode()</code>方法返回指定以太坊地址处的代码。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.getCode</span>(<span class="hljs-selector-tag">address</span> <span class="hljs-selector-attr">[, defaultBlock]</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>address</code>：String - 要读取代码的地址</li>
<li><code>defaultBlock</code>：Number|String - 可选，使用该参数覆盖web3.platon.defaultBlock属性值</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为指定地址处的代码字符串。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.getCode(<span class="hljs-string">"lax1fyeszufxwxk62p46djncj86rd553skpptsj8v6"</span>)
.then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-string">"0x600160008035811a818181146012578301005b601b6001356025565b8060005260206000f25b600060078202905091905056"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongetblock"></a><a href="#web3platongetblock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getBlock</h4>
<p><code>web3.platon.getBlock()</code>方法返回指定块编号或块哈希对应的块。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.getBlock</span>(<span class="hljs-selector-tag">blockHashOrBlockNumber</span> <span class="hljs-selector-attr">[, returnTransactionObjects]</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>blockHashOrBlockNumber</code>：String|Number - 块编号或块哈希值，或者使用以下字符串：&quot;genesis&quot;、&quot;latest&quot; 或 &quot;pending&quot; 。</li>
<li><code>returnTransactionObjects</code>：Boolean -  可选，默认值为false。当设置为true时,返回块中将包括所有交易详情，否则仅返回交易哈希。</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果。</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为满足搜索条件的块对象，具有以下字段：</p>
<ul>
<li>number - Number: 块编号，处于pending状态的块为null</li>
<li>hash 32 Bytes - String: 块哈希，处于pending状态的块为null</li>
<li>parentHash 32 Bytes - String: 父块哈希</li>
<li>nonce 8 Bytes - String: 生成的proof-of-work的哈希，处于pending状态的块为null</li>
<li>sha3Uncles 32 Bytes - String: 块中叔伯数据的SHA3值</li>
<li>logsBloom 256 Bytes - String: 块中日志的bloom filter，处于pending状态的块为null</li>
<li>transactionsRoot 32 Bytes - String: 块中的交易树根节点</li>
<li>stateRoot 32 Bytes - String: 块中的最终状态树根节点</li>
<li>miner - String: 接收奖励的矿工地址</li>
<li>difficulty - String: 该块的难度值</li>
<li>totalDifficulty - String: 截至该块的全链总难度值</li>
<li>extraData - String: 块 “extra data” 字段</li>
<li>size - Number: 字节为单位的块大小</li>
<li>gasLimit - Number: 该块允许的最大gas值</li>
<li>gasUsed - Number: 该块中所有交易使用的gas总量</li>
<li>timestamp - Number: 出块的unix时间戳</li>
<li>transactions - Array: 交易对象数组，或者32字节长的交易哈希值，取决于returnTransactionObjects的设置</li>
<li>uncles - Array: 叔伯块哈希值数组</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.getBlock(<span class="hljs-number">3150</span>)
.then(<span class="hljs-built_in">console</span>.log);

&gt; {
    <span class="hljs-string">"number"</span>: <span class="hljs-number">3</span>,
    <span class="hljs-string">"hash"</span>: <span class="hljs-string">"0xef95f2f1ed3ca60b048b4bf67cde2195961e0bba6f70bcbea9a2c4e133e34b46"</span>,
    <span class="hljs-string">"parentHash"</span>: <span class="hljs-string">"0x2302e1c0b972d00932deb5dab9eb2982f570597d9d42504c05d9c2147eaf9c88"</span>,
    <span class="hljs-string">"nonce"</span>: <span class="hljs-string">"0xfb6e1a62d119228b"</span>,
    <span class="hljs-string">"sha3Uncles"</span>: <span class="hljs-string">"0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347"</span>,
    <span class="hljs-string">"logsBloom"</span>: <span class="hljs-string">"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"</span>,
    <span class="hljs-string">"transactionsRoot"</span>: <span class="hljs-string">"0x3a1b03875115b79539e5bd33fb00d8f7b7cd61929d5a3c574f507b8acf415bee"</span>,
    <span class="hljs-string">"stateRoot"</span>: <span class="hljs-string">"0xf1133199d44695dfa8fd1bcfe424d82854b5cebef75bddd7e40ea94cda515bcb"</span>,
    <span class="hljs-string">"miner"</span>: <span class="hljs-string">"lax1fyeszufxwxk62p46djncj86rd553skpptsj8v6"</span>,
    <span class="hljs-string">"difficulty"</span>: <span class="hljs-string">'21345678965432'</span>,
    <span class="hljs-string">"totalDifficulty"</span>: <span class="hljs-string">'324567845321'</span>,
    <span class="hljs-string">"size"</span>: <span class="hljs-number">616</span>,
    <span class="hljs-string">"extraData"</span>: <span class="hljs-string">"0x"</span>,
    <span class="hljs-string">"gasLimit"</span>: <span class="hljs-number">3141592</span>,
    <span class="hljs-string">"gasUsed"</span>: <span class="hljs-number">21662</span>,
    <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1429287689</span>,
    <span class="hljs-string">"transactions"</span>: [
        <span class="hljs-string">"0x9fc76417374aa880d4449a1f7f31ec597f00b1f6f3dd2d66f4c9c6c445836d8b"</span>
    ],
    <span class="hljs-string">"uncles"</span>: []
}
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongetblocktransactioncount"></a><a href="#web3platongetblocktransactioncount" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getBlockTransactionCount</h4>
<p><code>web3.platon.getBlockTransactionCount()</code>方法返回指定块中的交易数量。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.getBlockTransactionCount</span>(<span class="hljs-selector-tag">blockHashOrBlockNumber</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>blockHashOrBlockNumber</code>：String|Number - 块编号或块的哈希值，或者使用以下字符串：&quot;genesis&quot;、&quot;latest&quot; 或 &quot;pending&quot; 来指定块</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为执行结果。</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为指定块中的交易数量，Number类型。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.getBlockTransactionCount(<span class="hljs-string">"lax1fyeszufxwxk62p46djncj86rd553skpptsj8v6"</span>)
.then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-number">1</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongettransaction"></a><a href="#web3platongettransaction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getTransaction</h4>
<p><code>web3.platon.getTransaction()</code>方法返回具有指定哈希值的交易对象。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.getTransaction</span>(<span class="hljs-selector-tag">transactionHash</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>transactionHash</code>：String - 交易的哈希值</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为返回结果。</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为具有给定哈希值的交易对象，该对象具有如下字段：</p>
<ul>
<li>hash 32 Bytes - String: 交易的哈希值</li>
<li>nonce - Number: 交易发送方在此交易之前产生的交易数量</li>
<li>blockHash 32 Bytes - String: 交易所在块的哈希值。如果交易处于pending状态，则该值为null</li>
<li>blockNumber - Number: 交易所在块的编号，如果交易处于pending状态，则该值为null</li>
<li>transactionIndex - Number: 交易在块中的索引位置，如果交易处于pending状态，则该值为null</li>
<li>from - String: 交易发送方的地址</li>
<li>to - String: 交易接收方的地址。对于创建合约的交易，该值为null</li>
<li>value - String: 以VON为单位的转账金额</li>
<li>gasPrice - String: 发送方承诺的gas价格，以VON为单位</li>
<li>gas - Number: 发送方提供的gas用量</li>
<li>input - String: 随交易发送的数据</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.getTransaction(<span class="hljs-string">'0x9fc76417374aa880d4449a1f7f31ec597f00b1f6f3dd2d66f4c9c6c445836d8b§234'</span>)
.then(<span class="hljs-built_in">console</span>.log);
&gt; {
    <span class="hljs-string">"hash"</span>: <span class="hljs-string">"0x9fc76417374aa880d4449a1f7f31ec597f00b1f6f3dd2d66f4c9c6c445836d8b"</span>,
    <span class="hljs-string">"nonce"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-string">"blockHash"</span>: <span class="hljs-string">"0xef95f2f1ed3ca60b048b4bf67cde2195961e0bba6f70bcbea9a2c4e133e34b46"</span>,
    <span class="hljs-string">"blockNumber"</span>: <span class="hljs-number">3</span>,
    <span class="hljs-string">"transactionIndex"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"from"</span>: <span class="hljs-string">"lax14984xa8uuhkmer32s6tuz5e3valxa0ct68a0c5"</span>,
    <span class="hljs-string">"to"</span>: <span class="hljs-string">"lax1v227ux60dht9q3mk97fyanfk0st740u0x25f88"</span>,
    <span class="hljs-string">"value"</span>: <span class="hljs-string">'123450000000000000'</span>,
    <span class="hljs-string">"gas"</span>: <span class="hljs-number">314159</span>,
    <span class="hljs-string">"gasPrice"</span>: <span class="hljs-string">'2000000000000'</span>,
    <span class="hljs-string">"input"</span>: <span class="hljs-string">"0x57cb2fc4"</span>
}
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongettransactionfromblock"></a><a href="#web3platongettransactionfromblock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getTransactionFromBlock</h4>
<p><code>web3.platon.getTransactionFromBlock()</code>方法返回指定块中特定索引号的交易对象。</p>
<p>调用：</p>
<pre><code class="hljs">get<span class="hljs-constructor">TransactionFromBlock(<span class="hljs-params">hashStringOrNumber</span>, <span class="hljs-params">indexNumber</span> [, <span class="hljs-params">callback</span>])</span>
</code></pre>
<p>参数：</p>
<ul>
<li><code>hashStringOrNumber</code>：String - 块编号或块的哈希值，或者使用以下字符串：&quot;genesis、&quot;latest&quot; 或 &quot;pending&quot; 来指定块</li>
<li><code>indexNumber</code>：Number - 交易索引位置</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果交易对象</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为交易对象，该对象具体内容描述参见web3.platon.getTransaction()</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> transaction = web3.platon.getTransactionFromBlock(<span class="hljs-string">'0x4534534534'</span>, <span class="hljs-number">2</span>)
.then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-comment">// see web3.platon.getTransaction</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongettransactionreceipt"></a><a href="#web3platongettransactionreceipt" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getTransactionReceipt</h4>
<p><code>web3.platon.getTransactionReceipt()</code>方法返回指定交易的收据对象。
如果交易处于pending状态，则返回null。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.getTransactionReceipt</span>(<span class="hljs-selector-tag">hash</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>hash</code>：String - 交易的哈希值</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为交易的收据对象或者null。收据对象具有如下字段：</p>
<ul>
<li><code>status</code> - Boolean: 成功的交易返回true，如果EVM回滚了该交易则返回false</li>
<li><code>blockHash</code> 32 Bytes - String: 交易所在块的哈希值</li>
<li><code>blockNumber</code> - Number: 交易所在块的编号</li>
<li><code>transactionHash</code> 32 Bytes - String: 交易的哈希值</li>
<li><code>transactionIndex</code> - Number: 交易在块中的索引位置</li>
<li><code>from</code> - String: 交易发送方的地址</li>
<li><code>to</code> - String: 交易接收方的地址，对于创建合约的交易，该值为null</li>
<li><code>contractAddress</code> - String: 对于创建合约的交易，该值为创建的合约地址，否则为null</li>
<li><code>cumulativeGasUsed</code> - Number: 该交易执行时所在块的gas累计总用量</li>
<li><code>gasUsed</code>- Number: 该交易的gas总量</li>
<li><code>logs</code> - Array: 该交易产生的日志对象数组</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> receipt = web3.platon.getTransactionReceipt(<span class="hljs-string">'0x9fc76417374aa880d4449a1f7f31ec597f00b1f6f3dd2d66f4c9c6c445836d8b'</span>)
.then(<span class="hljs-built_in">console</span>.log);
&gt; {
  <span class="hljs-string">"status"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"transactionHash"</span>: <span class="hljs-string">"0x9fc76417374aa880d4449a1f7f31ec597f00b1f6f3dd2d66f4c9c6c445836d8b"</span>,
  <span class="hljs-string">"transactionIndex"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-string">"blockHash"</span>: <span class="hljs-string">"0xef95f2f1ed3ca60b048b4bf67cde2195961e0bba6f70bcbea9a2c4e133e34b46"</span>,
  <span class="hljs-string">"blockNumber"</span>: <span class="hljs-number">3</span>,
  <span class="hljs-string">"contractAddress"</span>: <span class="hljs-string">"lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2"</span>,
  <span class="hljs-string">"cumulativeGasUsed"</span>: <span class="hljs-number">314159</span>,
  <span class="hljs-string">"gasUsed"</span>: <span class="hljs-number">30234</span>,
  <span class="hljs-string">"logs"</span>: [{
         <span class="hljs-comment">// logs as returned by getPastLogs, etc.</span>
     }, ...]
}
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongettransactioncount"></a><a href="#web3platongettransactioncount" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getTransactionCount</h4>
<p><code>web3.platon.getTransactionCount()</code>方法返回指定地址发出的交易数量。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.getTransactionCount</span>(<span class="hljs-selector-tag">address</span> <span class="hljs-selector-attr">[, defaultBlock]</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>address</code>：String - 要查询的账户地址</li>
<li><code>defaultBlock</code>：Number|String - 可选，设置该参数来覆盖web3.platon.defaultBlock属性值</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为指定地址发出的交易数量。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.getTransactionCount(<span class="hljs-string">"lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2"</span>)
.then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-number">1</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonsendtransaction"></a><a href="#web3platonsendtransaction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.sendTransaction</h4>
<p><code>web3.platon.sendTransaction()</code>方法向以太坊网络提交一个交易。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.sendTransaction</span>(<span class="hljs-selector-tag">transactionObject</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>transactionObject</code>：Object - 要发送的交易对象，包含以下字段：
<ul>
<li>from - String|Number: 交易发送方账户地址，不设置该字段的话，则使用web3.platon.defaultAccount属性值。可设置为一个地址或本地钱包web3.platon.accounts.wallet中的索引序号</li>
<li>to - String: 可选，消息的目标地址，对于合约创建交易该字段为null</li>
<li>value - Number|String|BN|BigNumber: (optional) The value transferred for the transaction in VON, also the endowment if it’s a contract-creation transaction.</li>
<li>gas - Number: 可选，默认值：待定，用于交易的gas总量，未用完的gas会退还</li>
<li>gasPrice - Number|String|BN|BigNumber: 可选，该交易的gas价格，单位为VON，默认值为web3.platon.gasPrice属性值</li>
<li>data - String: 可选，可以是包含合约方法数据的ABI字符串，或者是合约创建交易中的初始化代码</li>
<li>nonce - Number: 可选，使用该字段覆盖使用相同nonce值的挂起交易</li>
</ul></li>
<li>callback - Function: 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p><code>web3.platon.sendTransaction()</code>方法的返回值是32字节长的交易哈希值。</p>
<p>PromiEvent: 一个整合事件发生器的Promise对象，将在收到交易收据后得到解析。</p>
<ul>
<li>&quot;transactionHash&quot; 返回String: 在交易发出并得到有效的交易哈希值后立刻触发</li>
<li>&quot;receipt&quot; 返回Object: 当交易收据有效后立刻触发</li>
<li>&quot;confirmation&quot; 返回Number, Object: 在每次确认后立刻触发，最多12次确认。确认编号为第一个参数，收据为第二个参数。从0号确认开始触发</li>
<li>&quot;error&quot; 返回Error对象: 在发送交易的过程中如果出现错误则立刻触发。如果是out of gas错误，则传入第二个参数为交易收据</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// compiled solidity source code using https://remix.ethereum.org</span>
<span class="hljs-keyword">var</span> code = <span class="hljs-string">"603d80600c6000396000f3007c01000000000000000000000000000000000000000000000000000000006000350463c6888fa18114602d57005b6007600435028060005260206000f3"</span>;

<span class="hljs-comment">// 使用回调函数</span>
web3.platon.sendTransaction({
    <span class="hljs-attr">from</span>: <span class="hljs-string">'lax1mc9jj4nf487e840j3k0vshjq7n9kj7awe459dv'</span>,
    <span class="hljs-attr">data</span>: code <span class="hljs-comment">// deploying a contracrt</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, hash</span>)</span>{
    ...
});

<span class="hljs-comment">// 使用promise</span>
web3.platon.sendTransaction({
    <span class="hljs-attr">from</span>: <span class="hljs-string">'lax1mc9jj4nf487e840j3k0vshjq7n9kj7awe459dv'</span>,
    <span class="hljs-attr">to</span>: <span class="hljs-string">'lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2'</span>,
    <span class="hljs-attr">value</span>: <span class="hljs-string">'1000000000000000'</span>
})
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">receipt</span>)</span>{
    ...
});


<span class="hljs-comment">// 使用事件发生器</span>
web3.platon.sendTransaction({
    <span class="hljs-attr">from</span>: <span class="hljs-string">'lax1mc9jj4nf487e840j3k0vshjq7n9kj7awe459dv'</span>,
    <span class="hljs-attr">to</span>: <span class="hljs-string">'lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2'</span>,
    <span class="hljs-attr">value</span>: <span class="hljs-string">'1000000000000000'</span>
})
.on(<span class="hljs-string">'transactionHash'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">hash</span>)</span>{
    ...
})
.on(<span class="hljs-string">'receipt'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">receipt</span>)</span>{
    ...
})
.on(<span class="hljs-string">'confirmation'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">confirmationNumber, receipt</span>)</span>{ ... })
.on(<span class="hljs-string">'error'</span>, <span class="hljs-built_in">console</span>.error); <span class="hljs-comment">// If a out of gas error, the second parameter is the receipt.</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonsendsignedtransaction"></a><a href="#web3platonsendsignedtransaction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.sendSignedTransaction</h4>
<p><code>web3.platon.sendSignedTransaction()</code>方法用来发送已经签名的交易，例如，可以使用<code>web3.platon.accounts.signTransaction()</code>
方法进行签名。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.sendSignedTransaction</span>(<span class="hljs-selector-tag">signedTransactionData</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>signedTransactionData</code>：String - 16进制格式的签名交易数据</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p>PromiEvent: 一个整合了事件发生器的Promise对象。当交易收据生效后得到解析。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> Web3 = <span class="hljs-built_in">require</span>(<span class="hljs-string">"web3"</span>);
<span class="hljs-keyword">const</span> transaction_demo = <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    web3 = <span class="hljs-keyword">new</span> Web3(<span class="hljs-string">"http://127.0.0.1:6789"</span>);
    <span class="hljs-keyword">var</span> privateKey=<span class="hljs-string">"0xb416b341437c420a45cb6ba5ca883655eec169360d36866124d23682c03766ba"</span>;
    <span class="hljs-comment">// 主网地址</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">from</span> = web3.platon.accounts.privateKeyToAccount(privateKey).address;
    <span class="hljs-keyword">let</span> nonce = web3.utils.numberToHex(<span class="hljs-keyword">await</span> web3.platon.getTransactionCount(<span class="hljs-keyword">from</span>));
    <span class="hljs-keyword">let</span> tx = {
        <span class="hljs-attr">from</span>:<span class="hljs-keyword">from</span>,
        <span class="hljs-attr">to</span>: <span class="hljs-string">"atp1j9x482k50kl86qvx5cyw7hp48qcx5mezayxj8t"</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-string">"1000000000000000000"</span>,
        <span class="hljs-attr">chainId</span>: <span class="hljs-number">201018</span>,
        <span class="hljs-attr">gasPrice</span>: <span class="hljs-string">"10000000000000"</span>, 
        <span class="hljs-attr">gas</span>: <span class="hljs-string">"21000"</span>, 
        <span class="hljs-attr">nonce</span>: nonce,
    };
    <span class="hljs-comment">// 签名交易</span>
    <span class="hljs-keyword">let</span> signTx = <span class="hljs-keyword">await</span> web3.platon.accounts.signTransaction(tx, privateKey);
    <span class="hljs-comment">// 发送交易</span>
    <span class="hljs-keyword">let</span> receipt = <span class="hljs-keyword">await</span> web3.platon.sendSignedTransaction(signTx.rawTransaction);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"sign tx data:\n"</span>, signTx.rawTransaction)
}
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonsign"></a><a href="#web3platonsign" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.sign</h4>
<p><code>web3.platon.sign()</code>方法使用指定的账户对数据进行签名，该账户必须先解锁。</p>
<p>调用：</p>
<pre><code class="hljs">web3.platon.sign(dataToSign,<span class="hljs-built_in"> address </span>[, callback])
</code></pre>
<p>参数：</p>
<ul>
<li><code>dataToSign</code>：String - 待签名的数据。对于字符串将首先使用<code>web3.utils.utf8ToHex()</code>方法将其转换为16进制</li>
<li><code>address</code>：String|Number - 用来签名的账户地址。或者本地钱包web3.platon.accounts.wallet中的地址或其序号</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为签名结果字符串。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.sign(<span class="hljs-string">"Hello world"</span>, <span class="hljs-string">"lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2"</span>)
.then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-string">"0x30755ed65396facf86c53e6217c52b4daebe72aa4941d89635409de4c9c7f9466d4e9aaec7977f05e923889b33c0d0dd27d7226b6e6f56ce737465c5cfd04be400"</span>

<span class="hljs-comment">// the below is the same</span>
web3.platon.sign(web3.utils.utf8ToHex(<span class="hljs-string">"Hello world"</span>), <span class="hljs-string">"lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2"</span>)
.then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-string">"0x30755ed65396facf86c53e6217c52b4daebe72aa4941d89635409de4c9c7f9466d4e9aaec7977f05e923889b33c0d0dd27d7226b6e6f56ce737465c5cfd04be400"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonsigntransaction"></a><a href="#web3platonsigntransaction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.signTransaction</h4>
<p>使用<code>web3.platon.signTransaction()</code>方法对交易进行签名，用来签名的账户地址需要首先解锁。</p>
<p>调用：</p>
<pre><code class="hljs">web3.platon.signTransaction(transactionObject,<span class="hljs-built_in"> address </span>[, callback])
</code></pre>
<p>参数：</p>
<ul>
<li><code>transactionObject</code>：Object - 要签名的交易数据</li>
<li><code>address</code>：String - 用于签名的账户地址</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为RLP编码的交易对象。该对象的raw属性可以用来通过<code>web3.platon.sendSignedTransaction()</code>
方法来发送交易。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.signTransaction({
    <span class="hljs-attr">from</span>: <span class="hljs-string">"lax1avq5lrytgxxmddzhwnpjdg8xf3ufznwqrjn60v"</span>,
    <span class="hljs-attr">gasPrice</span>: <span class="hljs-string">"20000000000"</span>,
    <span class="hljs-attr">gas</span>: <span class="hljs-string">"21000"</span>,
    <span class="hljs-attr">to</span>: <span class="hljs-string">'lax1x56n2df4x56n2df4x56n2df4x56n2df44dm33c'</span>,
    <span class="hljs-attr">value</span>: <span class="hljs-string">"1000000000000000000"</span>,
    <span class="hljs-attr">data</span>: <span class="hljs-string">""</span>
}).then(<span class="hljs-built_in">console</span>.log);
&gt; {
    <span class="hljs-attr">raw</span>: <span class="hljs-string">'0xf86c808504a817c800825208943535353535353535353535353535353535353535880de0b6b3a76400008025a04f4c17305743700648bc4f6cd3038ec6f6af0df73e31757007b7f59df7bee88da07e1941b264348e80c78c4027afc65a87b0a5e43e86742b8ca0823584c6788fd0'</span>,
    <span class="hljs-attr">tx</span>: {
        <span class="hljs-attr">nonce</span>: <span class="hljs-string">'0x0'</span>,
        <span class="hljs-attr">gasPrice</span>: <span class="hljs-string">'0x4a817c800'</span>,
        <span class="hljs-attr">gas</span>: <span class="hljs-string">'0x5208'</span>,
        <span class="hljs-attr">to</span>: <span class="hljs-string">'lax1x56n2df4x56n2df4x56n2df4x56n2df44dm33c'</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-string">'0xde0b6b3a7640000'</span>,
        <span class="hljs-attr">input</span>: <span class="hljs-string">'0x'</span>,
        <span class="hljs-attr">v</span>: <span class="hljs-string">'0x25'</span>,
        <span class="hljs-attr">r</span>: <span class="hljs-string">'0x4f4c17305743700648bc4f6cd3038ec6f6af0df73e31757007b7f59df7bee88d'</span>,
        <span class="hljs-attr">s</span>: <span class="hljs-string">'0x7e1941b264348e80c78c4027afc65a87b0a5e43e86742b8ca0823584c6788fd0'</span>,
        <span class="hljs-attr">hash</span>: <span class="hljs-string">'0xda3be87732110de6c1354c83770aae630ede9ac308d9f7b399ecfba23d923384'</span>
    }
}
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonestimategas"></a><a href="#web3platonestimategas" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.estimateGas</h4>
<p><code>web3.platon.estimateGas()</code>方法通过执行一个消息调用来估算交易的gas用量。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.estimateGas</span>(<span class="hljs-selector-tag">callObject</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>callObject</code>：Object - 交易对象，其from属性可选</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为模拟调用的gas用量。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.estimateGas({
    <span class="hljs-attr">to</span>: <span class="hljs-string">"lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2"</span>,
    <span class="hljs-attr">data</span>: <span class="hljs-string">"0xc6888fa10000000000000000000000000000000000000000000000000000000000000003"</span>
})
.then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-string">"0x0000000000000000000000000000000000000000000000000000000000000015"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platongetpastlogs"></a><a href="#web3platongetpastlogs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.getPastLogs</h4>
<p><code>web3.platon.getPastLogs()</code>方法根据指定的选项返回历史日志。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.getPastLogs</span>(<span class="hljs-selector-tag">options</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>options</code>：Object - 过滤器对象，包含如下字段：
<ul>
<li>fromBlock - Number|String: The number of the earliest block (&quot;latest&quot; may be given to mean the most recent and &quot;pending&quot; currently mining, block). By default &quot;latest&quot;.</li>
<li>toBlock - Number|String: The number of the latest block (&quot;latest&quot; may be given to mean the most recent and &quot;pending&quot; currently mining, block). By default &quot;latest&quot;.</li>
<li>address - String|Array: An address or a list of addresses to only get logs from particular account(s).</li>
<li>topics - Array: An array of values which must each appear in the log entries. The order is important, if you want to leave topics out use null, e.g. [null, '0x12...']. You can also pass an array for each topic with options for that topic e.g. [null, ['option1', 'option2']]</li>
</ul></li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为日志对象数组。</p>
<p>数组中的事件对象结构如下：</p>
<ul>
<li>address - String: 事件发生源地址</li>
<li>data - String: 包含未索引的日志参数</li>
<li>topics - Array: 包含最多4个32字节主题的数组，主题1-3包含日志的索引参数</li>
<li>logIndex - Number: 事件在块中的索引位置</li>
<li>transactionIndex - Number: 包含事件的交易的索引位置</li>
<li>transactionHash 32 Bytes - String: 包含事件的交易的哈希值</li>
<li>blockHash 32 Bytes - String: 包含事件的块的哈希值，如果处于pending状态，则为null</li>
<li>blockNumber - Number: 包含事件的块编号，处于pending状态时该字段为null</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.getPastLogs({
    <span class="hljs-attr">address</span>: <span class="hljs-string">"lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2"</span>,
    <span class="hljs-attr">topics</span>: [<span class="hljs-string">"0x033456732123ffff2342342dd12342434324234234fd234fd23fd4f23d4234"</span>]
})
.then(<span class="hljs-built_in">console</span>.log);

&gt; [{
    <span class="hljs-attr">data</span>: <span class="hljs-string">'0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385'</span>,
    <span class="hljs-attr">topics</span>: [<span class="hljs-string">'0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7'</span>, <span class="hljs-string">'0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385'</span>]
    <span class="hljs-attr">logIndex</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">transactionIndex</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">transactionHash</span>: <span class="hljs-string">'0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385'</span>,
    <span class="hljs-attr">blockHash</span>: <span class="hljs-string">'0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7'</span>,
    <span class="hljs-attr">blockNumber</span>: <span class="hljs-number">1234</span>,
    <span class="hljs-attr">address</span>: <span class="hljs-string">'lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2'</span>
},{...}]
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonsubscribe"></a><a href="#web3platonsubscribe" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.subscribe</h4>
<p>使用<code>web3.platon.subscribe()</code>方法来订阅区块链上的指定事件。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.subscribe</span>(<span class="hljs-selector-tag">type</span> <span class="hljs-selector-attr">[, options]</span> <span class="hljs-selector-attr">[, callback]</span>);
</code></pre>
<p>参数：</p>
<ul>
<li><code>type</code>：String - 订阅类型</li>
<li><code>options</code>：Mixed - 可选的额外参数，依赖于订阅类型</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p>EventEmitter - 订阅实例对象，具有以下字段：</p>
<ul>
<li>subscription.id: 订阅id编号，用于标识一个订阅以及进行后续的取消订阅操作</li>
<li>subscription.subscribe([callback]): 可用于使用相同的参数进行再次订阅</li>
<li>subscription.unsubscribe([callback]): 取消订阅，如果成功取消的话，在回调函数中返回true</li>
<li>subscription.arguments: 订阅参数，当重新订阅时使用</li>
<li>on(&quot;data&quot;) 返回 Object: 每次有新的日志时都触发该事件，参数为日志对象</li>
<li>on(&quot;changed&quot;) 返回 Object: 每次有日志从区块链上移除时触发该事件，被移除的日志对象将添加额外的属性：&quot;removed: true&quot;</li>
<li>on(&quot;error&quot;) 返回 Object: 当订阅中发生错误时，触发此事件</li>
</ul>
<p>通知返回值：</p>
<p>Mixed - 取决于具体的订阅类型</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> subscription = web3.platon.subscribe(<span class="hljs-string">'logs'</span>, {
    <span class="hljs-attr">address</span>: <span class="hljs-string">'lax..'</span>,
    <span class="hljs-attr">topics</span>: [<span class="hljs-string">'lax...'</span>]
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, result</span>)</span>{
    <span class="hljs-keyword">if</span> (!error)
        <span class="hljs-built_in">console</span>.log(log);
});

<span class="hljs-comment">// unsubscribes the subscription</span>
subscription.unsubscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, success</span>)</span>{
    <span class="hljs-keyword">if</span>(success)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Successfully unsubscribed!'</span>);
});
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonclearsubscriptions"></a><a href="#web3platonclearsubscriptions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.clearSubscriptions</h4>
<p><code>web3.platon.clearSubscriptions()</code>方法用来复位订阅状态。注意该方法不能
复位其他包的订阅，例如web3-shh，因为这些包有自己的请求管理器。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.clearSubscriptions</span>(<span class="hljs-selector-tag">flag</span>)
</code></pre>
<p>参数:</p>
<ul>
<li><code>flag</code>：Boolean -  值为true则表示保持同步订阅</li>
</ul>
<p>返回值：</p>
<p><code>Boolean</code>：复位成功返回true，否则返回false</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.subscribe(<span class="hljs-string">'logs'</span>, {} ,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{ ... });

...

web3.platon.clearSubscriptions();
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonsubscribependingtransactions"></a><a href="#web3platonsubscribependingtransactions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.subscribe(&quot;pendingTransactions&quot;)</h4>
<p>参数<code>pendingTransactions</code>表示订阅处于pending状态的交易。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.subscribe</span>(<span class="hljs-string">'pendingTransactions'</span> [, callback]);
</code></pre>
<p>参数：</p>
<ul>
<li><code>type</code>：String - &quot;pendingTransactions&quot;，订阅类型</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p><code>EventEmitter</code>: 订阅实例对象，是一个事件发生器，定义有以下事件：</p>
<ul>
<li>&quot;data&quot; 返回 Object: 当接收到pending状态的交易时触发</li>
<li>&quot;error&quot; 返回 Object: 当订阅中发生错误时触发</li>
</ul>
<p>返回对象的结构，参见web3.platon.getTransaction()的返回值。</p>
<p>通知返回值：</p>
<ul>
<li>Object|Null - 第一个参数是一个错误对象，如果订阅成功则为null</li>
<li>Object - 块头对象</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> subscription = web3.platon.subscribe(<span class="hljs-string">'pendingTransactions'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, result</span>)</span>{
    <span class="hljs-keyword">if</span> (!error)
        <span class="hljs-built_in">console</span>.log(result);
})
.on(<span class="hljs-string">"data"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">transaction</span>)</span>{
    <span class="hljs-built_in">console</span>.log(transaction);
});

<span class="hljs-comment">// unsubscribes the subscription</span>
subscription.unsubscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, success</span>)</span>{
    <span class="hljs-keyword">if</span>(success)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Successfully unsubscribed!'</span>);
});
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonsubscribenewblockheaders"></a><a href="#web3platonsubscribenewblockheaders" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.subscribe('newBlockHeaders')</h4>
<p>使用<code>newBlockHeaders</code>参数订阅新的区块头生成事件。可用做检查区块链上变化的计时器。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.subscribe</span>(<span class="hljs-string">'newBlockHeaders'</span> [, callback]);
</code></pre>
<p>参数：</p>
<ul>
<li><code>type</code>：String - &quot;newBlockHeaders&quot;, 订阅类型</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p>EventEmitter: 订阅对象实例，是一个事件发生器，定义有如下事件：</p>
<ul>
<li>&quot;data&quot; 返回 Object: 当收到新的区块头时触发</li>
<li>&quot;error&quot; 返回 Object: 当订阅中出现错误时触发</li>
</ul>
<p>返回的区块头对象结构如下：</p>
<ul>
<li>number - Number: 区块编号，对于pending的块该值为null</li>
<li>hash 32 Bytes - String: 块的哈希值，挂起的块该值为null</li>
<li>parentHash 32 Bytes - String: 父区块的哈希值</li>
<li>nonce 8 Bytes - String: 生成的proof-of-work的哈希值。挂起块该值为null、</li>
<li>sha3Uncles 32 Bytes - String: 块中叔伯数据的SHA3值</li>
<li>logsBloom 256 Bytes - String: 块日志的bloom filter，块处于挂起状态时该值为null</li>
<li>transactionsRoot 32 Bytes - String: 块交易树的根节点</li>
<li>stateRoot 32 Bytes - String: 块状态树的根节点</li>
<li>receiptRoot 32 Bytes - String: 收据根节点</li>
<li>miner - String: 接收挖矿奖励的矿工地址</li>
<li>extraData - String: 区块的额外数据字段</li>
<li>gasLimit - Number: 该块允许的最大gas用量</li>
<li>gasUsed - Number: 该块中所有交易使用的gas总用量</li>
<li>timestamp - Number: 出块的unix时间戳</li>
</ul>
<p>通知返回值：</p>
<ul>
<li>Object|Null - 如果订阅失败，则该参数为错误对象，否则为null</li>
<li>Object - 区块头对象</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> subscription = web3.platon.subscribe(<span class="hljs-string">'newBlockHeaders'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, result</span>)</span>{
    <span class="hljs-keyword">if</span> (error)
        <span class="hljs-built_in">console</span>.log(error);
})
.on(<span class="hljs-string">"data"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">blockHeader</span>)</span>{
});

<span class="hljs-comment">// unsubscribes the subscription</span>
subscription.unsubscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, success</span>)</span>{
    <span class="hljs-keyword">if</span>(success)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Successfully unsubscribed!'</span>);
});
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonsubscribesyncing"></a><a href="#web3platonsubscribesyncing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.subscribe('syncing')</h4>
<p>使用<code>syncing</code>参数订阅同步事件。当节点同步时将返回一个同步对象，否则返回false。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.subscribe</span>(<span class="hljs-string">'syncing'</span> [, callback]);
</code></pre>
<p>参数：</p>
<ul>
<li><code>type</code>：String - &quot;syncing&quot;, 订阅类型</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p>EventEmitter: 订阅对象实例，是一个事件发生器，定义有如下事件：</p>
<ul>
<li>&quot;data&quot; 返回 Object: 收到同步对象时触发</li>
<li>&quot;changed&quot; 返回 Object: 当节点从同步状态转换为非同步状态时触发</li>
<li>&quot;error&quot; 返回 Object: 当订阅中出现错误时触发</li>
</ul>
<p>要了解返回的事件对象的结构，可以查看<code>web3.platon.isSyncing()</code>方法的返回值。</p>
<p>通知返回值：</p>
<ul>
<li>Object|Null - 当订阅失败时，该值为错误对象，否则为null</li>
<li>Object|Boolean - 同步对象</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> subscription = web3.platon.subscribe(<span class="hljs-string">'syncing'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, sync</span>)</span>{
    <span class="hljs-keyword">if</span> (!error)
        <span class="hljs-built_in">console</span>.log(sync);
})
.on(<span class="hljs-string">"data"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sync</span>)</span>{
    <span class="hljs-comment">// show some syncing stats</span>
})
.on(<span class="hljs-string">"changed"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">isSyncing</span>)</span>{
    <span class="hljs-keyword">if</span>(isSyncing) {
        <span class="hljs-comment">// stop app operation</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// regain app operation</span>
    }
});

<span class="hljs-comment">// unsubscribes the subscription</span>
subscription.unsubscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, success</span>)</span>{
    <span class="hljs-keyword">if</span>(success)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Successfully unsubscribed!'</span>);
});
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonsubscribelogs"></a><a href="#web3platonsubscribelogs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.subscribe('logs')</h4>
<p>使用<code>logs</code>参数订阅日志，并且可以指定条件进行过滤。</p>
<p>调用：</p>
<pre><code class="hljs">web3.platon.subscribe(<span class="hljs-string">'logs'</span>, <span class="hljs-keyword">options</span> [, callback]);
</code></pre>
<p>参数：</p>
<ul>
<li><code>&quot;logs&quot;</code> ：String, 订阅类型</li>
<li><code>options</code>：Object - 订阅选项，该对象包含如下字段：
<ul>
<li>fromBlock - Number: 最早块的编号，默认值为null</li>
<li>address - String|Array: 地址或地址列表，仅订阅来自这些账户地址的日志</li>
<li>topics - Array: 主题数组，仅订阅日志中包含这些主题的日志。</li>
</ul></li>
<li><code>callback</code> - Function: 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p>EventEmitter: 订阅实例对象，是一个事件发生器，定义有如下事件：</p>
<ul>
<li>&quot;data&quot; 返回 Object: 接收到新日志时触发，参数为日志对象</li>
<li>&quot;changed&quot; 返回 Object: 日志从链上移除时触发，该日志同时添加属性 &quot;removed: true&quot;</li>
<li>&quot;error&quot; 返回 Object: 当订阅中出现错误时触发</li>
</ul>
<p>要了解返回的事件对象的结果，可查阅<code>web3.platon.getPastEvents()</code>方法的返回值。</p>
<p>通知返回值：</p>
<ul>
<li>Object|Null - 订阅失败时该值为错误对象，否则为null</li>
<li>Object - 日志对象，类似于<code>web3.platon.getPastEvents()</code>方法的返回值</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> subscription = web3.platon.subscribe(<span class="hljs-string">'logs'</span>, {
    <span class="hljs-attr">address</span>: <span class="hljs-string">'lax..'</span>,
    <span class="hljs-attr">topics</span>: [<span class="hljs-string">'lax...'</span>]
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, result</span>)</span>{
    <span class="hljs-keyword">if</span> (!error)
        <span class="hljs-built_in">console</span>.log(result);
})
.on(<span class="hljs-string">"data"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">log</span>)</span>{
    <span class="hljs-built_in">console</span>.log(log);
})
.on(<span class="hljs-string">"changed"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">log</span>)</span>{
});

<span class="hljs-comment">// unsubscribes the subscription</span>
subscription.unsubscribe(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, success</span>)</span>{
    <span class="hljs-keyword">if</span>(success)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Successfully unsubscribed!'</span>);
});
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platoncontract"></a><a href="#web3platoncontract" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.Contract</h4>
<p><code>web3.platon.Contract</code>类简化了与以太坊区块链上智能合约的交互。创建合约对象时，
只需指定相应智能合约的json接口，web3就可以自动地将所有的调用转换为底层
基于RPC的ABI调用。</p>
<p>通过web3的封装，与智能合约的交互就像与JavaScript对象一样简单。</p>
<p>实例化一个新的合约对象：</p>
<pre><code class="hljs">new web3.platon.Contract(jsonInterface[<span class="hljs-string">, address</span>][<span class="hljs-symbol">, options</span>])
</code></pre>
<p>参数：</p>
<ul>
<li>jsonInterface - Object: 要实例化的合约的json接口</li>
<li>address - String: 可选，要调用的合约的地址，也可以在之后使用 myContract.options.address = '0x1234..' 来指定该地址</li>
<li>options - Object : 可选，合约的配置对象，其中某些字段用作调用和交易的回调：
<ul>
<li><p>from - String: 交易发送方地址</p></li>
<li><p>gasPrice - String: 用于交易的gas价格，单位：VON</p></li>
<li><p>gas - Number: 交易可用的最大gas量，即gas limit</p></li>
<li><p>data - String: 合约的字节码，部署合约时需要</p></li>
<li><p>vmType - Number: 合约类型。0表示solidity合约，1表示wasm合约。不传默认是solidity合约。(新增字段)</p></li>
<li><p>net_type - String: 网络类型。<code>lat</code>表示主网，<code>lax</code>表示测试网。不传默认是测试网。(新增字段)</p>
<p>返回值：</p></li>
</ul></li>
</ul>
<p><code>Object</code>: The contract instance with all its methods and events.</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> myContract = <span class="hljs-keyword">new</span> web3.platon.Contract([...], <span class="hljs-string">'lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2'</span>, {
    <span class="hljs-attr">from</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>, <span class="hljs-comment">// default from address</span>
    <span class="hljs-attr">gasPrice</span>: <span class="hljs-string">'20000000000'</span> <span class="hljs-comment">// default gas price in VON, 20 GVON in this case</span>
});
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="options合约实例的选项"></a><a href="#options合约实例的选项" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>options合约实例的选项</h4>
<p>合约实例的可选配置对象。当发送交易时，其from、gas和gasPrice被用作回调值。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">myContract</span><span class="hljs-selector-class">.options</span>
</code></pre>
<p><code>options</code>属性对象具有以下字段：</p>
<ul>
<li>address - String: 合约的部署地址</li>
<li>jsonInterface - Array: 合约的json接口</li>
<li>data - String: 合约的字节码，合约部署时会用到</li>
<li>from - String: 合约发送方账户地址</li>
<li>gasPrice - String: 用于交易的gas价格，单位：VON</li>
<li>gas - Number: 交易的gas用量上限，即gas limit</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js">myContract.options;
&gt; {
    <span class="hljs-attr">address</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>,
    <span class="hljs-attr">jsonInterface</span>: [...],
    <span class="hljs-attr">from</span>: <span class="hljs-string">'lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2'</span>,
    <span class="hljs-attr">gasPrice</span>: <span class="hljs-string">'10000000000000'</span>,
    <span class="hljs-attr">gas</span>: <span class="hljs-number">1000000</span>
}

myContract.options.from = <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>; <span class="hljs-comment">// default from address</span>
myContract.options.gasPrice = <span class="hljs-string">'20000000000000'</span>; <span class="hljs-comment">// default gas price in VON</span>
myContract.options.gas = <span class="hljs-number">5000000</span>; <span class="hljs-comment">// provide as fallback always 5M gas</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="optionsaddress---合约地址"></a><a href="#optionsaddress---合约地址" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>options.address - 合约地址</h4>
<p>用于合约实例的地址，保存。web3.js从这个合约生成的所有交易，其to字段的值都是该地址。
当设置该选项时，web3.js将以小写形式保存。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">myContract</span><span class="hljs-selector-class">.options</span><span class="hljs-selector-class">.address</span>
</code></pre>
<p>属性：</p>
<p><code>address</code> - String|null: 合约实例对象的地址，如果未设置的话则为null</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">myContract.options.address;
&gt; <span class="hljs-string">'lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2'</span>

<span class="hljs-comment">// 设置一个新地址</span>
myContract.options.address = <span class="hljs-string">'lax...'</span>;
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="optionsjsoninterface---合约json接口"></a><a href="#optionsjsoninterface---合约json接口" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>options.jsonInterface - 合约JSON接口</h4>
<p><code>jsonInterface</code>配置项基于合约的ABI信息生成。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">myContract</span><span class="hljs-selector-class">.options</span><span class="hljs-selector-class">.jsonInterface</span>
</code></pre>
<p>属性：</p>
<p><code>jsonInterface</code> - Array: 合约的json接口。重新设置该属性将重新生成合约实例的方法和事件。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">myContract.options.jsonInterface;
&gt; [{
    <span class="hljs-string">"type"</span>:<span class="hljs-string">"function"</span>,
    <span class="hljs-string">"name"</span>:<span class="hljs-string">"foo"</span>,
    <span class="hljs-string">"inputs"</span>: [{<span class="hljs-string">"name"</span>:<span class="hljs-string">"a"</span>,<span class="hljs-string">"type"</span>:<span class="hljs-string">"uint256"</span>}],
    <span class="hljs-string">"outputs"</span>: [{<span class="hljs-string">"name"</span>:<span class="hljs-string">"b"</span>,<span class="hljs-string">"type"</span>:<span class="hljs-string">"address"</span>}]
},{
    <span class="hljs-string">"type"</span>:<span class="hljs-string">"event"</span>,
    <span class="hljs-string">"name"</span>:<span class="hljs-string">"Event"</span>
    <span class="hljs-string">"inputs"</span>: [{<span class="hljs-string">"name"</span>:<span class="hljs-string">"a"</span>,<span class="hljs-string">"type"</span>:<span class="hljs-string">"uint256"</span>,<span class="hljs-string">"indexed"</span>:<span class="hljs-literal">true</span>},{<span class="hljs-string">"name"</span>:<span class="hljs-string">"b"</span>,<span class="hljs-string">"type"</span>:<span class="hljs-string">"bytes32"</span>,<span class="hljs-string">"indexed"</span>:<span class="hljs-literal">false</span>}],
}]

<span class="hljs-comment">// 设置一个新的接口</span>
myContract.options.jsonInterface = [...];
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="deploy---部署合约"></a><a href="#deploy---部署合约" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>deploy - 部署合约</h4>
<p>调用合约的<code>deploy()</code>方法将其部署到区块链上。其返回的Promise对象
将在成功部署后解析为新的合约实例。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">myContract</span><span class="hljs-selector-class">.deploy</span>(<span class="hljs-selector-tag">options</span>)
</code></pre>
<p>参数：</p>
<p><code>options</code> - Object: 用于部署的配置选项，包含以下字段：</p>
<ul>
<li>data - String: 合约的字节码</li>
<li>arguments - Array : 可选，在部署时将传入合约的构造函数。如果部署wasm合约，可以参考<a href="https://github.com/PlatONnetwork/client-sdk-js/blob/feature/wasm/test/1_platon_wasm.js">wasm合约参数传递参考</a>。</li>
</ul>
<p>返回值：</p>
<p><code>Object</code>: 交易对象，包含以下字段：</p>
<ul>
<li><code>arguments</code>: Array - 之前传入方法的参数，可修改</li>
<li><code>send</code>: Function - 用来部署合约，其返回的promise对象将解析为新的合约实例，而非交易收据！</li>
<li><code>estimateGas</code>: Function -  用来估算用于部署的gas用量</li>
<li><code>encodeABI</code>: Function - 用来编码部署的ABI数据，即合约数据 + 构造函数参数</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js">myContract.deploy({
    <span class="hljs-attr">data</span>: <span class="hljs-string">'0x12345...'</span>,
    <span class="hljs-attr">arguments</span>: [<span class="hljs-number">123</span>, <span class="hljs-string">'My String'</span>]
})
.send({
    <span class="hljs-attr">from</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>,
    <span class="hljs-attr">gas</span>: <span class="hljs-number">1500000</span>,
    <span class="hljs-attr">gasPrice</span>: <span class="hljs-string">'30000000000000'</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, transactionHash</span>)</span>{ ... })
.on(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>)</span>{ ... })
.on(<span class="hljs-string">'transactionHash'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">transactionHash</span>)</span>{ ... })
.on(<span class="hljs-string">'receipt'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">receipt</span>)</span>{
   <span class="hljs-built_in">console</span>.log(receipt.contractAddress) <span class="hljs-comment">// 收据中包含了新的合约地址</span>
})
.on(<span class="hljs-string">'confirmation'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">confirmationNumber, receipt</span>)</span>{ ... })
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">newContractInstance</span>)</span>{
    <span class="hljs-built_in">console</span>.log(newContractInstance.options.address) <span class="hljs-comment">// 新地址的合约实例</span>
});


<span class="hljs-comment">// data是合约自身的一个可选配置项</span>
myContract.options.data = <span class="hljs-string">'0x12345...'</span>;

myContract.deploy({
    <span class="hljs-attr">arguments</span>: [<span class="hljs-number">123</span>, <span class="hljs-string">'My String'</span>]
})
.send({
    <span class="hljs-attr">from</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>,
    <span class="hljs-attr">gas</span>: <span class="hljs-number">1500000</span>,
    <span class="hljs-attr">gasPrice</span>: <span class="hljs-string">'30000000000000'</span>
})
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">newContractInstance</span>)</span>{
    <span class="hljs-built_in">console</span>.log(newContractInstance.options.address) <span class="hljs-comment">// instance with the new contract address</span>
});


<span class="hljs-comment">// 编码</span>
myContract.deploy({
    <span class="hljs-attr">data</span>: <span class="hljs-string">'0x12345...'</span>,
    <span class="hljs-attr">arguments</span>: [<span class="hljs-number">123</span>, <span class="hljs-string">'My String'</span>]
})
.encodeABI();
&gt; <span class="hljs-string">'0x12345...0000012345678765432'</span>


<span class="hljs-comment">// 估算gas</span>
myContract.deploy({
    <span class="hljs-attr">data</span>: <span class="hljs-string">'0x12345...'</span>,
    <span class="hljs-attr">arguments</span>: [<span class="hljs-number">123</span>, <span class="hljs-string">'My String'</span>]
})
.estimateGas(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, gas</span>)</span>{
    <span class="hljs-built_in">console</span>.log(gas);
});
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="methods---为合约方法创建交易"></a><a href="#methods---为合约方法创建交易" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>methods - 为合约方法创建交易</h4>
<p>为指定的合约方法创建一个交易对象，以便使用该交易对象进行调用、发送或估算gas。如果是wasm合约，可以参考<a href="https://github.com/PlatONnetwork/client-sdk-js/blob/feature/wasm/test/1_platon_wasm.js">wasm合约参数传递参考</a>。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">myContract</span><span class="hljs-selector-class">.methods</span><span class="hljs-selector-class">.myMethod</span>(<span class="hljs-selector-attr">[param1[, param2[, ...]</span>]])
</code></pre>
<p>可以使用以下语法获得指定方法的交易对象：</p>
<ul>
<li>名称: myContract.methods.myMethod(123)</li>
<li>带参名称: myContract.methods['myMethod(uint256)'](123)</li>
<li>签名: myContract.methods['0x58cf5f10'](123)</li>
</ul>
<p>这样就可以支持从javascript合约对象调用同名但参数不同的合约方法。</p>
<p>参数：</p>
<p>参数取决于在JSON接口中定义的合约方法</p>
<p>返回值：</p>
<p>Object: 交易对象，包含以下字段：</p>
<ul>
<li><code>arguments</code>: Array - 之前传入方法的参数，可修改</li>
<li><code>call</code>: Function -  用来调用只读的合约方法，在EVM直接执行而不必发出交易，因此不会改变合约的状态</li>
<li><code>send</code>: Function -  用来向合约发送交易并执行方法，因此可以改变合约的状态</li>
<li><code>estimateGas</code>: Function - 用来估算方法在链上执行时的gas用量</li>
<li><code>encodeABI</code>: Function -  用来为合约方法进行ABI编码。</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// 调用合约方法</span>
myContract.methods.myMethod(<span class="hljs-number">123</span>).call({<span class="hljs-attr">from</span>: <span class="hljs-string">'lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2'</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, result</span>)</span>{
    ...
});

<span class="hljs-comment">// 发送交易，使用Promise对象获取返回结果</span>
myContract.methods.myMethod(<span class="hljs-number">123</span>).send({<span class="hljs-attr">from</span>: <span class="hljs-string">'lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2'</span>})
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">receipt</span>)</span>{
    <span class="hljs-comment">// receipt can also be a new contract instance, when coming from a "contract.deploy({...}).send()"</span>
});

<span class="hljs-comment">// 发送交易，使用事件获取返回结果</span>
myContract.methods.myMethod(<span class="hljs-number">123</span>).send({<span class="hljs-attr">from</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>})
.on(<span class="hljs-string">'transactionHash'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">hash</span>)</span>{
    ...
})
.on(<span class="hljs-string">'receipt'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">receipt</span>)</span>{
    ...
})
.on(<span class="hljs-string">'confirmation'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">confirmationNumber, receipt</span>)</span>{
    ...
})
.on(<span class="hljs-string">'error'</span>, <span class="hljs-built_in">console</span>.error);
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="call---调用合约方法"></a><a href="#call---调用合约方法" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>call - 调用合约方法</h4>
<p>调用合约的只读方法，并在EVM中直接执行方法，不需要发送任何交易。因此不会改变合约的状态。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">myContract</span><span class="hljs-selector-class">.methods</span><span class="hljs-selector-class">.myMethod</span>(<span class="hljs-selector-attr">[param1[, param2[, ...]</span>]])<span class="hljs-selector-class">.call</span>(<span class="hljs-selector-tag">options</span><span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>options</code> - Object : 选项，包含如下字段：
<ul>
<li><code>from</code> - String (optional): The address the call “transaction” should be made from.</li>
<li>gasPrice - String (optional): The gas price in VON to use for this call “transaction”.</li>
<li>gas - Number (optional): The maximum gas provided for this call “transaction” (gas limit).</li>
</ul></li>
<li><code>callback</code> - Function : 可选的回调函数，其第二个参数为合约方法的执行结果，第一个参数为错误对象</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为合约方法的返回值，Mixed类型。如果合约方法返回多个值，则解析值为一个
对象。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// 使用回调函数接收合约方法执行结果</span>
myContract.methods.myMethod(<span class="hljs-number">123</span>).call({<span class="hljs-attr">from</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, result</span>)</span>{
    ...
});

<span class="hljs-comment">// 使用Promise接收合约方法执行结果</span>
myContract.methods.myMethod(<span class="hljs-number">123</span>).call({<span class="hljs-attr">from</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>})
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>)</span>{
    ...
});
</code></pre>
<p>下面合约中的方法返回多个值：</p>
<pre><code class="hljs"><span class="hljs-comment">// Solidity</span>
contract MyContract {
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFunction</span><span class="hljs-params">()</span> <span class="hljs-title">returns</span><span class="hljs-params">(uint256 myNumber, string myString)</span> </span>{
        <span class="hljs-keyword">return</span> (<span class="hljs-number">23456</span>, <span class="hljs-string">"Hello!%"</span>);
    }
}
</code></pre>
<p>那么在web3.js中，<code>call</code>方法的返回值将是一个对象，即使用返回变量名作为键，
也使用索引作为键：</p>
<pre><code class="hljs"><span class="hljs-comment">// web3.js</span>
var MyContract = new web3.platon.contract(abi, address);
MyContract.methods.myFunction().call()
.then(console.<span class="hljs-built_in">log</span>);
&gt; Result {
    myNumber: '<span class="hljs-number">2345</span>6',
    myString: 'Hello!%',
    <span class="hljs-number">0</span>: '<span class="hljs-number">2345</span>6', <span class="hljs-comment">// these are here as fallbacks if the name is not know or given</span>
    <span class="hljs-number">1</span>: 'Hello!%'
}
</code></pre>
<p>下面合约中的方法返回单个值：</p>
<pre><code class="hljs"><span class="hljs-comment">// Solidity</span>
contract MyContract {
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFunction</span><span class="hljs-params">()</span> <span class="hljs-title">returns</span><span class="hljs-params">(string myString)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello!%"</span>;
    }
}
</code></pre>
<p>那么在web3.js中，<code>call</code>方法也将返回单个值：</p>
<pre><code class="hljs"><span class="hljs-comment">// web3.js</span>
var MyContract = <span class="hljs-keyword">new</span> web3.platon.contract(abi, address);
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">MyContract</span>.</span></span>methods.my<span class="hljs-constructor">Function()</span>.call<span class="hljs-literal">()</span>
.<span class="hljs-keyword">then</span>(console.log);
&gt; <span class="hljs-string">"Hello!%"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="send---发送合约方法交易"></a><a href="#send---发送合约方法交易" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>send - 发送合约方法交易</h4>
<p>向合约发送交易来执行指定方法，将改变合约的状态。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">myContract</span><span class="hljs-selector-class">.methods</span><span class="hljs-selector-class">.myMethod</span>(<span class="hljs-selector-attr">[param1[, param2[, ...]</span>]])<span class="hljs-selector-class">.send</span>(<span class="hljs-selector-tag">options</span><span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li>options - Object: 选项，包含如下字段：
<ul>
<li>from - String: 交易发送方地址</li>
<li>gasPrice - String : 可选，用于本次交易的gas价格，单位：VON</li>
<li>gas - Number : 可选，本次交易的gas用量上限，即gas limit</li>
<li>value - Number|String|BN|BigNumber: 可选，交易转账金额，单位：VON</li>
</ul></li>
<li>callback - Function: 可选的回调参数，其参数为交易哈希值和错误对象</li>
</ul>
<p>返回值：</p>
<p>回调函数中将返回32字节长的交易哈希值。</p>
<p>PromiEvent: 一个Promise对象，当交易收据有效时或者发送交易时解析为新的合约实例。
它同时也是一个事件发生器，声明有以下事件：</p>
<ul>
<li>&quot;transactionHash&quot; 返回 String: 交易发送后得到有效交易哈希值时触发</li>
<li>&quot;receipt&quot; 返回 Object: 交易收据有效时触发。</li>
<li>&quot;confirmation&quot; 返回 Number, Object: 收到确认时触发</li>
<li>&quot;error&quot; 返回 Error: 交易发送过程中如果出现错误则触发此事件。对于out of gas错误，其第二个参数为交易收据</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// using the callback</span>
myContract.methods.myMethod(<span class="hljs-number">123</span>).send({<span class="hljs-attr">from</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, transactionHash</span>)</span>{
    ...
});

<span class="hljs-comment">// using the promise</span>
myContract.methods.myMethod(<span class="hljs-number">123</span>).send({<span class="hljs-attr">from</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>})
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">receipt</span>)</span>{
    <span class="hljs-comment">// receipt can also be a new contract instance, when coming from a "contract.deploy({...}).send()"</span>
});


<span class="hljs-comment">// using the event emitter</span>
myContract.methods.myMethod(<span class="hljs-number">123</span>).send({<span class="hljs-attr">from</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>})
.on(<span class="hljs-string">'transactionHash'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">hash</span>)</span>{
    ...
})
.on(<span class="hljs-string">'confirmation'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">confirmationNumber, receipt</span>)</span>{
    ...
})
.on(<span class="hljs-string">'receipt'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">receipt</span>)</span>{
    <span class="hljs-comment">// receipt example</span>
    <span class="hljs-built_in">console</span>.log(receipt);
    &gt; {
        <span class="hljs-string">"transactionHash"</span>: <span class="hljs-string">"0x9fc76417374aa880d4449a1f7f31ec597f00b1f6f3dd2d66f4c9c6c445836d8b"</span>,
        <span class="hljs-string">"transactionIndex"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"blockHash"</span>: <span class="hljs-string">"0xef95f2f1ed3ca60b048b4bf67cde2195961e0bba6f70bcbea9a2c4e133e34b46"</span>,
        <span class="hljs-string">"blockNumber"</span>: <span class="hljs-number">3</span>,
        <span class="hljs-string">"contractAddress"</span>: <span class="hljs-string">"lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2"</span>,
        <span class="hljs-string">"cumulativeGasUsed"</span>: <span class="hljs-number">314159</span>,
        <span class="hljs-string">"gasUsed"</span>: <span class="hljs-number">30234</span>,
        <span class="hljs-string">"events"</span>: {
            <span class="hljs-string">"MyEvent"</span>: {
                <span class="hljs-attr">returnValues</span>: {
                    <span class="hljs-attr">myIndexedParam</span>: <span class="hljs-number">20</span>,
                    <span class="hljs-attr">myOtherIndexedParam</span>: <span class="hljs-string">'0x123456789...'</span>,
                    <span class="hljs-attr">myNonIndexParam</span>: <span class="hljs-string">'My String'</span>
                },
                <span class="hljs-attr">raw</span>: {
                    <span class="hljs-attr">data</span>: <span class="hljs-string">'0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385'</span>,
                    <span class="hljs-attr">topics</span>: [<span class="hljs-string">'0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7'</span>, <span class="hljs-string">'0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385'</span>]
                },
                <span class="hljs-attr">event</span>: <span class="hljs-string">'MyEvent'</span>,
                <span class="hljs-attr">signature</span>: <span class="hljs-string">'0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7'</span>,
                <span class="hljs-attr">logIndex</span>: <span class="hljs-number">0</span>,
                <span class="hljs-attr">transactionIndex</span>: <span class="hljs-number">0</span>,
                <span class="hljs-attr">transactionHash</span>: <span class="hljs-string">'0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385'</span>,
                <span class="hljs-attr">blockHash</span>: <span class="hljs-string">'0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7'</span>,
                <span class="hljs-attr">blockNumber</span>: <span class="hljs-number">1234</span>,
                <span class="hljs-attr">address</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>
            },
            <span class="hljs-string">"MyOtherEvent"</span>: {
                ...
            },
            <span class="hljs-string">"MyMultipleEvent"</span>:[{...}, {...}] <span class="hljs-comment">// If there are multiple of the same event, they will be in an array</span>
        }
    }
})
.on(<span class="hljs-string">'error'</span>, <span class="hljs-built_in">console</span>.error); <span class="hljs-comment">// If there's an out of gas error the second parameter is the receipt.</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="estimategas---估算合约方法gas用量"></a><a href="#estimategas---估算合约方法gas用量" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>estimateGas - 估算合约方法gas用量</h4>
<p>通过在EVM中执行方法来估算链上执行是需要的gas用量。得到的估算值可能与之后实际发送
交易的gas用量有差异，因为合约的状态可能在两个时刻存在差异。</p>
<p>调用：</p>
<pre><code class="hljs">myContract.methods.my<span class="hljs-constructor">Method([<span class="hljs-params">param1</span>[, <span class="hljs-params">param2</span>[, <span class="hljs-operator">...</span>]]])</span>.estimate<span class="hljs-constructor">Gas(<span class="hljs-params">options</span>[, <span class="hljs-params">callback</span>])</span>
</code></pre>
<p>参数：</p>
<ul>
<li><code>options</code> - Object : 选项，包括以下字段：
<ul>
<li>from - String : 可选，交易发送方地址</li>
<li>gas - Number : 可选，本次交易gas用量上限</li>
<li>value - Number|String|BN|BigNumber:  可选，交易转账金额，单位：VON</li>
<li>callback - Function : 可选的回调函数，触发时其第二个参数为gas估算量，第一个参数为错误对象。</li>
</ul></li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为估算的gas用量。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// 使用回调函数</span>
myContract.methods.myMethod(<span class="hljs-number">123</span>).estimateGas({<span class="hljs-attr">gas</span>: <span class="hljs-number">5000000</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, gasAmount</span>)</span>{
    <span class="hljs-keyword">if</span>(gasAmount == <span class="hljs-number">5000000</span>)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Method ran out of gas'</span>);
});

<span class="hljs-comment">// 使用promise</span>
myContract.methods.myMethod(<span class="hljs-number">123</span>).estimateGas({<span class="hljs-attr">from</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>})
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">gasAmount</span>)</span>{
    ...
})
.catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>)</span>{
    ...
});
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="encodeabi---abi编码合约方法"></a><a href="#encodeabi---abi编码合约方法" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>encodeABI - ABI编码合约方法</h4>
<p>为指定的合约方法进行ABI编码，可用于发送交易、调用方法或向另一个合约方法传递参数。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">myContract</span><span class="hljs-selector-class">.methods</span><span class="hljs-selector-class">.myMethod</span>(<span class="hljs-selector-attr">[param1[, param2[, ...]</span>]])<span class="hljs-selector-class">.encodeABI</span>()
</code></pre>
<p>参数：</p>
<p>无</p>
<p>返回值：</p>
<p><code>String</code>: 编码后的ABI字节码，可用于交易发送或方法调用</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">myContract.methods.myMethod(<span class="hljs-number">123</span>).encodeABI();
&gt; <span class="hljs-string">'0x58cf5f1000000000000000000000000000000000000000000000000000000000000007B'</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="events---订阅合约事件"></a><a href="#events---订阅合约事件" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>events - 订阅合约事件</h4>
<p>订阅指定的合约事件。</p>
<p>调用：</p>
<pre><code class="hljs">myContract.events.MyEvent([<span class="hljs-string">options</span>][<span class="hljs-symbol">, callback</span>])
</code></pre>
<p>参数：</p>
<ul>
<li>options - Object: 可选，用于部署的选项，包含以下字段：
<ul>
<li>filter - Object : 可选，按索引参数过滤事件。例如 {filter: {myNumber: [12,13]}} 表示 “myNumber” 为12或13的所有事件</li>
<li>fromBlock - Number: 可选，仅监听该选项指定编号的块中发生的事件</li>
<li>topics - Array : 可选，用来手动为事件过滤器设定主题。如果设置过filter属性和事件签名，那么(topic[0])将不会自动设置</li>
</ul></li>
<li>callback - Function: 可选，该回调函数触发时，其第二给参数为事件对象，第一个参数为错误对象</li>
</ul>
<p>返回值：</p>
<p>EventEmitter: 事件发生器，声明有以下事件:</p>
<ul>
<li>&quot;data&quot; 返回 Object: 接收到新的事件时触发，参数为事件对象</li>
<li>&quot;changed&quot; 返回 Object: 当事件从区块链上移除时触发，该事件对象将被添加额外的属性&quot;removed: true&quot;</li>
<li>&quot;error&quot; 返回 Object: 当发生错误时触发</li>
</ul>
<p>返回的事件对象结构如下：</p>
<ul>
<li>event - String: 事件名称</li>
<li>signature - String|Null: 事件签名，如果是匿名事件，则为null</li>
<li>address - String: 事件源地址</li>
<li>returnValues - Object: 事件返回值，例如 {myVar: 1, myVar2: '0x234...'}.</li>
<li>logIndex - Number: 事件在块中的索引位置</li>
<li>transactionIndex - Number: 事件在交易中的索引位置</li>
<li>transactionHash 32 Bytes - String: 事件所在交易的哈希值</li>
<li>blockHash 32 Bytes - String: 事件所在块的哈希值，pending的块该值为 null</li>
<li>blockNumber - Number: 事件所在块的编号，pending的块该值为null</li>
<li>raw.data - String: 该字段包含未索引的日志参数</li>
<li>raw.topics - Array: 最多可保存4个32字节长的主题字符串数组。主题1-3 包含事件的索引参数</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js">myContract.events.MyEvent({
    <span class="hljs-attr">filter</span>: {<span class="hljs-attr">myIndexedParam</span>: [<span class="hljs-number">20</span>,<span class="hljs-number">23</span>], <span class="hljs-attr">myOtherIndexedParam</span>: <span class="hljs-string">'0x123456789...'</span>}, <span class="hljs-comment">// Using an array means OR: e.g. 20 or 23</span>
    <span class="hljs-attr">fromBlock</span>: <span class="hljs-number">0</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, event</span>)</span>{ <span class="hljs-built_in">console</span>.log(event); })
.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
    <span class="hljs-built_in">console</span>.log(event); <span class="hljs-comment">// same results as the optional callback above</span>
})
.on(<span class="hljs-string">'changed'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
    <span class="hljs-comment">// remove event from local database</span>
})
.on(<span class="hljs-string">'error'</span>, <span class="hljs-built_in">console</span>.error);

<span class="hljs-comment">// event output example</span>
&gt; {
    <span class="hljs-attr">returnValues</span>: {
        <span class="hljs-attr">myIndexedParam</span>: <span class="hljs-number">20</span>,
        <span class="hljs-attr">myOtherIndexedParam</span>: <span class="hljs-string">'0x123456789...'</span>,
        <span class="hljs-attr">myNonIndexParam</span>: <span class="hljs-string">'My String'</span>
    },
    <span class="hljs-attr">raw</span>: {
        <span class="hljs-attr">data</span>: <span class="hljs-string">'0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385'</span>,
        <span class="hljs-attr">topics</span>: [<span class="hljs-string">'0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7'</span>, <span class="hljs-string">'0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385'</span>]
    },
    <span class="hljs-attr">event</span>: <span class="hljs-string">'MyEvent'</span>,
    <span class="hljs-attr">signature</span>: <span class="hljs-string">'0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7'</span>,
    <span class="hljs-attr">logIndex</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">transactionIndex</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">transactionHash</span>: <span class="hljs-string">'0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385'</span>,
    <span class="hljs-attr">blockHash</span>: <span class="hljs-string">'0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7'</span>,
    <span class="hljs-attr">blockNumber</span>: <span class="hljs-number">1234</span>,
    <span class="hljs-attr">address</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>
}
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="eventsallevents---订阅合约全部事件"></a><a href="#eventsallevents---订阅合约全部事件" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>events.allEvents - 订阅合约全部事件</h4>
<p>调用：</p>
<pre><code class="hljs">myContract.events.allEvents([<span class="hljs-string">options</span>][<span class="hljs-symbol">, callback</span>])
</code></pre>
<p>与<code>events</code>相同，只是可以接收合约的全部事件。可以使用options.filter属性进行过滤。</p>
<hr>
<h4><a class="anchor" aria-hidden="true" id="getpastevents---读取合约历史事件"></a><a href="#getpastevents---读取合约历史事件" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>getPastEvents - 读取合约历史事件</h4>
<p>读取合约的历史事件。</p>
<p>调用:</p>
<pre><code class="hljs">myContract.getPastEvents(event[<span class="hljs-string">, options</span>][<span class="hljs-symbol">, callback</span>])
</code></pre>
<p>参数：</p>
<ul>
<li>event - String: 事件名，或者使用 &quot;allEvents&quot; 来读取所有的事件</li>
<li>options - Object: 用于部署的选项，包含以下字段：
<ul>
<li>filter - Object : 可选，按索引参数过滤事件，例如 {filter: {myNumber: [12,13]}} 表示所有“myNumber” 为12 或 13的事件</li>
<li>fromBlock - Number : 可选，仅读取从该编号开始的块中的历史事件。</li>
<li>toBlock - Number : 可选，仅读取截止到该编号的块中的历史事件，默认值为&quot;latest&quot;</li>
<li>topics - Array : 可选，用来手动设置事件过滤器的主题。如果设置了filter属性和事件签名，那么(topic[0])将不会自动设置</li>
</ul></li>
<li>callback - Function : 可选的回调参数，触发时其第一个参数为错误对象，第二个参数为历史事件数组</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为历史事件对象数组</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">myContract.getPastEvents(<span class="hljs-string">'MyEvent'</span>, {
    <span class="hljs-attr">filter</span>: {<span class="hljs-attr">myIndexedParam</span>: [<span class="hljs-number">20</span>,<span class="hljs-number">23</span>], <span class="hljs-attr">myOtherIndexedParam</span>: <span class="hljs-string">'0x123456789...'</span>}, <span class="hljs-comment">// Using an array means OR: e.g. 20 or 23</span>
    <span class="hljs-attr">fromBlock</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">toBlock</span>: <span class="hljs-string">'latest'</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, events</span>)</span>{ <span class="hljs-built_in">console</span>.log(events); })
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">events</span>)</span>{
    <span class="hljs-built_in">console</span>.log(events) <span class="hljs-comment">// same results as the optional callback above</span>
});

&gt; [{
    <span class="hljs-attr">returnValues</span>: {
        <span class="hljs-attr">myIndexedParam</span>: <span class="hljs-number">20</span>,
        <span class="hljs-attr">myOtherIndexedParam</span>: <span class="hljs-string">'0x123456789...'</span>,
        <span class="hljs-attr">myNonIndexParam</span>: <span class="hljs-string">'My String'</span>
    },
    <span class="hljs-attr">raw</span>: {
        <span class="hljs-attr">data</span>: <span class="hljs-string">'0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385'</span>,
        <span class="hljs-attr">topics</span>: [<span class="hljs-string">'0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7'</span>, <span class="hljs-string">'0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385'</span>]
    },
    <span class="hljs-attr">event</span>: <span class="hljs-string">'MyEvent'</span>,
    <span class="hljs-attr">signature</span>: <span class="hljs-string">'0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7'</span>,
    <span class="hljs-attr">logIndex</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">transactionIndex</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">transactionHash</span>: <span class="hljs-string">'0x7f9fade1c0d57a7af66ab4ead79fade1c0d57a7af66ab4ead7c2c2eb7b11a91385'</span>,
    <span class="hljs-attr">blockHash</span>: <span class="hljs-string">'0xfd43ade1c09fade1c0d57a7af66ab4ead7c2c2eb7b11a91ffdd57a7af66ab4ead7'</span>,
    <span class="hljs-attr">blockNumber</span>: <span class="hljs-number">1234</span>,
    <span class="hljs-attr">address</span>: <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>
},{
    ...
}]
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="newfilter---创建一个新的过滤器"></a><a href="#newfilter---创建一个新的过滤器" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>newFilter - 创建一个新的过滤器</h4>
<p>创建一个新的过滤器并返回过滤器id。当状态改变时，它可以用来检索日志。</p>
<p>调用:</p>
<pre><code class="hljs">myContract.newFilter(event[<span class="hljs-string">, options</span>][<span class="hljs-symbol">, callback</span>])
</code></pre>
<p>参数：</p>
<ul>
<li>event - String: 事件名，或者使用 &quot;allEvents&quot; 来读取所有的事件</li>
<li>options - Object: 用于部署的选项，包含以下字段：
<ul>
<li>filter - Object : 可选，按索引参数过滤事件，例如 {filter: {myNumber: [12,13]}} 表示所有“myNumber” 为12 或 13的事件</li>
<li>fromBlock - Number : 可选，仅读取从该编号开始的块中的历史事件。</li>
<li>toBlock - Number : 可选，仅读取截止到该编号的块中的历史事件，默认值为&quot;latest&quot;</li>
<li>topics - Array : 可选，用来手动设置事件过滤器的主题。如果设置了filter属性和事件签名，那么(topic[0])将不会自动设置</li>
</ul></li>
<li>callback - Function : 可选的回调参数，触发时其第一个参数为错误对象，第二个参数为历史事件数组</li>
</ul>
<p>返回值：</p>
<p>返回一个String类型的过滤器id</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">myContract.newFilter(eventName, {
   <span class="hljs-attr">filter</span>: eventFilter,
   <span class="hljs-attr">fromBlock</span>: fromBlockNum,
   <span class="hljs-attr">toBlock</span>: <span class="hljs-string">"latest"</span>
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, rpcId</span>)</span>{ 
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"rpcId:"</span>, rpcId); 
})

&gt; rpcId: <span class="hljs-number">0xa081d1f00117ade0e08769bb053ae7e</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="getfilterlogs---返回具有给定id的过滤器的日志"></a><a href="#getfilterlogs---返回具有给定id的过滤器的日志" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>getFilterLogs - 返回具有给定id的过滤器的日志</h4>
<p>返回具有给定id的过滤器的日志。如果找不到过滤器，将返回一个空的日志数组。</p>
<p>调用:</p>
<pre><code class="hljs">myContract.get<span class="hljs-constructor">FilterLogs(<span class="hljs-params">rpcId</span>[, <span class="hljs-params">callback</span>])</span>
</code></pre>
<p>参数：</p>
<ul>
<li>rpcId- String: 过滤器id，通过调newFilter接口返回</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为历史事件对象数组</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">contract.getFilterLogs(<span class="hljs-string">"0xa081d1f00117ade0e08769bb053ae7e"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, events</span>)</span>{ 
     <span class="hljs-built_in">console</span>.log(events); 
})

&gt; [
  {
    <span class="hljs-attr">address</span>: <span class="hljs-string">'lat1dw8t6q5jy6r3xqqkgc43nn403gpuzwx7penk3q'</span>,
    <span class="hljs-attr">topics</span>: [
      <span class="hljs-string">'0x0000000000000000000000000000000000000000007374727563744576656e74'</span>,
      <span class="hljs-string">'0x000000000000000000000000000000000000000000000000000000000000c180'</span>
    ],
    <span class="hljs-attr">data</span>: <span class="hljs-string">'0xc0'</span>,
    <span class="hljs-attr">blockNumber</span>: <span class="hljs-string">'0x16375a'</span>,
    <span class="hljs-attr">transactionHash</span>: <span class="hljs-string">'0x59d68e32b6566877fb024f3ab356d9c5d2947f6f7a89bc4b34432496c34193d5'</span>,
    <span class="hljs-attr">transactionIndex</span>: <span class="hljs-string">'0x0'</span>,
    <span class="hljs-attr">blockHash</span>: <span class="hljs-string">'0x2843f645de8147cce62e6d18bb287c4cf06bbb6a3f3f5ec97917a7a09e300eee'</span>,
    <span class="hljs-attr">logIndex</span>: <span class="hljs-string">'0x0'</span>,
    <span class="hljs-attr">removed</span>: <span class="hljs-literal">false</span>
  }
]
</code></pre>
<p>注：读取合约历史事件，可通过newFilter和getFilterLogs接口配合使用获取。</p>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonpersonal"></a><a href="#web3platonpersonal" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.personal</h4>
<p>使用web3-eth-personal包和以太坊节点账户进行交互。</p>
<p>注意，这个包中的许多函数包含敏感信息，例如密码，因此不要在未加密的
websocket或http服务提供器上调用这些函数，因为你的密码是明文发送的！</p>
<p>使用方法：</p>
<pre><code class="hljs">var Personal = require('web3.platon-personal');

<span class="hljs-comment">// 在以太坊兼容浏览器中，"Personal.providers.givenProvider"将自动被设置</span>
var personal = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Personal(Personal.<span class="hljs-params">givenProvider</span> <span class="hljs-operator">||</span> '<span class="hljs-params">ws</span>:<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">some</span>.<span class="hljs-params">local</span>-<span class="hljs-params">or</span>-<span class="hljs-params">remote</span>.<span class="hljs-params">node</span>:8546')</span>;


<span class="hljs-comment">// 也可以使用web3包</span>

var Web3 = require('web3');
var web3 = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Web3(Web3.<span class="hljs-params">givenProvider</span> <span class="hljs-operator">||</span> '<span class="hljs-params">ws</span>:<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">some</span>.<span class="hljs-params">local</span>-<span class="hljs-params">or</span>-<span class="hljs-params">remote</span>.<span class="hljs-params">node</span>:8546')</span>;

<span class="hljs-comment">// -&gt; web3.platon.personal</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonpersonalnewaccount"></a><a href="#web3platonpersonalnewaccount" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.personal.newAccount</h4>
<p>创建一个新账户。注意，不要在未加密的websocket或http提供器上调用该函数，
否则你的密码将泄漏！</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.personal</span><span class="hljs-selector-class">.newAccount</span>(<span class="hljs-selector-tag">password</span>, <span class="hljs-selector-attr">[callback]</span>)
</code></pre>
<p>参数：</p>
<p>password - String: 用来加密账户的密码</p>
<p>返回值：</p>
<p>一个Promise对象，其解析值为新创建的账户。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.personal.newAccount(<span class="hljs-string">'!@superpassword'</span>).then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-string">'lax1uqug0zq7rcxddndleq4ux2ft3tv6dqljphydrl'</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonpersonalsign"></a><a href="#web3platonpersonalsign" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.personal.sign</h4>
<p>使用指定账户对数据进行签名。</p>
<p>注意，在未加密的HTTP连接上发送账户密码极其不安全！</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.personal</span><span class="hljs-selector-class">.sign</span>(<span class="hljs-selector-tag">dataToSign</span>, <span class="hljs-selector-tag">address</span>, <span class="hljs-selector-tag">password</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>dataToSign</code>：String - 要签名的数据。会先使用web3.utils.utf8ToHex()将字符串转化为16进制</li>
<li><code>address</code>：String - 用来签名的账户地址</li>
<li><code>password</code>：String - 用来签名的账户密码</li>
<li><code>callback</code>：Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果签名</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为签名结果字符串。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.personal.sign(<span class="hljs-string">"Hello world"</span>, <span class="hljs-string">"lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2"</span>, <span class="hljs-string">"test password!"</span>)
.then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-string">"0x30755ed65396facf86c53e6217c52b4daebe72aa4941d89635409de4c9c7f9466d4e9aaec7977f05e923889b33c0d0dd27d7226b6e6f56ce737465c5cfd04be400"</span>

<span class="hljs-comment">// 下面代码实现同样功能</span>
web3.platon.personal.sign(web3.utils.utf8ToHex(<span class="hljs-string">"Hello world"</span>), <span class="hljs-string">"lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2"</span>, <span class="hljs-string">"test password!"</span>)
.then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-string">"0x30755ed65396facf86c53e6217c52b4daebe72aa4941d89635409de4c9c7f9466d4e9aaec7977f05e923889b33c0d0dd27d7226b6e6f56ce737465c5cfd04be400"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonpersonalecrecover"></a><a href="#web3platonpersonalecrecover" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.personal.ecRecover</h4>
<p>从签名的数据中提取进行签名的账户地址。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.personal</span><span class="hljs-selector-class">.ecRecover</span>(<span class="hljs-selector-tag">dataThatWasSigned</span>, <span class="hljs-selector-tag">signature</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>dataThatWasSigned</code>：String - 带有签名的数据，首先使用web3.utils.utf8ToHex()转化为16进制字符串</li>
<li><code>signature</code>：String - 签名</li>
<li>Function - 可选的回调函数，其第一个参数为错误对象，第二个参数为结果</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为账户地址字符串</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.personal.ecRecover(<span class="hljs-string">"Hello world"</span>, <span class="hljs-string">"0x30755ed65396facf86c53e6217c52b4daebe72aa4941d89635409de4c9c7f9466d4e9aaec7977f05e923889b33c0d0dd27d7226b6e6f56ce737465c5cfd04be400"</span>).then(<span class="hljs-built_in">console</span>.log);
&gt; <span class="hljs-string">"lax1z86dpg7p96rtfd0nnvsn7lse6pyzwmdwnyana2"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonpersonalsigntransaction"></a><a href="#web3platonpersonalsigntransaction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.personal.signTransaction</h4>
<p>对交易进行签名，账户必须先解锁。</p>
<p>注意：在未加密的HTTP连接上发送账户密码有巨大的风险！</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.personal</span><span class="hljs-selector-class">.signTransaction</span>(<span class="hljs-selector-tag">transaction</span>, <span class="hljs-selector-tag">password</span> <span class="hljs-selector-attr">[, callback]</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>transaction</code>：Object - The transaction data to sign web3.platon.sendTransaction() for more.</li>
<li><code>password</code>：String - The password of the from account, to sign the transaction with.</li>
<li><code>callback</code>：Function - (optional) Optional callback, returns an error object as first parameter and the result as second.</li>
</ul>
<p>返回值：</p>
<p>一个Promise对象，其解析值为RLP编码的交易对象，其raw属性可以使用web3.platon.sendSignedTransaction()发送交易。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.signTransaction({
    <span class="hljs-attr">from</span>: <span class="hljs-string">"lax1avq5lrytgxxmddzhwnpjdg8xf3ufznwqrjn60v"</span>,
    <span class="hljs-attr">gasPrice</span>: <span class="hljs-string">"20000000000"</span>,
    <span class="hljs-attr">gas</span>: <span class="hljs-string">"21000"</span>,
    <span class="hljs-attr">to</span>: <span class="hljs-string">'lax1x56n2df4x56n2df4x56n2df4x56n2df44dm33c'</span>,
    <span class="hljs-attr">value</span>: <span class="hljs-string">"1000000000000000000"</span>,
    <span class="hljs-attr">data</span>: <span class="hljs-string">""</span>
}, <span class="hljs-string">'MyPassword!'</span>).then(<span class="hljs-built_in">console</span>.log);
&gt; {
    <span class="hljs-attr">raw</span>: <span class="hljs-string">'0xf86c808504a817c800825208943535353535353535353535353535353535353535880de0b6b3a76400008025a04f4c17305743700648bc4f6cd3038ec6f6af0df73e31757007b7f59df7bee88da07e1941b264348e80c78c4027afc65a87b0a5e43e86742b8ca0823584c6788fd0'</span>,
    <span class="hljs-attr">tx</span>: {
        <span class="hljs-attr">nonce</span>: <span class="hljs-string">'0x0'</span>,
        <span class="hljs-attr">gasPrice</span>: <span class="hljs-string">'0x4a817c800'</span>,
        <span class="hljs-attr">gas</span>: <span class="hljs-string">'0x5208'</span>,
        <span class="hljs-attr">to</span>: <span class="hljs-string">'lax1x56n2df4x56n2df4x56n2df4x56n2df44dm33c'</span>,
        <span class="hljs-attr">value</span>: <span class="hljs-string">'0xde0b6b3a7640000'</span>,
        <span class="hljs-attr">input</span>: <span class="hljs-string">'0x'</span>,
        <span class="hljs-attr">v</span>: <span class="hljs-string">'0x25'</span>,
        <span class="hljs-attr">r</span>: <span class="hljs-string">'0x4f4c17305743700648bc4f6cd3038ec6f6af0df73e31757007b7f59df7bee88d'</span>,
        <span class="hljs-attr">s</span>: <span class="hljs-string">'0x7e1941b264348e80c78c4027afc65a87b0a5e43e86742b8ca0823584c6788fd0'</span>,
        <span class="hljs-attr">hash</span>: <span class="hljs-string">'0xda3be87732110de6c1354c83770aae630ede9ac308d9f7b399ecfba23d923384'</span>
    }
}
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonabi"></a><a href="#web3platonabi" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.abi</h4>
<p>web3.platon.abi系列函数用来将参数编码为ABI (Application Binary Interface)，或者从ABI解码回来。
以便在以太坊虚拟机EVM上执行函数函数调用。</p>
<p>函数列表：</p>
<ul>
<li>web3.platon.abi.encodeFunctionSignature</li>
<li>web3.platon.abi.encodeEventSignature</li>
<li>web3.platon.abi.encodeParameter</li>
<li>web3.platon.abi.encodeParameters</li>
<li>web3.platon.abi.encodeFunctionCall</li>
<li>web3.platon.abi.decodeParameter</li>
<li>web3.platon.abi.decodeParameters</li>
<li>web3.platon.abi.decodeLog</li>
</ul>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonabiencodefunctionsignature"></a><a href="#web3platonabiencodefunctionsignature" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.abi.encodeFunctionSignature</h4>
<p>将函数名编码为ABI签名，方法是取函数名及参数类型的sha3哈希值的头4个字节。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.abi</span><span class="hljs-selector-class">.encodeFunctionSignature</span>(<span class="hljs-selector-tag">functionName</span>);
</code></pre>
<p>参数：</p>
<p><code>functionName</code> - String|Object: 要编码的函数名字符串，或者函数的JSON接口对象。当
采用字符串时，必须采用<code>function(type,type,...)</code>的格式，例如: <code>myFunction(uint256,uint32[],bytes10,bytes)</code>。</p>
<p>返回值：</p>
<p><code>String</code> - 函数的ABI签名</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// 传入JSON接口对象</span>
web3.platon.abi.encodeFunctionSignature({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'myMethod'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'function'</span>,
    <span class="hljs-attr">inputs</span>: [{
        <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'myNumber'</span>
    },{
        <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'myString'</span>
    }]
})
&gt; <span class="hljs-number">0x24ee0097</span>

<span class="hljs-comment">// 传入字符串</span>
web3.platon.abi.encodeFunctionSignature(<span class="hljs-string">'myMethod(uint256,string)'</span>)
&gt; <span class="hljs-string">'0x24ee0097'</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonabiencodeeventsignature"></a><a href="#web3platonabiencodeeventsignature" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.abi.encodeEventSignature</h4>
<p>将事件名编码为ABI签名，方法是取事件名及其参数类型的sha3哈希值。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.abi</span><span class="hljs-selector-class">.encodeEventSignature</span>(<span class="hljs-selector-tag">eventName</span>);
</code></pre>
<p>参数：</p>
<p><code>eventName</code> - String|Object: 要编码的事件名字符串，或者事件的JSON接口对象。如果采用
字符串参数，则需要符合格式<code>event(type,type,...)</code> ，例如<code>myEvent(uint256,uint32[],bytes10,bytes)</code>。</p>
<p>返回值：</p>
<p><code>String</code> - 事件的ABI签名</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// 使用字符串参数</span>
web3.platon.abi.encodeEventSignature(<span class="hljs-string">'myEvent(uint256,bytes32)'</span>)
&gt; <span class="hljs-number">0xf2eeb729e636a8cb783be044acf6b7b1e2c5863735b60d6daae84c366ee87d97</span>

<span class="hljs-comment">// 使用json接口对象</span>
web3.platon.abi.encodeEventSignature({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'myEvent'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'event'</span>,
    <span class="hljs-attr">inputs</span>: [{
        <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'myNumber'</span>
    },{
        <span class="hljs-attr">type</span>: <span class="hljs-string">'bytes32'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'myBytes'</span>
    }]
})
&gt; <span class="hljs-number">0xf2eeb729e636a8cb783be044acf6b7b1e2c5863735b60d6daae84c366ee87d97</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonabiencodefunctioncall"></a><a href="#web3platonabiencodefunctioncall" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.abi.encodeFunctionCall</h4>
<p>将函数调用根据其JSON接口对象和给定的参数进行ABI编码。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.abi</span><span class="hljs-selector-class">.encodeFunctionCall</span>(<span class="hljs-selector-tag">jsonInterface</span>, <span class="hljs-selector-tag">parameters</span>);
</code></pre>
<p>参数：</p>
<ul>
<li><code>jsonInterface</code> - Object: 函数的JSON接口对象</li>
<li><code>parameters</code> - Array: 参数值数组</li>
</ul>
<p>返回值：</p>
<ul>
<li><code>String</code> - ABI编码结果，包含函数签名和参数</li>
</ul>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.abi.encodeFunctionCall({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'myMethod'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'function'</span>,
    <span class="hljs-attr">inputs</span>: [{
        <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'myNumber'</span>
    },{
        <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'myString'</span>
    }]
}, [<span class="hljs-string">'2345675643'</span>, <span class="hljs-string">'Hello!%'</span>]);
&gt; <span class="hljs-string">"0x24ee0097000000000000000000000000000000000000000000000000000000008bd02b7b0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000748656c6c6f212500000000000000000000000000000000000000000000000000"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonabidecodeparameter"></a><a href="#web3platonabidecodeparameter" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.abi.decodeParameter</h4>
<p>将ABI编码过的参数解码为其JavaScript形式。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.abi</span><span class="hljs-selector-class">.decodeParameter</span>(<span class="hljs-selector-tag">type</span>, <span class="hljs-selector-tag">hexString</span>);
</code></pre>
<p>参数：</p>
<ul>
<li><code>type</code> - String: 参数类型</li>
<li><code>hexString</code> - String: 要解码的ABI字节码</li>
</ul>
<p>返回值：</p>
<p>Mixed - 解码结果</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.abi.decodeParameter(<span class="hljs-string">'uint256'</span>, <span class="hljs-string">'0x0000000000000000000000000000000000000000000000000000000000000010'</span>);
&gt; <span class="hljs-string">"16"</span>

web3.platon.abi.decodeParameter(<span class="hljs-string">'string'</span>, <span class="hljs-string">'0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000848656c6c6f212521000000000000000000000000000000000000000000000000'</span>);
&gt; <span class="hljs-string">"Hello!%!"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonabidecodeparameters"></a><a href="#web3platonabidecodeparameters" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.abi.decodeParameters</h4>
<p>将ABI编码的参数解码为其JavaScript形式。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.platon</span><span class="hljs-selector-class">.abi</span><span class="hljs-selector-class">.decodeParameters</span>(<span class="hljs-selector-tag">typesArray</span>, <span class="hljs-selector-tag">hexString</span>);
</code></pre>
<p>参数：</p>
<ul>
<li>typesArray - Array|Object: 参数类型数组，或JSON接口输出数组</li>
<li>hexString - String: 要解码的ABI字节码</li>
</ul>
<p>返回值：</p>
<p>Object - 包含解码后参数值的对象</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.abi.decodeParameters([<span class="hljs-string">'string'</span>, <span class="hljs-string">'uint256'</span>], <span class="hljs-string">'0x000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000ea000000000000000000000000000000000000000000000000000000000000000848656c6c6f212521000000000000000000000000000000000000000000000000'</span>);
&gt; Result { <span class="hljs-string">'0'</span>: <span class="hljs-string">'Hello!%!'</span>, <span class="hljs-string">'1'</span>: <span class="hljs-string">'234'</span> }

web3.platon.abi.decodeParameters([{
    <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'myString'</span>
},{
    <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'myNumber'</span>
}], <span class="hljs-string">'0x000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000ea000000000000000000000000000000000000000000000000000000000000000848656c6c6f212521000000000000000000000000000000000000000000000000'</span>);
&gt; Result {
    <span class="hljs-string">'0'</span>: <span class="hljs-string">'Hello!%!'</span>,
    <span class="hljs-string">'1'</span>: <span class="hljs-string">'234'</span>,
    <span class="hljs-attr">myString</span>: <span class="hljs-string">'Hello!%!'</span>,
    <span class="hljs-attr">myNumber</span>: <span class="hljs-string">'234'</span>
}
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3platonabidecodelog"></a><a href="#web3platonabidecodelog" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.platon.abi.decodeLog</h4>
<p>对ABI编码后的日志数据和索引的主题数据进行解码。</p>
<p>调用：</p>
<pre><code class="hljs">web3.platon.abi.decode<span class="hljs-constructor">Log(<span class="hljs-params">inputs</span>, <span class="hljs-params">hexString</span>, <span class="hljs-params">topics</span>)</span>;
</code></pre>
<p>参数：</p>
<ul>
<li>inputs - Object: A JSON interface inputs array. See the solidity documentation for a list of types.</li>
<li>hexString - String: The ABI byte code in the data field of a log.</li>
<li>topics - Array: An array with the index parameter topics of the log, without the topic[0] if its a non-anonymous event, otherwise with topic[0].</li>
</ul>
<p>返回值：</p>
<p><code>Object</code> - 包含解码后参数的对象</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.platon.abi.decodeLog([{
    <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'myString'</span>
},{
    <span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'myNumber'</span>,
    <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>
},{
    <span class="hljs-attr">type</span>: <span class="hljs-string">'uint8'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'mySmallNumber'</span>,
    <span class="hljs-attr">indexed</span>: <span class="hljs-literal">true</span>
}],
<span class="hljs-string">'0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000748656c6c6f252100000000000000000000000000000000000000000000000000'</span>,
[<span class="hljs-string">'0x000000000000000000000000000000000000000000000000000000000000f310'</span>, <span class="hljs-string">'0x0000000000000000000000000000000000000000000000000000000000000010'</span>]);
&gt; Result {
    <span class="hljs-string">'0'</span>: <span class="hljs-string">'Hello%!'</span>,
    <span class="hljs-string">'1'</span>: <span class="hljs-string">'62224'</span>,
    <span class="hljs-string">'2'</span>: <span class="hljs-string">'16'</span>,
    <span class="hljs-attr">myString</span>: <span class="hljs-string">'Hello%!'</span>,
    <span class="hljs-attr">myNumber</span>: <span class="hljs-string">'62224'</span>,
    <span class="hljs-attr">mySmallNumber</span>: <span class="hljs-string">'16'</span>
}
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utils"></a><a href="#web3utils" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils</h4>
<p><code>web3.utils</code>属性包含一组辅助函数集。</p>
<p>调用方法：</p>
<pre><code class="hljs css language-js">Web3.utils
web3.utils
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsrandomhex"></a><a href="#web3utilsrandomhex" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.randomHex</h4>
<p>生成指定长度的密码学强伪随机16进制字符串。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.randomHex</span>(<span class="hljs-selector-tag">size</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>size</code> - Number: 生成长度，例如32表示要生成32字节长的16进制字符串，即64个字符以及前缀“0x”</li>
</ul>
<p>返回值：</p>
<p><code>String</code>: 生成的随机16进制字符串</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.randomHex(<span class="hljs-number">32</span>)
&gt; <span class="hljs-string">"0xa5b9d60f32436310afebcfda832817a68921beb782fabf7915cc0460b443116a"</span>

web3.utils.randomHex(<span class="hljs-number">4</span>)
&gt; <span class="hljs-string">"0x6892ffc6"</span>

web3.utils.randomHex(<span class="hljs-number">2</span>)
&gt; <span class="hljs-string">"0x99d6"</span>

web3.utils.randomHex(<span class="hljs-number">1</span>)
&gt; <span class="hljs-string">"0x9a"</span>

web3.utils.randomHex(<span class="hljs-number">0</span>)
&gt; <span class="hljs-string">"0x"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utils_"></a><a href="#web3utils_" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils._</h4>
<p><code>web3.utils._</code>提供了访问underscore库的接口。<code>underscore</code>是一个
非常流行的javascript工具库，提供了很多方便的js函数。</p>
<p>请参考underscore的API文档查询更多细节信息。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">._</span>
</code></pre>
<p>示例代码：</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">var</span> _ = web3.utils._;

_.union([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">3</span>]);
&gt; [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]

_.each({<span class="hljs-attr">my</span>: <span class="hljs-string">'object'</span>}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, key</span>)</span>{ ... })
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsbn"></a><a href="#web3utilsbn" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.BN</h4>
<p><code>web3.utils.BN</code>提供了BN.js库的访问接口。<code>BN.js</code>库用来处理大数的计算。
请参考BN.js的文档获取更详细的信息。</p>
<p>注意，为了安全地进行类型转换，请使用utils.toBN。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.BN</span>(<span class="hljs-selector-tag">mixed</span>)
</code></pre>
<p>参数：</p>
<ul>
<li><code>mixed</code> - String|Number: 数值字符串或16进制字符串</li>
</ul>
<p>返回值：</p>
<p>Object: BN.js实例对象</p>
<p>实例：</p>
<pre><code class="hljs">var BN = web3.utils.BN;

<span class="hljs-keyword">new</span> <span class="hljs-constructor">BN(1234)</span>.<span class="hljs-keyword">to</span><span class="hljs-constructor">String()</span>;
&gt; <span class="hljs-string">"1234"</span>

<span class="hljs-keyword">new</span> <span class="hljs-constructor">BN('1234')</span>.add(<span class="hljs-keyword">new</span> <span class="hljs-constructor">BN('1')</span>).<span class="hljs-keyword">to</span><span class="hljs-constructor">String()</span>;
&gt; <span class="hljs-string">"1235"</span>

<span class="hljs-keyword">new</span> <span class="hljs-constructor">BN('0xea')</span>.<span class="hljs-keyword">to</span><span class="hljs-constructor">String()</span>;
&gt; <span class="hljs-string">"234"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsisbn"></a><a href="#web3utilsisbn" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.isBN</h4>
<p><code>web3.utils.isBN()</code>方法用来检查给定的参数是否是一个BN.js实例对象。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.isBN</span>(<span class="hljs-selector-tag">bn</span>)
</code></pre>
<p>参数：</p>
<p><code>bn</code> - Object: 要检查的对象</p>
<p>返回值</p>
<p><code>Boolean</code>：如果参数为BN对象则返回true，否则返回false</p>
<p>实例代码：</p>
<pre><code class="hljs">var number = <span class="hljs-keyword">new</span> <span class="hljs-constructor">BN(10)</span>;

web3.utils.is<span class="hljs-constructor">BN(<span class="hljs-params">number</span>)</span>;
&gt; <span class="hljs-literal">true</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsisbignumber"></a><a href="#web3utilsisbignumber" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.isBigNumber</h4>
<p>使用<code>web3.utils.isBigNumber()</code>方法检查给定的参数是否是一个
BigNumber.js对象表示的大数。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.isBigNumber</span>(<span class="hljs-selector-tag">bignumber</span>)
</code></pre>
<p>参数：</p>
<p><code>bignumber</code> - Object: 要检查的对象</p>
<p>返回值：</p>
<p><code>Boolean</code>：如果参数是BigNumber.js对象则返回true，否则返回false</p>
<p>实例代码：</p>
<pre><code class="hljs">var number = <span class="hljs-keyword">new</span> <span class="hljs-constructor">BigNumber(10)</span>;

web3.utils.is<span class="hljs-constructor">BigNumber(<span class="hljs-params">number</span>)</span>;
&gt; <span class="hljs-literal">true</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilssha3"></a><a href="#web3utilssha3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.sha3</h4>
<p>使用<code>web3.utils.sha3()</code>方法计算给定字符串的sha3哈希值。</p>
<p>注意，如果要模拟solidity中的sha3，请使用soliditySha3函数。</p>
<p>调用：</p>
<pre><code class="hljs">web3.utils.sha3(<span class="hljs-built_in">string</span>)
web3.utils.keccak256(<span class="hljs-built_in">string</span>) <span class="hljs-comment">// ALIAS</span>
</code></pre>
<p>参数：</p>
<p><code>string</code> - String: 要计算sha3哈希值的字符串</p>
<p>返回值：</p>
<p><code>String</code>: 计算结果哈希值</p>
<p>实例代码：</p>
<pre><code class="hljs">web3.utils.sha3(<span class="hljs-string">'234'</span>); <span class="hljs-comment">// 字符串参数</span>
&gt; <span class="hljs-string">"0xc1912fee45d61c87cc5ea59dae311904cd86b84fee17cc96966216f811ce6a79"</span>

web3.utils.sha3(<span class="hljs-keyword">new</span> <span class="hljs-type">BN</span>(<span class="hljs-string">'234'</span>)); <span class="hljs-comment">// BN对象参数</span>
&gt; <span class="hljs-string">"0xbc36789e7a1e281436464229828f817d6612f7b477d66591ff96a9e064bcc98a"</span>

web3.utils.sha3(<span class="hljs-number">234</span>); 
&gt; <span class="hljs-literal">null</span> <span class="hljs-comment">// 不能计算数值类型的哈希值</span>

web3.utils.sha3(<span class="hljs-number">0xea</span>); <span class="hljs-comment">// 同上，也不能计算16进制表示的数值</span>
&gt; <span class="hljs-literal">null</span>

web3.utils.sha3(<span class="hljs-string">'0xea'</span>); <span class="hljs-comment">// 首先转化为字节数组，然后再计算哈希值</span>
&gt; <span class="hljs-string">"0x2f20677459120677484f7104c76deb6846a2c071f9b3152c103bb12cd54d1a4a"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilssoliditysha3"></a><a href="#web3utilssoliditysha3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.soliditySha3</h4>
<p>采用和solidity同样的方式计算给定参数的sha3哈希值，也就是说，
在计算哈希之前，需要首先对参数进行ABI编码，并进行字节紧凑化处理。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.soliditySha3</span>(<span class="hljs-selector-tag">param1</span> <span class="hljs-selector-attr">[, param2, ...]</span>)
</code></pre>
<p>参数：</p>
<p><code>paramX</code> - Mixed: 任意类型，或是一个具有如下结构的对象：{type: 'uint', value: '123456'} 或 {t: 'bytes', v: '0xfff456'}。
可以自动识别基本数据类型并解析为对应的solidity类型：</p>
<ul>
<li>String 非数值的UTF-8字符串将解释为string</li>
<li>String|Number|BN|HEX 正数将解释为uint256</li>
<li>String|Number|BN 负数将解释为int256</li>
<li>Boolean 解释为bool.</li>
<li>String HEX 具有前缀0x的字符串将解释为bytes</li>
<li>HEX 16进制表示的数值将解释为uint256.</li>
</ul>
<p>返回值：</p>
<p><code>String</code>: 结果哈希值</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.soliditySha3(<span class="hljs-string">'234564535'</span>, <span class="hljs-string">'0xfff23243'</span>, <span class="hljs-literal">true</span>, <span class="hljs-number">-10</span>);
<span class="hljs-comment">// 自动检测:        uint256,      bytes,     bool,   int256</span>
&gt; <span class="hljs-string">"0x3e27a893dc40ef8a7f0841d96639de2f58a132be5ae466d40087a2cfa83b7179"</span>


web3.utils.soliditySha3(<span class="hljs-string">'Hello!%'</span>); <span class="hljs-comment">// 自动检测: string</span>
&gt; <span class="hljs-string">"0x661136a4267dba9ccdf6bfddb7c00e714de936674c4bdb065a531cf1cb15c7fc"</span>


web3.utils.soliditySha3(<span class="hljs-string">'234'</span>); <span class="hljs-comment">// 自动检测: uint256</span>
&gt; <span class="hljs-string">"0x61c831beab28d67d1bb40b5ae1a11e2757fa842f031a2d0bc94a7867bc5d26c2"</span>

web3.utils.soliditySha3(<span class="hljs-number">0xea</span>); <span class="hljs-comment">// 同上</span>
&gt; <span class="hljs-string">"0x61c831beab28d67d1bb40b5ae1a11e2757fa842f031a2d0bc94a7867bc5d26c2"</span>

web3.utils.soliditySha3(<span class="hljs-keyword">new</span> BN(<span class="hljs-string">'234'</span>)); <span class="hljs-comment">// 同上</span>
&gt; <span class="hljs-string">"0x61c831beab28d67d1bb40b5ae1a11e2757fa842f031a2d0bc94a7867bc5d26c2"</span>

web3.utils.soliditySha3({<span class="hljs-attr">type</span>: <span class="hljs-string">'uint256'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'234'</span>})); <span class="hljs-comment">// 同上</span>
&gt; <span class="hljs-string">"0x61c831beab28d67d1bb40b5ae1a11e2757fa842f031a2d0bc94a7867bc5d26c2"</span>

web3.utils.soliditySha3({<span class="hljs-attr">t</span>: <span class="hljs-string">'uint'</span>, <span class="hljs-attr">v</span>: <span class="hljs-keyword">new</span> BN(<span class="hljs-string">'234'</span>)})); <span class="hljs-comment">// 同上</span>
&gt; <span class="hljs-string">"0x61c831beab28d67d1bb40b5ae1a11e2757fa842f031a2d0bc94a7867bc5d26c2"</span>


web3.utils.soliditySha3(<span class="hljs-string">'0x407D73d8a49eeb85D32Cf465507dd71d507100c1'</span>);
&gt; <span class="hljs-string">"0x4e8ebbefa452077428f93c9520d3edd60594ff452a29ac7d2ccc11d47f3ab95b"</span>

web3.utils.soliditySha3({<span class="hljs-attr">t</span>: <span class="hljs-string">'bytes'</span>, <span class="hljs-attr">v</span>: <span class="hljs-string">'0x407D73d8a49eeb85D32Cf465507dd71d507100c1'</span>});
&gt; <span class="hljs-string">"0x4e8ebbefa452077428f93c9520d3edd60594ff452a29ac7d2ccc11d47f3ab95b"</span> <span class="hljs-comment">// 结果同上</span>


web3.utils.soliditySha3({<span class="hljs-attr">t</span>: <span class="hljs-string">'address'</span>, <span class="hljs-attr">v</span>: <span class="hljs-string">'0x407D73d8a49eeb85D32Cf465507dd71d507100c1'</span>});
&gt; <span class="hljs-string">"0x4e8ebbefa452077428f93c9520d3edd60594ff452a29ac7d2ccc11d47f3ab95b"</span> <span class="hljs-comment">// 同上，但首先会检查校验和</span>


web3.utils.soliditySha3({<span class="hljs-attr">t</span>: <span class="hljs-string">'bytes32'</span>, <span class="hljs-attr">v</span>: <span class="hljs-string">'0x407D73d8a49eeb85D32Cf465507dd71d507100c1'</span>});
&gt; <span class="hljs-string">"0x3c69a194aaf415ba5d6afca734660d0a3d45acdc05d54cd1ca89a8988e7625b4"</span> <span class="hljs-comment">// 不同的类型得到不同的哈希值</span>


web3.utils.soliditySha3({<span class="hljs-attr">t</span>: <span class="hljs-string">'string'</span>, <span class="hljs-attr">v</span>: <span class="hljs-string">'Hello!%'</span>}, {<span class="hljs-attr">t</span>: <span class="hljs-string">'int8'</span>, <span class="hljs-attr">v</span>:<span class="hljs-number">-23</span>}, {<span class="hljs-attr">t</span>: <span class="hljs-string">'address'</span>, <span class="hljs-attr">v</span>: <span class="hljs-string">'0x85F43D8a49eeB85d32Cf465507DD71d507100C1d'</span>});
&gt; <span class="hljs-string">"0xa13b31627c1ed7aaded5aecec71baf02fe123797fffd45e662eac8e06fbe4955"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsishex"></a><a href="#web3utilsishex" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.isHex</h4>
<p>检查指定的参数字符串是否是16进制字符串。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.isHex</span>(<span class="hljs-selector-tag">hex</span>)
</code></pre>
<p>参数：</p>
<p><code>hex</code> - String|HEX: 要检查的字符串</p>
<p>返回值：</p>
<p><code>Boolean</code>：如果参数为16进制字符串则返回true，否则返回false</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.isHex(<span class="hljs-string">'0xc1912'</span>);
&gt; <span class="hljs-literal">true</span>

web3.utils.isHex(<span class="hljs-number">0xc1912</span>);
&gt; <span class="hljs-literal">true</span>

web3.utils.isHex(<span class="hljs-string">'c1912'</span>);
&gt; <span class="hljs-literal">true</span>

web3.utils.isHex(<span class="hljs-number">345</span>);
&gt; <span class="hljs-literal">true</span> <span class="hljs-comment">// 345即可以是16进制表示，也可以是10进制表示，因此在没有前缀0x的情况下要小心！</span>

web3.utils.isHex(<span class="hljs-string">'0xZ1912'</span>);
&gt; <span class="hljs-literal">false</span>

web3.utils.isHex(<span class="hljs-string">'Hello'</span>);
&gt; <span class="hljs-literal">false</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsishexstrict"></a><a href="#web3utilsishexstrict" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.isHexStrict</h4>
<p>检查给定的字符串是否为16进制字符串。和<code>web3.utils.isHex()</code>的区别在于，<code>web3.utils.isHexStrict()</code>
方法要求合法的16进制字符串必须具有0x前缀。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.isHexStrict</span>(<span class="hljs-selector-tag">hex</span>)
</code></pre>
<p>参数：</p>
<p><code>hex</code> - String|HEX: 要检查的字符串</p>
<p>返回值：</p>
<p><code>Boolean</code>：参数为16进制字符串则返回true，否则返回false</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.isHexStrict(<span class="hljs-string">'0xc1912'</span>);
&gt; <span class="hljs-literal">true</span>

web3.utils.isHexStrict(<span class="hljs-number">0xc1912</span>);
&gt; <span class="hljs-literal">false</span>

web3.utils.isHexStrict(<span class="hljs-string">'c1912'</span>);
&gt; <span class="hljs-literal">false</span>

web3.utils.isHexStrict(<span class="hljs-number">345</span>);
&gt; <span class="hljs-literal">false</span> 

web3.utils.isHexStrict(<span class="hljs-string">'0xZ1912'</span>);
&gt; <span class="hljs-literal">false</span>

web3.utils.isHex(<span class="hljs-string">'Hello'</span>);
&gt; <span class="hljs-literal">false</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsisaddress"></a><a href="#web3utilsisaddress" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.isAddress</h4>
<p>检查指定的字符串是否是有效的以太坊地址。如果地址同时使用了大小写字符，
<code>web3.utils.isAddress()</code>方法也会检查校验和。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.isAddress</span>(<span class="hljs-selector-tag">address</span>)
</code></pre>
<p>参数：</p>
<p><code>address</code> - String: 要检查的地址字符串</p>
<p>返回值：</p>
<p><code>Boolean</code>：有效地址则返回true，否则返回false</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.isAddress(<span class="hljs-string">'0xc1912fee45d61c87cc5ea59dae31190fffff232d'</span>);
&gt; <span class="hljs-literal">true</span>

web3.utils.isAddress(<span class="hljs-string">'c1912fee45d61c87cc5ea59dae31190fffff232d'</span>);
&gt; <span class="hljs-literal">true</span>

web3.utils.isAddress(<span class="hljs-string">'0XC1912FEE45D61C87CC5EA59DAE31190FFFFF232D'</span>);
&gt; <span class="hljs-literal">true</span> <span class="hljs-comment">// 由于都是大写字母，因此不检查校验和</span>

web3.utils.isAddress(<span class="hljs-string">'0xc1912fEE45d61C87Cc5EA59DaE31190FFFFf232d'</span>);
&gt; <span class="hljs-literal">true</span>

web3.utils.isAddress(<span class="hljs-string">'0xC1912fEE45d61C87Cc5EA59DaE31190FFFFf232d'</span>);
&gt; <span class="hljs-literal">false</span> <span class="hljs-comment">// 对于大小写混合的字符串，同时也检查校验和</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsisbech32address"></a><a href="#web3utilsisbech32address" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.isBech32Address</h4>
<p>检查指定的字符串是否是有效的bech32格式地址。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.isBech32Address</span>(<span class="hljs-selector-tag">bech32Address</span>)
</code></pre>
<p>参数：</p>
<p><code>bech32Address</code> - String: 要检查的bech32格式地址字符串；lax表示测试网地址，lat表示主网地址。</p>
<p>返回值：</p>
<p><code>Boolean</code>：有效地址则返回true，否则返回false</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.isBech32Address(<span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>);
&gt; <span class="hljs-literal">true</span>

web3.utils.isBech32Address(<span class="hljs-string">'lat1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>);
&gt; <span class="hljs-literal">false</span>

web3.utils.isBech32Address(<span class="hljs-string">'lat1zg69v7yszg69v7yszg69v7yszg69v7y30mluqx'</span>);
&gt; <span class="hljs-literal">true</span>

web3.utils.isBech32Address(<span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y30mluqx'</span>);
&gt; <span class="hljs-literal">false</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilstobech32address"></a><a href="#web3utilstobech32address" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.toBech32Address</h4>
<p>将有效的以太坊地址转成指定网络的bech32格式地址。</p>
<p>调用：</p>
<pre><code class="hljs">web3.utils.<span class="hljs-keyword">to</span><span class="hljs-constructor">Bech32Address(<span class="hljs-params">hrp</span>, <span class="hljs-params">address</span>)</span>
</code></pre>
<p>参数：</p>
<p><code>hrp</code> - String:  指定网络参数，lax表示测试网地址，lat表示主网地址。</p>
<p><code>address</code> - String: 以太坊地址字符串。</p>
<p>返回值：</p>
<p><code>String</code>：返回bech32地址</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.toBech32Address(<span class="hljs-string">'lax'</span>, <span class="hljs-string">'0x1234567890123456789012345678901234567891'</span>);
&gt; <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>

web3.utils.toBech32Address(<span class="hljs-string">'lat'</span>, <span class="hljs-string">'0x1234567890123456789012345678901234567891'</span>);
&gt; <span class="hljs-string">'lat1zg69v7yszg69v7yszg69v7yszg69v7y30mluqx'</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsdecodebech32address"></a><a href="#web3utilsdecodebech32address" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.decodeBech32Address</h4>
<p>将指定网络的的bech32格式地址解析成有效的以太坊地址。</p>
<p>调用：</p>
<pre><code class="hljs">web3.utils.decode<span class="hljs-constructor">Bech32Address(<span class="hljs-params">hrp</span>, <span class="hljs-params">bech32Address</span>)</span>
</code></pre>
<p>参数：</p>
<p><code>hrp</code> - String:  指定网络参数，lax表示测试网地址，lat表示主网地址。</p>
<p><code>bech32Address</code> - String:  bech32格式地址。</p>
<p>返回值：</p>
<p><code>String</code>：解析正确返回有效的以太坊地址，否则返回为空。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.decodeBech32Address(<span class="hljs-string">'lax'</span>, <span class="hljs-string">'lax1zg69v7yszg69v7yszg69v7yszg69v7y3q7dnwf'</span>);
&gt; <span class="hljs-string">'0x1234567890123456789012345678901234567891'</span>

web3.utils.decodeBech32Address(<span class="hljs-string">'lat'</span>, <span class="hljs-string">'lat1zg69v7yszg69v7yszg69v7yszg69v7y30mluqx'</span>);
&gt; <span class="hljs-string">'0x1234567890123456789012345678901234567891'</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilstochecksumaddress"></a><a href="#web3utilstochecksumaddress" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.toChecksumAddress</h4>
<p>将给定的大写或小写以太坊地址转换为校验和地址。</p>
<p>调用：</p>
<pre><code class="hljs">web3.utils.<span class="hljs-keyword">to</span><span class="hljs-constructor">ChecksumAddress(<span class="hljs-params">address</span>)</span>
</code></pre>
<p>参数：</p>
<p><code>address</code> - String: 地址字符串</p>
<p>返回值：</p>
<p><code>String</code>: The checksum address.</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.toChecksumAddress(<span class="hljs-string">'0xc1912fee45d61c87cc5ea59dae31190fffff2323'</span>);
&gt; <span class="hljs-string">"0xc1912fEE45d61C87Cc5EA59DaE31190FFFFf232d"</span>

web3.utils.toChecksumAddress(<span class="hljs-string">'0XC1912FEE45D61C87CC5EA59DAE31190FFFFF232D'</span>);
&gt; <span class="hljs-string">"0xc1912fEE45d61C87Cc5EA59DaE31190FFFFf232d"</span> <span class="hljs-comment">// 同上</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilscheckaddresschecksum"></a><a href="#web3utilscheckaddresschecksum" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.checkAddressChecksum</h4>
<p>检查指定地址的校验和，对于非检验和地址将返回false。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.checkAddressChecksum</span>(<span class="hljs-selector-tag">address</span>)
</code></pre>
<p>参数：</p>
<p><code>address</code> - String: 地址字符串</p>
<p>返回值：</p>
<p><code>Boolean</code>: 如果地址的校验和有效则返回true，如果不是一个校验和地址、或者校验和无效，则返回false。</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.checkAddressChecksum(<span class="hljs-string">'0xc1912fEE45d61C87Cc5EA59DaE31190FFFFf232d'</span>);
&gt; <span class="hljs-literal">true</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilstohex"></a><a href="#web3utilstohex" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.toHex</h4>
<p>将任意给定值转换为16进制字符串。数值字符串将解释为数值，文本字符串将解释为utf-8字符串。</p>
<p>调用：</p>
<pre><code class="hljs">web3.utils.<span class="hljs-keyword">to</span><span class="hljs-constructor">Hex(<span class="hljs-params">mixed</span>)</span>
</code></pre>
<p>参数：</p>
<p><code>mixed</code> - String|Number|BN|BigNumber: 要进行转换的输入</p>
<p>返回值：</p>
<p>String: 结果16进制字符串</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.toHex(<span class="hljs-string">'234'</span>);
&gt; <span class="hljs-string">"0xea"</span>

web3.utils.toHex(<span class="hljs-number">234</span>);
&gt; <span class="hljs-string">"0xea"</span>

web3.utils.toHex(<span class="hljs-keyword">new</span> BN(<span class="hljs-string">'234'</span>));
&gt; <span class="hljs-string">"0xea"</span>

web3.utils.toHex(<span class="hljs-keyword">new</span> BigNumber(<span class="hljs-string">'234'</span>));
&gt; <span class="hljs-string">"0xea"</span>

web3.utils.toHex(<span class="hljs-string">'I have 100€'</span>);
&gt; <span class="hljs-string">"0x49206861766520313030e282ac"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilshextonumberstring"></a><a href="#web3utilshextonumberstring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.hexToNumberString</h4>
<p>将给定的16进制字符串转化为数值字符串。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.hexToNumberString</span>(<span class="hljs-selector-tag">hex</span>)
</code></pre>
<p>参数：</p>
<p><code>hexString</code> - String|HEX: 16进制字符串</p>
<p>返回值：</p>
<p><code>String</code>: 数值字符串</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.hexToNumberString(<span class="hljs-string">'0xea'</span>);
&gt; <span class="hljs-string">"234"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilshextonumber"></a><a href="#web3utilshextonumber" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.hexToNumber</h4>
<p>返回给定16进制字符串的数值表示。</p>
<p>注意，该函数对大数无效，使用<code>utils.toBN</code>来处理大数。</p>
<p>调用：</p>
<pre><code class="hljs">web3.utils.hex<span class="hljs-constructor">ToNumber(<span class="hljs-params">hex</span>)</span>
web3.utils.<span class="hljs-keyword">to</span><span class="hljs-constructor">Decimal(<span class="hljs-params">hex</span>)</span> <span class="hljs-comment">// ALIAS, deprecated</span>
</code></pre>
<p>参数：</p>
<p><code>hexString</code> - String|HEX: 16进制字符串</p>
<p>返回值：</p>
<p><code>Number</code>：10进制数值</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.hexToNumber(<span class="hljs-string">'0xea'</span>);
&gt; <span class="hljs-number">234</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsnumbertohex"></a><a href="#web3utilsnumbertohex" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.numberToHex</h4>
<p>返回指定数值的16进制表示。</p>
<p>调用：</p>
<pre><code class="hljs">web3.utils.number<span class="hljs-constructor">ToHex(<span class="hljs-params">number</span>)</span>
web3.utils.from<span class="hljs-constructor">Decimal(<span class="hljs-params">number</span>)</span> <span class="hljs-comment">// 别名，已弃用</span>
</code></pre>
<p>参数：</p>
<p><code>number</code> - String|Number|BN|BigNumber: 数值</p>
<p>返回值：</p>
<p><code>String</code>: 给定数值的16进制字符串表示</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.numberToHex(<span class="hljs-string">'234'</span>);
&gt; <span class="hljs-string">'0xea'</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilshextoutf8"></a><a href="#web3utilshextoutf8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.hexToUtf8</h4>
<p>返回指定16进制值的UTF-8字符串表示。</p>
<p>调用：</p>
<pre><code class="hljs">web3.utils.hex<span class="hljs-constructor">ToUtf8(<span class="hljs-params">hex</span>)</span>
web3.utils.hex<span class="hljs-constructor">ToString(<span class="hljs-params">hex</span>)</span> <span class="hljs-comment">// 别名</span>
web3.utils.<span class="hljs-keyword">to</span><span class="hljs-constructor">Utf8(<span class="hljs-params">hex</span>)</span> <span class="hljs-comment">// 别名，已弃用</span>
</code></pre>
<p>参数：</p>
<p><code>hex</code> - String: 16进制字符串</p>
<p>返回值：</p>
<p><code>String</code>: UTF-8字符串</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.hexToUtf8(<span class="hljs-string">'0x49206861766520313030e282ac'</span>);
&gt; <span class="hljs-string">"I have 100€"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilshextoascii"></a><a href="#web3utilshextoascii" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.hexToAscii</h4>
<p>返回指定16进制值的ASCII字符串表示。</p>
<p>调用：</p>
<pre><code class="hljs">web3.utils.hex<span class="hljs-constructor">ToAscii(<span class="hljs-params">hex</span>)</span>
web3.utils.<span class="hljs-keyword">to</span><span class="hljs-constructor">Ascii(<span class="hljs-params">hex</span>)</span> <span class="hljs-comment">// 别名，已弃用</span>
</code></pre>
<p>参数：</p>
<p><code>hex</code> - String: 16进制字符串</p>
<p>返回值：</p>
<p>String: ASCII字符串</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.hexToAscii(<span class="hljs-string">'0x4920686176652031303021'</span>);
&gt; <span class="hljs-string">"I have 100!"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsutf8tohex"></a><a href="#web3utilsutf8tohex" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.utf8ToHex</h4>
<p>返回指定UTF-8字符串的16进制表示。</p>
<p>调用：</p>
<pre><code class="hljs">web3.utils.utf8<span class="hljs-constructor">ToHex(<span class="hljs-params">string</span>)</span>
web3.utils.<span class="hljs-built_in">string</span><span class="hljs-constructor">ToHex(<span class="hljs-params">string</span>)</span> <span class="hljs-comment">// 别名</span>
web3.utils.from<span class="hljs-constructor">Utf8(<span class="hljs-params">string</span>)</span> <span class="hljs-comment">// 别名，已弃用</span>
</code></pre>
<p>参数：</p>
<p><code>string</code> - String: ·UTF-8字符串</p>
<p>返回值：</p>
<p><code>String</code>: 16进制字符串</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.utf8ToHex(<span class="hljs-string">'I have 100€'</span>);
&gt; <span class="hljs-string">"0x49206861766520313030e282ac"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsasciitohex"></a><a href="#web3utilsasciitohex" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.asciiToHex</h4>
<p>返回指定ASCII字符串的16进制表示。</p>
<p>调用：</p>
<pre><code class="hljs">web3.utils.ascii<span class="hljs-constructor">ToHex(<span class="hljs-params">string</span>)</span>
web3.utils.from<span class="hljs-constructor">Ascii(<span class="hljs-params">string</span>)</span> <span class="hljs-comment">// 别名，已弃用</span>
</code></pre>
<p>参数：</p>
<p><code>string</code> - String: ASCII字符串</p>
<p>返回值</p>
<p><code>String</code>: 16进制字符串</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.asciiToHex(<span class="hljs-string">'I have 100!'</span>);
&gt; <span class="hljs-string">"0x4920686176652031303021"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilshextobytes"></a><a href="#web3utilshextobytes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.hexToBytes</h4>
<p>返回指定16进制字符串的字节数组表示。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.hexToBytes</span>(<span class="hljs-selector-tag">hex</span>)
</code></pre>
<p>参数：</p>
<p><code>hex</code> - String|HEX: 16进制字符串</p>
<p>返回值：</p>
<p><code>Array</code>: 字节数组</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.hexToBytes(<span class="hljs-string">'0x000000ea'</span>);
&gt; [ <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">234</span> ]

web3.utils.hexToBytes(<span class="hljs-number">0x000000ea</span>);
&gt; [ <span class="hljs-number">234</span> ]
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilstovon"></a><a href="#web3utilstovon" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.toVon</h4>
<p>按对应货币转为以von为单位。可选择的单位如下：</p>
<ul>
<li>von</li>
<li>kvon</li>
<li>mvon</li>
<li>gvon</li>
<li>microlat</li>
<li>millilat</li>
<li>lat</li>
<li>klat</li>
<li>mlat</li>
<li>glat</li>
<li>tlat</li>
</ul>
<pre><code class="hljs">'von':          '1',
'kvon':         '<span class="hljs-number">1000</span>',
'mvon':         '<span class="hljs-number">100000</span>0',
'gvon':         '<span class="hljs-number">1000000000</span>',
'microlat':     '<span class="hljs-number">100000000000</span>0',
'millilat':     '<span class="hljs-number">10000000000000</span>00',
'lat':          '<span class="hljs-number">10000000000000</span><span class="hljs-number">0000</span>0',
'klat':         '<span class="hljs-number">10000000000000</span><span class="hljs-number">00000000</span>',
'mlat':         '<span class="hljs-number">10000000000000</span><span class="hljs-number">0000000000</span>0',
'glat':         '<span class="hljs-number">10000000000000</span><span class="hljs-number">00000000000000</span>',
'tlat':         '<span class="hljs-number">10000000000000</span><span class="hljs-number">00000000000000</span>000'
</code></pre>
<p>调用：</p>
<pre><code class="hljs">web3.utils.<span class="hljs-keyword">to</span><span class="hljs-constructor">Von(<span class="hljs-params">number</span> [, <span class="hljs-params">unit</span>])</span>
</code></pre>
<p>参数：</p>
<ul>
<li><code>number</code> - String|Number|BN: 金额</li>
<li><code>unit</code> - String，可选，默认值为<code>ether</code></li>
</ul>
<p>返回值：</p>
<p><code>String|BN</code>: 如果输入参数是数值或字符串，则返回字符串，否则返回BN.js对象</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.toVon(<span class="hljs-string">'1'</span>, <span class="hljs-string">'lat'</span>);
&gt; <span class="hljs-string">"1000000000000000000"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilsfromvon"></a><a href="#web3utilsfromvon" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.fromVon</h4>
<p>将给定的以von为单位的值转换为其他单位的数值。</p>
<p>调用：</p>
<pre><code class="hljs"><span class="hljs-selector-tag">web3</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.fromVon</span>(<span class="hljs-selector-tag">number</span> <span class="hljs-selector-attr">[, unit]</span>)
</code></pre>
<p>Converts any von value into a lat value.</p>
<p>参数：</p>
<p><code>number</code> - String|Number|BN: VON为单位的数值
<code>unit</code> - String，可选，默认值为<code>lat</code>，可选的单位有：</p>
<ul>
<li>von</li>
<li>kvon</li>
<li>mvon</li>
<li>gvon</li>
<li>microlat</li>
<li>millilat</li>
<li>lat</li>
<li>klat</li>
<li>mlat</li>
<li>glat</li>
<li>tlat</li>
</ul>
<p>返回值：</p>
<p><code>String|BN</code>: 如果输入参数是数值或字符串，则返回字符串，否则返回BN.js对象</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.fromVon(<span class="hljs-string">'1'</span>, <span class="hljs-string">'lat'</span>);
&gt; <span class="hljs-string">"0.000000000000000001"</span>
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="web3utilspadleft"></a><a href="#web3utilspadleft" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>web3.utils.padLeft</h4>
<p>将指定字符串使用0左补齐到指定长度。</p>
<p>调用：</p>
<pre><code class="hljs">web3.utils.pad<span class="hljs-constructor">Left(<span class="hljs-params">string</span>, <span class="hljs-params">characterAmount</span> [, <span class="hljs-params">sign</span>])</span>
web3.utils.left<span class="hljs-constructor">Pad(<span class="hljs-params">string</span>, <span class="hljs-params">characterAmount</span> [, <span class="hljs-params">sign</span>])</span> <span class="hljs-comment">// 别名</span>
</code></pre>
<p>参数：</p>
<ul>
<li><code>string</code> - String: 要进行左补齐的字符串</li>
<li><code>characterAmount</code> - Number: 补齐后的总长度</li>
<li><code>sign</code> - String，可选，补齐字符，默认为&quot;0&quot;</li>
</ul>
<p>返回值：</p>
<p><code>String</code>: 左补齐到指定长度的字符串</p>
<p>示例代码：</p>
<pre><code class="hljs css language-js">web3.utils.padLeft(<span class="hljs-string">'0x3456ff'</span>, <span class="hljs-number">20</span>);
&gt; <span class="hljs-string">"0x000000000000003456ff"</span>

web3.utils.padLeft(<span class="hljs-number">0x3456ff</span>, <span class="hljs-number">20</span>);
&gt; <span class="hljs-string">"0x000000000000003456ff"</span>

web3.utils.padLeft(<span class="hljs-string">'Hello'</span>, <span class="hljs-number">20</span>, <span class="hljs-string">'x'</span>);
&gt; <span class="hljs-string">"xxxxxxxxxxxxxxxHello"</span>
</code></pre>
<hr>
<h2><a class="anchor" aria-hidden="true" id="内置合约调用指南"></a><a href="#内置合约调用指南" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>内置合约调用指南</h2>
<h3><a class="anchor" aria-hidden="true" id="概述"></a><a href="#概述" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>概述</h3>
<p>通过对调用对象 ppos（经济模型相关内置合约） 的 call 或者 send 函数将传进来的参数转换为 rpc 接口 platon_call 或者 platon_sendRawTransaction 调用所需要的参数，然后将交易发送至链上。以及完成 call 与 send 调用入参需要的一些辅助函数。</p>
<h3><a class="anchor" aria-hidden="true" id="简要使用"></a><a href="#简要使用" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>简要使用</h3>
<p>在调用<code>const web3 = new Web3('http://127.0.0.1:6789');</code>实例化一个web3的时候，系统会自动在 web3 后面附加一个 ppos 对象。也就是说你可以直接使用web3.ppos 调用 ppos 有的一些方法。但是如果要使用ppos对象发送上链的交易，那么除了在实例化<code>web3</code>的时候传进去的 provider，还至少需要发送交易签名需要的私钥以及链id，其中的链id可通过rpc接口<code>admin_nodeInfo</code>返回的<code>'chainId': xxx</code>获取。</p>
<p>当然，为了满足在能任意实例多个ppos(比如我要实例3个ppos给不同的链上同时发送交易调用)，我还会在web3对象上附上一个PPOS对象(注意全部是大写)。你可以调用<code>new PPOS(setting)</code>实例化一个ppos对象。一个调用示例如下：</p>
<pre><code class="hljs css language-JavaScript">(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> Web3 = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3'</span>);
    <span class="hljs-keyword">const</span> web3 = <span class="hljs-keyword">new</span> Web3(<span class="hljs-string">'http://192.168.120.164:6789'</span>);
    <span class="hljs-keyword">const</span> ppos = web3.ppos; <span class="hljs-comment">// 后面例子我都以 ppos 为对象。就不写成 web3.ppos 了。</span>

    <span class="hljs-comment">// 更新 ppos 的配置，发送上链交易必须要做这一步</span>
    <span class="hljs-comment">// 由于在实例化web3的时候已传入了 provider, 可以不传入provider了。</span>
    ppos.updateSetting({
        <span class="hljs-attr">privateKey</span>: <span class="hljs-string">'acc73b693b79bbb56f89f63ccc3a0c00bf1b8380111965bfe8ab22e32045600c'</span>,
        <span class="hljs-attr">chainId</span>: <span class="hljs-number">104</span>,
    })

    <span class="hljs-keyword">let</span> data, reply;

    <span class="hljs-comment">// 传参以对象形式发送交易： 1000. createStaking() : 发起质押</span>
    <span class="hljs-keyword">const</span> benefitAddress = <span class="hljs-string">'lax1umevux40n6ljlclm4pmrh2ad7f0rld06hkzx3u'</span>;
    <span class="hljs-keyword">const</span> nodeId = <span class="hljs-string">'80f1fcee54de74dbf7587450f31c31c0e057bedd4faaa2a10c179d52c900ca01f0fb255a630c49d83b39f970d175c42b12a341a37504be248d76ecf592d32bc0'</span>;
    <span class="hljs-keyword">const</span> amount = <span class="hljs-string">'10000000000000000000000000000'</span>;
    <span class="hljs-keyword">const</span> blsPubKey = <span class="hljs-string">'d2459db974f49ca9cbf944d4d04c2d17888aef90858b62d6aec166341a6e886e8c0c0cfae9e469c2f618f5d9b7a249130d10047899da6154288c9cde07b576acacd75fef07ba0cfeb4eaa7510704e77a9007eff5f1a5f8d099e6ea664129780c'</span>;
    data = {
        <span class="hljs-attr">funcType</span>: <span class="hljs-number">1000</span>,
        <span class="hljs-attr">typ</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">benefitAddress</span>: ppos.hexStrBuf(benefitAddress),
        <span class="hljs-attr">nodeId</span>: ppos.hexStrBuf(nodeId),
        <span class="hljs-attr">externalId</span>: <span class="hljs-string">'externalId'</span>,
        <span class="hljs-attr">nodeName</span>: <span class="hljs-string">'Me'</span>,
        <span class="hljs-attr">website</span>: <span class="hljs-string">'www.platon.network'</span>,
        <span class="hljs-attr">details</span>: <span class="hljs-string">'staking'</span>,
        <span class="hljs-attr">amount</span>: ppos.bigNumBuf(amount),
        <span class="hljs-attr">rewardPer</span>: <span class="hljs-number">500</span>, <span class="hljs-comment">//传500就是5%的奖励作为委托奖励</span>
        <span class="hljs-attr">programVersion</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-comment">// rpc 获取</span>
        <span class="hljs-attr">programVersionSign</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-comment">// rpc 获取</span>
        <span class="hljs-attr">blsPubKey</span>: ppos.hexStrBuf(blsPubKey),
        <span class="hljs-attr">blsProof</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-comment">// rpc 获取</span>
    }
    <span class="hljs-keyword">let</span> pv = <span class="hljs-keyword">await</span> ppos.rpc(<span class="hljs-string">'admin_getProgramVersion'</span>);
    <span class="hljs-keyword">let</span> blsProof = <span class="hljs-keyword">await</span> ppos.rpc(<span class="hljs-string">'admin_getSchnorrNIZKProve'</span>);
    data.programVersion = pv.Version;
    data.programVersionSign = pv.Sign;
    data.blsProof = ppos.hexStrBuf(blsProof);
    reply = <span class="hljs-keyword">await</span> ppos.send(data);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'createStaking params object reply: '</span>, <span class="hljs-built_in">JSON</span>.stringify(reply, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));

    <span class="hljs-comment">// 传参以数组形式发送交易： 1000. createStaking() : 发起质押</span>
    data = [
        <span class="hljs-number">1000</span>,
        <span class="hljs-number">0</span>,
        ppos.hexStrBuf(benefitAddress),
        ppos.hexStrBuf(nodeId),
        <span class="hljs-string">'externalId'</span>,
        <span class="hljs-string">'Me'</span>,
        <span class="hljs-string">'www.platon.network'</span>,
        <span class="hljs-string">'staking'</span>,
        ppos.bigNumBuf(amount),
        <span class="hljs-number">500</span>,
        pv.Version,
        pv.Sign,
        ppos.hexStrBuf(blsPubKey),
        ppos.hexStrBuf(blsProof)
    ];
    <span class="hljs-comment">// 由于上面已调用过，交易会上链，但是业务会失败</span>
    reply = <span class="hljs-keyword">await</span> ppos.send(data);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'createStaking params array reply: '</span>, reply);

    <span class="hljs-comment">// 传参以对象形式调用： 1102. getCandidateList() : 查询所有实时的候选人列表</span>
    data = {
        <span class="hljs-attr">funcType</span>: <span class="hljs-number">1102</span>,
    }
    reply = <span class="hljs-keyword">await</span> ppos.call(data);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'getCandidateList params object reply: '</span>, reply);

    <span class="hljs-comment">// 传参以数组形式调用： 1102. getCandidateList() : 查询所有实时的候选人列表</span>
    data = [<span class="hljs-number">1102</span>];
    reply = <span class="hljs-keyword">await</span> ppos.call(data);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'getCandidateList params array reply: '</span>, reply);

    <span class="hljs-comment">// 重新实例化一个ppos1对象出来调用</span>
    <span class="hljs-keyword">const</span> ppos1 = <span class="hljs-keyword">new</span> web3.PPOS({
        <span class="hljs-attr">provider</span>: <span class="hljs-string">'http://127.0.0.1:6789'</span>,
        <span class="hljs-attr">privateKey</span>: <span class="hljs-string">'9f9b18c72f8e5154a9c59af2a35f73d1bdad37b049387fc6cea2bac89804293b'</span>,
        <span class="hljs-attr">chainId</span>: <span class="hljs-number">104</span>,
    })
    reply = <span class="hljs-keyword">await</span> ppos1.call(data);
})()
</code></pre>
<p>日志信息输出如下。为了节省篇幅，有删减</p>
<pre><code class="hljs">createStaking params object reply:  {
  <span class="hljs-string">"blockHash"</span>: <span class="hljs-string">"0xdddd6b12919b69169b63d17fece52e8632fe3d8b48166c8b4ef8fdee39a1f35c"</span>,
  <span class="hljs-string">"blockNumber"</span>: <span class="hljs-string">"0xb"</span>,
  <span class="hljs-string">"contractAddress"</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-string">"cumulativeGasUsed"</span>: <span class="hljs-string">"0x14f34"</span>,
  <span class="hljs-string">"from"</span>: <span class="hljs-string">"lax1w9x7ye4qalarnl9v59zzhyn7tug9864rr2fc35"</span>,
  <span class="hljs-string">"gasUsed"</span>: <span class="hljs-string">"0x14f34"</span>,
  <span class="hljs-string">"logs"</span>: [
    {
      <span class="hljs-string">"address"</span>: <span class="hljs-string">"lax1zqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzlh5ge3"</span>,
      <span class="hljs-string">"topics"</span>: [
        <span class="hljs-string">"0xd63087bea9f1800eed943829fc1d61e7869764805baa3259078c1caf3d4f5a48"</span>
      ],
      <span class="hljs-string">"data"</span>: <span class="hljs-string">"0xe3a27b22436f6465223a302c2244617461223a22222c224572724d7367223a226f6b227d"</span>,
      <span class="hljs-string">"blockNumber"</span>: <span class="hljs-string">"0xb"</span>,
      <span class="hljs-string">"transactionHash"</span>: <span class="hljs-string">"0x4bee71e351076a81482e2576e469a8dfaa76da9b6cc848265c10968d6de67364"</span>,
      <span class="hljs-string">"transactionIndex"</span>: <span class="hljs-string">"0x0"</span>,
      <span class="hljs-string">"blockHash"</span>: <span class="hljs-string">"0xdddd6b12919b69169b63d17fece52e8632fe3d8b48166c8b4ef8fdee39a1f35c"</span>,
      <span class="hljs-string">"logIndex"</span>: <span class="hljs-string">"0x0"</span>,
      <span class="hljs-string">"removed"</span>: false,
      <span class="hljs-string">"dataStr"</span>: {
        <span class="hljs-string">"Code"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-string">"Data"</span>: <span class="hljs-string">""</span>,
        <span class="hljs-string">"ErrMsg"</span>: <span class="hljs-string">"ok"</span>
      }
    }
  ],
  <span class="hljs-string">"logsBloom"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-string">"root"</span>: <span class="hljs-string">"0x3b7a41cea97f90196039586a3068f6a64c09aa7597898440c3c241a095e37984"</span>,
  <span class="hljs-string">"to"</span>: <span class="hljs-string">"lax1zqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzlh5ge3"</span>,
  <span class="hljs-string">"transactionHash"</span>: <span class="hljs-string">"0x4bee71e351076a81482e2576e469a8dfaa76da9b6cc848265c10968d6de67364"</span>,
  <span class="hljs-string">"transactionIndex"</span>: <span class="hljs-string">"0x0"</span>
}

createStaking params array reply:  { blockHash:
   '0x<span class="hljs-number">4335</span>1e4a9f1b<span class="hljs-number">7173552094</span>bacfd5b6f84f18a6c7c0c02d8a<span class="hljs-number">1050</span>6e3a<span class="hljs-number">61041117</span>',
  blockNumber: '0x10',
  contractAddress: <span class="hljs-literal">null</span>,
  cumulativeGasUsed: '0x14f34',
  from: 'lax1w9x7ye4qalarnl9v59zzhyn7tug<span class="hljs-number">9864</span>rr2fc35',
  gasUsed: '0x14f34',
  logs:
   [ { address: 'lax1zqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzlh5ge3',
       topics: [Array],
       data:
        '0xf846b<span class="hljs-number">8447</span>b<span class="hljs-number">2243</span>6f<span class="hljs-number">646522</span>3a<span class="hljs-number">333031313031</span>2c<span class="hljs-number">224461746122</span>3a<span class="hljs-number">2222</span>2c<span class="hljs-number">22457272</span>4d<span class="hljs-number">736722</span>3a<span class="hljs-number">22546869732063</span>616e<span class="hljs-number">64696461746520</span><span class="hljs-number">69732061</span>6c<span class="hljs-number">72656164792065</span><span class="hljs-number">7869737422</span>7d',
       blockNumber: '0x10',
       transactionHash:
        '0xe5cbc728d6e<span class="hljs-number">284464</span>c30ce6f0bbee5fb2b<span class="hljs-number">3035</span>1a<span class="hljs-number">591424</span>f3a0edd37cc1bbdc05',
       transactionIndex: '0x0',
       blockHash:
        '0x<span class="hljs-number">4335</span>1e4a9f1b<span class="hljs-number">7173552094</span>bacfd5b6f84f18a6c7c0c02d8a<span class="hljs-number">1050</span>6e3a<span class="hljs-number">61041117</span>',
       logIndex: '0x0',
       removed: false,
       dataStr: [Object] } ],
  logsBloom:'',
  root:
   '0x45ffeda340b68a0d54c<span class="hljs-number">5556</span>a51f925b<span class="hljs-number">078730</span>7eab1fb120ed141fd8ba<span class="hljs-number">8118</span>3d4',
  to: 'lax1zqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzlh5ge3',
  transactionHash:
   '0xe5cbc728d6e<span class="hljs-number">284464</span>c30ce6f0bbee5fb2b<span class="hljs-number">3035</span>1a<span class="hljs-number">591424</span>f3a0edd37cc1bbdc05',
  transactionIndex: '0x0' }

getCandidateList params object reply:  { 
  Code: <span class="hljs-number">0</span>,
  Data:
   [ { candidate1 info... },
     { candidate2 info... },
     { candidate3 info... },
     { candidate4 info... } 
   ],
  ErrMsg: 'ok' }

getCandidateList params array reply:  { 
  Code: <span class="hljs-number">0</span>,
  Data:
   [ { candidate1 info... },
     { candidate2 info... },
     { candidate3 info... },
     { candidate4 info... } 
   ],
  ErrMsg: 'ok' }
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="api-调用详细说明"></a><a href="#api-调用详细说明" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>API 调用详细说明</h3>
<h4><a class="anchor" aria-hidden="true" id="updatesettingsetting"></a><a href="#updatesettingsetting" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>updateSetting(setting)</code></h4>
<p>更新 ppos 对象的配置参数。如果你只需要发送call调用，那么只需要传入 provider 即可。如果你在实例化 web3 的时候已经传入了 provider。那么会ppos的provider默认就是你实例化web3传进来的provider。当然你也可以随时更新provider。</p>
<p>如果你要发送send交易，那么除了provider，还必须要传入发送交易所需要的私钥以及链id。当然，发送交易需要设置的gas, gasPrice, retry, interval这四个参数详细请见<code>async send(params, [other])</code>说明。</p>
<p>对传入的参数，你可以选择部分更新，比如你对一个ppos对象，发送某个交易时想使用私钥A，那么你在调用<code>send(params, [other])</code>之前执行 <code>ppos.updateSetting({privateKey: youPrivateKeyA})</code>更新私钥即可。一旦更新之后，将会覆盖当前配置，后面调用发送交易接口，将默认以最后一次更新的配置。</p>
<p>入参说明：</p>
<ul>
<li>setting Object
<ul>
<li>provider String 链接</li>
<li>privateKey String 私钥</li>
<li>chainId String 链id</li>
<li>gas String 燃料最大消耗，请输入十六进制字符串，比如 '0xf4240'</li>
<li>gasPrice String 燃料价格，请输入十六进制字符串，比如 '0x746a528800'</li>
<li>retry Number 查询交易收据对象次数。</li>
<li>interval Number 查询交易收据对象的间隔，单位为ms。</li>
</ul></li>
</ul>
<p>无出参。</p>
<p>调用示例</p>
<pre><code class="hljs css language-JavaScript"><span class="hljs-comment">// 同时更新 privateKey，chainId</span>
ppos.updateSetting({
    <span class="hljs-attr">privateKey</span>: <span class="hljs-string">'acc73b693b79bbb56f89f63ccc3a0c00bf1b8380111965bfe8ab22e32045600c'</span>,
    <span class="hljs-attr">chainId</span>: <span class="hljs-number">104</span>,
})

<span class="hljs-comment">// 只更新 privateKey</span>
ppos.updateSetting({
    <span class="hljs-attr">privateKey</span>: <span class="hljs-string">'9f9b18c72f8e5154a9c59af2a35f73d1bdad37b049387fc6cea2bac89804293b'</span>
})
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="getsetting"></a><a href="#getsetting" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>getSetting()</code></h4>
<p>查询你配置的参数</p>
<p>无入参</p>
<p>出参</p>
<ul>
<li>setting Object
<ul>
<li>provider String 链接</li>
<li>privateKey String 私钥</li>
<li>chainId String 链id</li>
<li>gas String 燃料最大消耗</li>
<li>gasPrice String 燃料价格</li>
<li>retry Number 查询交易收据对象次数。</li>
<li>interval Number 查询交易收据对象的间隔，单位为ms。</li>
</ul></li>
</ul>
<p>调用示例</p>
<pre><code class="hljs css language-JavaScript"><span class="hljs-keyword">let</span> setting = ppos.getSetting();
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="async-rpcmethod-params"></a><a href="#async-rpcmethod-params" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>async rpc(method, [params])</code></h4>
<p>发起 rpc 请求。一个辅助函数，因为在调用ppos发送交易的过程中，有些参数需要通过rpc来获取，所以特意封装了一个rpc供调用。注意此接口为async函数，需要加await返回调用结果，否则返回一个Promise对象。</p>
<p>入参说明：</p>
<ul>
<li>method String 方法名</li>
<li>params Array 调用rpc接口需要的参数，如果调用此rpc端口不需要参数，则此参数可以省略。</li>
</ul>
<p>出参</p>
<ul>
<li>reply rpc调用返回的结果</li>
</ul>
<p>调用示例</p>
<pre><code class="hljs css language-JavaScript"><span class="hljs-comment">// 获取程序版本</span>
<span class="hljs-keyword">let</span> reply = <span class="hljs-keyword">await</span> ppos.rpc(<span class="hljs-string">'admin_getProgramVersion'</span>); 

<span class="hljs-comment">// 获取所有账号</span>
<span class="hljs-keyword">let</span> reply = <span class="hljs-keyword">await</span> ppos.rpc(<span class="hljs-string">'platon_accounts'</span>)

<span class="hljs-comment">// 获取一个账号的金额</span>
<span class="hljs-keyword">let</span> reply = <span class="hljs-keyword">await</span> ppos.rpc(<span class="hljs-string">'platon_getBalance'</span>, [<span class="hljs-string">"lax1w9x7ye4qalarnl9v59zzhyn7tug9864rr2fc35"</span>,<span class="hljs-string">"latest"</span>])
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="bignumbufintstr"></a><a href="#bignumbufintstr" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>bigNumBuf(intStr)</code></h4>
<p>将一个字符串的十进制大整数转为一个RLP编码能接受的buffer对象。一个辅助函数。因为JavaScript的正数范围只能最大表示为2^53，为了RLP能对大整数进行编码，需要将字符串的十进制大整数转换为相应的Buffer。注意，此接口暂时只能对十进制的大整数转为Buffer，如果是十六进制的字符串，您需要先将他转为十进制的字符串。</p>
<p>入参说明：</p>
<ul>
<li>intStr String 字符串十进制大整数。</li>
</ul>
<p>出参</p>
<ul>
<li>buffer Buffer 一个缓存区。</li>
</ul>
<p>调用示例</p>
<pre><code class="hljs css language-JavaScript"><span class="hljs-keyword">let</span> buffer = ppos.bigNumBuf(<span class="hljs-string">'1000000000000000000000000000000000000000000'</span>); 
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="hexstrbufhexstr"></a><a href="#hexstrbufhexstr" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>hexStrBuf(hexStr)</code></h4>
<p>将一个十六进制的字符串转为一个RLP编码能接受的buffer对象。一个辅助函数。在ppos发送交易的过程中，我们很多参数需要作为bytes传送而不是string，比如 <code>nodeId 64bytes 被质押的节点Id(也叫候选人的节点Id)</code>。而写代码时候的nodeId只能以字符串的形式表现。需要将他转为一个 64 bytes 的 Buffer。</p>
<p>注意：如果你传进去的字符串以 0x 或者 0X 开头，系统会默认为你是表示一个十六进制字符串不对开头的这两个字母进行编码。如果你确实要对 0x 或者 0X 编码，那你必须在字符串前面再加前缀 0x。比如，你要对全字符串 0x31c0e0 (4 bytes) 进行编码，那么必须传入 0x0x31c0e0 。</p>
<p>入参说明：</p>
<ul>
<li>hexStr String 一个十六进制的字符串。</li>
</ul>
<p>出参</p>
<ul>
<li>buffer Buffer 一个缓存区。</li>
</ul>
<p>调用示例</p>
<pre><code class="hljs css language-JavaScript"><span class="hljs-keyword">const</span> nodeId = <span class="hljs-string">'80f1fcee54de74dbf7587450f31c31c0e057bedd4faaa2a10c179d52c900ca01f0fb255a630c49d83b39f970d175c42b12a341a37504be248d76ecf592d32bc0'</span>;
<span class="hljs-keyword">let</span> buffer = ppos.hexStrBuf(nodeId); 
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="async-callparams"></a><a href="#async-callparams" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>async call(params)</code></h4>
<p>发送一个 ppos 的call查询调用。不上链。所以你需要自行区分是否是查询或者是发送交易。入参可以选择对象或者数组。如果你选择传入对象，那么你需要使用规定的字符串key，但是对key要求不做顺序。你可以这样写<code>{a: 1, b: 'hello'}</code> 或者 <code>{b: 'hello', a: 1}</code>都没问题。</p>
<p>如果你选择以数组作为入参，那么你<strong>必须严格按照入参的顺序依次将参数放到数组里面</strong>。注意，对一些字符串大整数以及需要传入的bytes，请选择上面提供的接口<code>bigNumBuf(intStr)</code>跟<code>hexStrBuf(hexStr)</code>自行进行转换再传入。</p>
<p>注意此接口为async函数，需要加await返回调用结果，否则返回一个Promise对象。</p>
<p>入参说明：</p>
<ul>
<li>params Object | Array 调用参数。</li>
</ul>
<p>出参</p>
<ul>
<li>reply Object call调用的返回的结果。注意，我已将将返回的结果转为了Object对象。
<ul>
<li>Code Number 调用返回码，0表示调用结果正常。</li>
<li>Data Array | Object | String | Number... 根据调用结果返回相应类型</li>
<li>ErrMsg String 调用提示信息。</li>
</ul></li>
</ul>
<p>以调用 <code>查询当前账户地址所委托的节点的NodeID和质押Id</code>这个接口，入参顺序从上到下，入参如下所示：</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(1103)</td></tr>
<tr><td>addr</td><td>common.address(20bytes)</td><td>委托人的账户地址</td></tr>
</tbody>
</table>
<p>调用示例</p>
<pre><code class="hljs css language-JavaScript"><span class="hljs-keyword">var</span> utils = <span class="hljs-built_in">require</span>(<span class="hljs-string">"web3-utils"</span>)
<span class="hljs-keyword">let</span> params, reply;

<span class="hljs-keyword">let</span> address = utils.decodeBech32Address(<span class="hljs-string">"lax"</span>, <span class="hljs-string">"lax1umevux40n6ljlclm4pmrh2ad7f0rld06hkzx3u"</span>)
<span class="hljs-comment">// 以传进入对象进行调用(对于key不要求顺序)</span>
params = {
    <span class="hljs-attr">funcType</span>: <span class="hljs-number">1103</span>,
    <span class="hljs-attr">addr</span>: ppos.hexStrBuf(address)
}
reply = <span class="hljs-keyword">await</span> ppos.call(params);

<span class="hljs-comment">// 以传入数组对象进行调用</span>
params = [<span class="hljs-number">1103</span>, ppos.hexStrBuf(address)];
reply = <span class="hljs-keyword">await</span> ppos.call(params);
</code></pre>
<hr>
<h4><a class="anchor" aria-hidden="true" id="async-sendparams-other"></a><a href="#async-sendparams-other" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>async send(params, [other])</code></h4>
<p>发送一个 ppos 的send发送交易调用。上链。所以你需要自行区分是否是查询或者是发送交易。入参可以选择对象或者数组。传入规则请看上述<code>async call(params)</code>调用。</p>
<p>由于是一个交易，将会涉及到调用交易需要的一些参数，比如gas，gasPrice。当交易发送出去之后，为了确认交易是否上链，需要不断的通过交易哈希去轮询链上的结果。这就有个轮询次数 retry 与每次轮询之间的间隔 interval。</p>
<p>对于上面提到的 gas, gasPrice, retry, interval 这四个参数，如果other入参有指定，则使用other指定的。如果other入参未指定，则使用调用函数时候<code>updateSetting(setting)</code>指定的参数，否则使用默认的数值。</p>
<p>注意此接口为async函数，需要加await返回调用结果，否则返回一个Promise对象。</p>
<p>入参说明：</p>
<ul>
<li>params Object|Array 调用参数。</li>
<li>other Object 其他参数
<ul>
<li>gas String 燃油限制，默认 '0xf4240'。</li>
<li>gasPrice String 燃油价格，默认 '0x746a528800'。</li>
<li>retry Number 查询交易收据对象次数，默认 600 次。</li>
<li>interval Number 查询交易收据对象的间隔，单位为ms。默认 100 ms。</li>
</ul></li>
</ul>
<p>出参</p>
<ul>
<li><p>reply Object 调用成功！send调用方法返回指定交易的收据对象</p>
<ul>
<li>status - Boolean: 成功的交易返回true，如果EVM回滚了该交易则返回false</li>
<li>blockHash 32 Bytes - String: 交易所在块的哈希值</li>
<li>blockNumber - Number: 交易所在块的编号</li>
<li>transactionHash 32 Bytes - String: 交易的哈希值</li>
<li>transactionIndex - Number: 交易在块中的索引位置</li>
<li>from - String: 交易发送方的地址</li>
<li>to - String: 交易接收方的地址，对于创建合约的交易，该值为null</li>
<li>contractAddress - String: 对于创建合约的交易，该值为创建的合约地址，否则为null</li>
<li>cumulativeGasUsed - Number: 该交易执行时所在块的gas累计总用量</li>
<li>gasUsed- Number: 该交易的gas总量</li>
<li>logs - Array: 该交易产生的日志对象数组</li>
</ul></li>
<li><p>errMsg String 调用失败！如果发送交易返回之后没有回执，则返回错误信息<code>no hash</code>。如果发送交易之后有回执，但是在规定的时间内没有查到收据对象，则返回 <code>getTransactionReceipt txHash ${hash} interval ${interval}ms by ${retry} retry failed</code></p></li>
</ul>
<p>以调用 <code>发起委托</code>这个接口，入参顺序从上到下，入参如下所示：</p>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(1004)</td></tr>
<tr><td>typ</td><td>uint16(2bytes)</td><td>表示使用账户自由金额还是账户的锁仓金额做委托，0: 自由金额； 1: 锁仓金额</td></tr>
<tr><td>nodeId</td><td>64bytes</td><td>被质押的节点的NodeId</td></tr>
<tr><td>amount</td><td>big.Int(bytes)</td><td>委托的金额(按照最小单位算，1LAT = 10^18 von)</td></tr>
</tbody>
</table>
<p>调用示例</p>
<pre><code class="hljs css language-JavaScript"><span class="hljs-keyword">const</span> nodeId = <span class="hljs-string">"f71e1bc638456363a66c4769284290ef3ccff03aba4a22fb60ffaed60b77f614bfd173532c3575abe254c366df6f4d6248b929cb9398aaac00cbcc959f7b2b7c"</span>;
<span class="hljs-keyword">let</span> params, others, reply;

<span class="hljs-comment">// 以传进入对象进行调用(对于key不要求顺序)</span>
params = {
    <span class="hljs-attr">funcType</span>: <span class="hljs-number">1004</span>,
    <span class="hljs-attr">typ</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">nodeId</span>: ppos.hexStrBuf(nodeId),
    <span class="hljs-attr">amount</span>: ppos.bigNumBuf(<span class="hljs-string">"10000000000000000000000"</span>)
}
reply = <span class="hljs-keyword">await</span> ppos.send(params);

<span class="hljs-comment">// 以传入数组对象进行调用</span>
params = [<span class="hljs-number">1004</span>, <span class="hljs-number">0</span>, ppos.hexStrBuf(nodeId), ppos.bigNumBuf(<span class="hljs-string">"10000000000000000000000"</span>)];
reply = <span class="hljs-keyword">await</span> ppos.send(params);

<span class="hljs-comment">// 我不想默认的轮询</span>
other = {
    <span class="hljs-attr">retry</span>: <span class="hljs-number">300</span>, <span class="hljs-comment">// 只轮询300次</span>
    <span class="hljs-attr">interval</span>: <span class="hljs-number">200</span> <span class="hljs-comment">// 每次轮询间隔200ms</span>
}
params = [<span class="hljs-number">1004</span>, <span class="hljs-number">0</span>, ppos.hexStrBuf(nodeId), ppos.bigNumBuf(<span class="hljs-string">"10000000000000000000000"</span>)];
reply = <span class="hljs-keyword">await</span> ppos.send(params, other);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="内置合约入参详细说明"></a><a href="#内置合约入参详细说明" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>内置合约入参详细说明</h3>
<h4><a class="anchor" aria-hidden="true" id="质押"></a><a href="#质押" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>质押</h4>
<ul>
<li>发起质押，send 发送交易。</li>
</ul>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(1000)</td></tr>
<tr><td>typ</td><td>uint16(2bytes)</td><td>表示使用账户自由金额还是账户的锁仓金额做质押，0: 自由金额； 1: 锁仓金额</td></tr>
<tr><td>benefitAddress</td><td>20bytes</td><td>用于接受出块奖励和质押奖励的收益账户</td></tr>
<tr><td>nodeId</td><td>64bytes</td><td>被质押的节点Id(也叫候选人的节点Id)</td></tr>
<tr><td>externalId</td><td>string</td><td>外部Id(有长度限制，给第三方拉取节点描述的Id)</td></tr>
<tr><td>nodeName</td><td>string</td><td>被质押节点的名称(有长度限制，表示该节点的名称)</td></tr>
<tr><td>website</td><td>string</td><td>节点的第三方主页(有长度限制，表示该节点的主页)</td></tr>
<tr><td>details</td><td>string</td><td>节点的描述(有长度限制，表示该节点的描述)</td></tr>
<tr><td>amount</td><td>*big.Int(bytes)</td><td>质押的von</td></tr>
<tr><td>rewardPer</td><td>uint16(2bytes)</td><td>委托所得到的奖励分成比例，采用BasePoint 1BP=0.01%</td></tr>
<tr><td>programVersion</td><td>uint32</td><td>程序的真实版本，治理rpc获取</td></tr>
<tr><td>programVersionSign</td><td>65bytes</td><td>程序的真实版本签名，治理rpc获取</td></tr>
<tr><td>blsPubKey</td><td>96bytes</td><td>bls的公钥</td></tr>
<tr><td>blsProof</td><td>64bytes</td><td>bls的证明,通过拉取证明接口获取</td></tr>
</tbody>
</table>
<ul>
<li>修改质押信息，send 发送交易。</li>
</ul>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(1001)</td></tr>
<tr><td>benefitAddress</td><td>20bytes</td><td>用于接受出块奖励和质押奖励的收益账户</td></tr>
<tr><td>nodeId</td><td>64bytes</td><td>被质押的节点Id(也叫候选人的节点Id)</td></tr>
<tr><td>rewardPer</td><td>uint16(2bytes)</td><td>委托所得到的奖励分成比例，采用BasePoint 1BP=0.01%，例：传500就是5%的奖励作为委托奖励</td></tr>
<tr><td>externalId</td><td>string</td><td>外部Id(有长度限制，给第三方拉取节点描述的Id)</td></tr>
<tr><td>nodeName</td><td>string</td><td>被质押节点的名称(有长度限制，表示该节点的名称)</td></tr>
<tr><td>website</td><td>string</td><td>节点的第三方主页(有长度限制，表示该节点的主页)</td></tr>
<tr><td>details</td><td>string</td><td>节点的描述(有长度限制，表示该节点的描述)</td></tr>
</tbody>
</table>
<ul>
<li>增持质押，send 发送交易。</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(1002)</td></tr>
<tr><td>nodeId</td><td>64bytes</td><td>被质押的节点Id(也叫候选人的节点Id)</td></tr>
<tr><td>typ</td><td>uint16(2bytes)</td><td>表示使用账户自由金额还是账户的锁仓金额做质押，0: 自由金额； 1: 锁仓金额</td></tr>
<tr><td>amount</td><td>*big.Int(bytes)</td><td>增持的von</td></tr>
</tbody>
</table>
<ul>
<li>撤销质押(一次性发起全部撤销，多次到账)，send 发送交易。</li>
</ul>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(1003)</td></tr>
<tr><td>nodeId</td><td>64bytes</td><td>被质押的节点的NodeId</td></tr>
</tbody>
</table>
<ul>
<li>发起委托，send 发送交易。</li>
</ul>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(1004)</td></tr>
<tr><td>typ</td><td>uint16(2bytes)</td><td>表示使用账户自由金额还是账户的锁仓金额做委托，0: 自由金额； 1: 锁仓金额</td></tr>
<tr><td>nodeId</td><td>64bytes</td><td>被质押的节点的NodeId</td></tr>
<tr><td>amount</td><td>*big.Int(bytes)</td><td>委托的金额(按照最小单位算，1LAT = 10**18 von)</td></tr>
</tbody>
</table>
<ul>
<li>减持/撤销委托(全部减持就是撤销)，send 发送交易。</li>
</ul>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(1005)</td></tr>
<tr><td>stakingBlockNum</td><td>uint64(8bytes)</td><td>代表着某个node的某次质押的唯一标示</td></tr>
<tr><td>nodeId</td><td>64bytes</td><td>被质押的节点的NodeId</td></tr>
<tr><td>amount</td><td>*big.Int(bytes)</td><td>减持委托的金额(按照最小单位算，1LAT = 10**18 von)</td></tr>
</tbody>
</table>
<ul>
<li>查询当前结算周期的验证人队列，call 查询</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(1100)</td></tr>
</tbody>
</table>
<p><strong>查询结果统一格式</strong></p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>Code</td><td>uint32</td><td>表示ppos内置合约返回的错误码</td></tr>
<tr><td>Data</td><td>string</td><td>json字符串的查询结果，具体格式参见以下查询相关接口返回值</td></tr>
<tr><td>ErrMsg</td><td>string</td><td>错误提示信息</td></tr>
</tbody>
</table>
<blockquote>
<p>注：以下查询接口（platon_call调用的接口）如无特殊声明，返回参数都按照上述格式返回</p>
</blockquote>
<p>返参： 列表</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>NodeId</td><td>64bytes</td><td>被质押的节点Id(也叫候选人的节点Id)</td></tr>
<tr><td>StakingAddress</td><td>20bytes</td><td>发起质押时使用的账户(后续操作质押信息只能用这个账户，撤销质押时，von会被退回该账户或者该账户的锁仓信息中)</td></tr>
<tr><td>BenefitAddress</td><td>20bytes</td><td>用于接受出块奖励和质押奖励的收益账户</td></tr>
<tr><td>StakingTxIndex</td><td>uint32(4bytes)</td><td>发起质押时的交易索引</td></tr>
<tr><td>ProgramVersion</td><td>uint32</td><td>被质押节点的PlatON进程的真实版本号(获取版本号的接口由治理提供)</td></tr>
<tr><td>StakingBlockNum</td><td>uint64(8bytes)</td><td>发起质押时的区块高度</td></tr>
<tr><td>Shares</td><td>*big.Int(bytes)</td><td>当前候选人总共质押加被委托的von数目</td></tr>
<tr><td>ExternalId</td><td>string</td><td>外部Id(有长度限制，给第三方拉取节点描述的Id)</td></tr>
<tr><td>NodeName</td><td>string</td><td>被质押节点的名称(有长度限制，表示该节点的名称)</td></tr>
<tr><td>Website</td><td>string</td><td>节点的第三方主页(有长度限制，表示该节点的主页)</td></tr>
<tr><td>Details</td><td>string</td><td>节点的描述(有长度限制，表示该节点的描述)</td></tr>
<tr><td>ValidatorTerm</td><td>uint32(4bytes)</td><td>验证人的任期(在结算周期的101个验证人快照中永远是0，只有在共识轮的验证人时才会被有值，刚被选出来时也是0，继续留任时则+1)</td></tr>
</tbody>
</table>
<ul>
<li>查询当前共识周期的验证人列表，call 查询</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(1101)</td></tr>
</tbody>
</table>
<p>返参： 列表</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>NodeId</td><td>64bytes</td><td>被质押的节点Id(也叫候选人的节点Id)</td></tr>
<tr><td>StakingAddress</td><td>20bytes</td><td>发起质押时使用的账户(后续操作质押信息只能用这个账户，撤销质押时，von会被退回该账户或者该账户的锁仓信息中)</td></tr>
<tr><td>BenefitAddress</td><td>20bytes</td><td>用于接受出块奖励和质押奖励的收益账户</td></tr>
<tr><td>StakingTxIndex</td><td>uint32(4bytes)</td><td>发起质押时的交易索引</td></tr>
<tr><td>ProgramVersion</td><td>uint32(4bytes)</td><td>被质押节点的PlatON进程的真实版本号(获取版本号的接口由治理提供)</td></tr>
<tr><td>StakingBlockNum</td><td>uint64(8bytes)</td><td>发起质押时的区块高度</td></tr>
<tr><td>Shares</td><td>*big.Int(bytes)</td><td>当前候选人总共质押加被委托的von数目</td></tr>
<tr><td>ExternalId</td><td>string</td><td>外部Id(有长度限制，给第三方拉取节点描述的Id)</td></tr>
<tr><td>NodeName</td><td>string</td><td>被质押节点的名称(有长度限制，表示该节点的名称)</td></tr>
<tr><td>Website</td><td>string</td><td>节点的第三方主页(有长度限制，表示该节点的主页)</td></tr>
<tr><td>Details</td><td>string</td><td>节点的描述(有长度限制，表示该节点的描述)</td></tr>
<tr><td>ValidatorTerm</td><td>uint32(4bytes)</td><td>验证人的任期(在结算周期的101个验证人快照中永远是0，只有在共识轮的验证人时才会被有值，刚被选出来时也是0，继续留任时则+1)</td></tr>
</tbody>
</table>
<ul>
<li>查询所有实时的候选人列表，call 查询</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(1102)</td></tr>
</tbody>
</table>
<p>返参： 列表</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>NodeId</td><td>64bytes</td><td>被质押的节点Id(也叫候选人的节点Id)</td></tr>
<tr><td>StakingAddress</td><td>20bytes</td><td>发起质押时使用的账户(后续操作质押信息只能用这个账户，撤销质押时，von会被退回该账户或者该账户的锁仓信息中)</td></tr>
<tr><td>BenefitAddress</td><td>20bytes</td><td>用于接受出块奖励和质押奖励的收益账户</td></tr>
<tr><td>StakingTxIndex</td><td>uint32(4bytes)</td><td>发起质押时的交易索引</td></tr>
<tr><td>ProgramVersion</td><td>uint32(4bytes)</td><td>被质押节点的PlatON进程的真实版本号(获取版本号的接口由治理提供)</td></tr>
<tr><td>Status</td><td>uint32(4bytes)</td><td>候选人的状态(状态是根据uint32的32bit来放置的，可同时存在多个状态，值为多个同时存在的状态值相加【0: 节点可用 (32个bit全为0)； 1: 节点不可用 (只有最后一bit为1)； 2： 节点出块率低但没有达到移除条件的(只有倒数第二bit为1)； 4： 节点的von不足最低质押门槛(只有倒数第三bit为1)； 8：节点被举报双签(只有倒数第四bit为1)); 16: 节点出块率低且达到移除条件(倒数第五位bit为1); 32: 节点主动发起撤销(只有倒数第六位bit为1)】</td></tr>
<tr><td>StakingEpoch</td><td>uint32(4bytes)</td><td>当前变更质押金额时的结算周期</td></tr>
<tr><td>StakingBlockNum</td><td>uint64(8bytes)</td><td>发起质押时的区块高度</td></tr>
<tr><td>Shares</td><td>string(0x十六进制字符串)</td><td>当前候选人总共质押加被委托的von数目</td></tr>
<tr><td>Released</td><td>string(0x十六进制字符串)</td><td>发起质押账户的自由金额的锁定期质押的von</td></tr>
<tr><td>ReleasedHes</td><td>string(0x十六进制字符串)</td><td>发起质押账户的自由金额的犹豫期质押的von</td></tr>
<tr><td>RestrictingPlan</td><td>string(0x十六进制字符串)</td><td>发起质押账户的锁仓金额的锁定期质押的von</td></tr>
<tr><td>RestrictingPlanHes</td><td>string(0x十六进制字符串)</td><td>发起质押账户的锁仓金额的犹豫期质押的von</td></tr>
<tr><td>ExternalId</td><td>string</td><td>外部Id(有长度限制，给第三方拉取节点描述的Id)</td></tr>
<tr><td>NodeName</td><td>string</td><td>被质押节点的名称(有长度限制，表示该节点的名称)</td></tr>
<tr><td>Website</td><td>string</td><td>节点的第三方主页(有长度限制，表示该节点的主页)</td></tr>
<tr><td>Details</td><td>string</td><td>节点的描述(有长度限制，表示该节点的描述)</td></tr>
</tbody>
</table>
<ul>
<li>查询当前账户地址所委托的节点的NodeID和质押Id，call 查询</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(1103)</td></tr>
<tr><td>addr</td><td>common.address(20bytes)</td><td>委托人的账户地址</td></tr>
</tbody>
</table>
<p>返参： 列表</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>Addr</td><td>20bytes</td><td>委托人的账户地址</td></tr>
<tr><td>NodeId</td><td>64bytes</td><td>验证人的节点Id</td></tr>
<tr><td>StakingBlockNum</td><td>uint64(8bytes)</td><td>发起质押时的区块高度</td></tr>
</tbody>
</table>
<ul>
<li>查询当前单个委托信息，call 查询</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16</td><td>代表方法类型码(1104)</td></tr>
<tr><td>stakingBlockNum</td><td>uint64(8bytes)</td><td>发起质押时的区块高度</td></tr>
<tr><td>delAddr</td><td>20bytes</td><td>委托人账户地址</td></tr>
<tr><td>nodeId</td><td>64bytes</td><td>验证人的节点Id</td></tr>
</tbody>
</table>
<p>返参： 列表</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>Addr</td><td>20bytes</td><td>委托人的账户地址</td></tr>
<tr><td>NodeId</td><td>64bytes</td><td>验证人的节点Id</td></tr>
<tr><td>StakingBlockNum</td><td>uint64(8bytes)</td><td>发起质押时的区块高度</td></tr>
<tr><td>DelegateEpoch</td><td>uint32(4bytes)</td><td>最近一次对该候选人发起的委托时的结算周期</td></tr>
<tr><td>Released</td><td>string(0x十六进制字符串)</td><td>发起委托账户的自由金额的锁定期委托的von</td></tr>
<tr><td>ReleasedHes</td><td>string(0x十六进制字符串)</td><td>发起委托账户的自由金额的犹豫期委托的von</td></tr>
<tr><td>RestrictingPlan</td><td>string(0x十六进制字符串)</td><td>发起委托账户的锁仓金额的锁定期委托的von</td></tr>
<tr><td>RestrictingPlanHes</td><td>string(0x十六进制字符串)</td><td>发起委托账户的锁仓金额的犹豫期委托的von</td></tr>
<tr><td>Reduction</td><td>string(0x十六进制字符串)</td><td>处于撤销计划中的von</td></tr>
</tbody>
</table>
<ul>
<li>查询当前节点的质押信息，call 查询</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16</td><td>代表方法类型码(1105)</td></tr>
<tr><td>nodeId</td><td>64bytes</td><td>验证人的节点Id</td></tr>
</tbody>
</table>
<p>返参： 列表</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>NodeId</td><td>64bytes</td><td>被质押的节点Id(也叫候选人的节点Id)</td></tr>
<tr><td>StakingAddress</td><td>20bytes</td><td>发起质押时使用的账户(后续操作质押信息只能用这个账户，撤销质押时，von会被退回该账户或者该账户的锁仓信息中)</td></tr>
<tr><td>BenefitAddress</td><td>20bytes</td><td>用于接受出块奖励和质押奖励的收益账户</td></tr>
<tr><td>StakingTxIndex</td><td>uint32(4bytes)</td><td>发起质押时的交易索引</td></tr>
<tr><td>ProgramVersion</td><td>uint32(4bytes)</td><td>被质押节点的PlatON进程的真实版本号(获取版本号的接口由治理提供)</td></tr>
<tr><td>Status</td><td>uint32(4bytes)</td><td>候选人的状态(状态是根据uint32的32bit来放置的，可同时存在多个状态，值为多个同时存在的状态值相加【0: 节点可用 (32个bit全为0)； 1: 节点不可用 (只有最后一bit为1)； 2： 节点出块率低但没有达到移除条件的(只有倒数第二bit为1)； 4： 节点的von不足最低质押门槛(只有倒数第三bit为1)； 8：节点被举报双签(只有倒数第四bit为1)); 16: 节点出块率低且达到移除条件(倒数第五位bit为1); 32: 节点主动发起撤销(只有倒数第六位bit为1)】</td></tr>
<tr><td>StakingEpoch</td><td>uint32(4bytes)</td><td>当前变更质押金额时的结算周期</td></tr>
<tr><td>StakingBlockNum</td><td>uint64(8bytes)</td><td>发起质押时的区块高度</td></tr>
<tr><td>Shares</td><td>string(0x十六进制字符串)</td><td>当前候选人总共质押加被委托的von数目</td></tr>
<tr><td>Released</td><td>string(0x十六进制字符串)</td><td>发起质押账户的自由金额的锁定期质押的von</td></tr>
<tr><td>ReleasedHes</td><td>string(0x十六进制字符串)</td><td>发起质押账户的自由金额的犹豫期质押的von</td></tr>
<tr><td>RestrictingPlan</td><td>string(0x十六进制字符串)</td><td>发起质押账户的锁仓金额的锁定期质押的von</td></tr>
<tr><td>RestrictingPlanHes</td><td>string(0x十六进制字符串)</td><td>发起质押账户的锁仓金额的犹豫期质押的von</td></tr>
<tr><td>ExternalId</td><td>string</td><td>外部Id(有长度限制，给第三方拉取节点描述的Id)</td></tr>
<tr><td>NodeName</td><td>string</td><td>被质押节点的名称(有长度限制，表示该节点的名称)</td></tr>
<tr><td>Website</td><td>string</td><td>节点的第三方主页(有长度限制，表示该节点的主页)</td></tr>
<tr><td>Details</td><td>string</td><td>节点的描述(有长度限制，表示该节点的描述)</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="治理"></a><a href="#治理" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>治理</h4>
<ul>
<li>提交文本提案，send 发送交易。</li>
</ul>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(2000)</td></tr>
<tr><td>verifier</td><td>discover.NodeID(64bytes)</td><td>提交提案的验证人</td></tr>
<tr><td>pIDID</td><td>string(uint64)</td><td>PIPID</td></tr>
</tbody>
</table>
<ul>
<li>提交升级提案，send 发送交易。</li>
</ul>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(2001)</td></tr>
<tr><td>verifier</td><td>discover.NodeID(64bytes)</td><td>提交提案的验证人</td></tr>
<tr><td>pIDID</td><td>string(uint64)</td><td>PIPID</td></tr>
<tr><td>newVersion</td><td>uint32(4bytes)</td><td>升级版本</td></tr>
<tr><td>endVotingRounds</td><td>uint64</td><td>投票共识轮数量。说明：假设提交提案的交易，被打包进块时的共识轮序号时round1，则提案投票截止块高，就是round1 + endVotingRounds这个共识轮的第230个块高（假设一个共识轮出块250，ppos揭榜提前20个块高，250，20都是可配置的 ），其中0 &lt; endVotingRounds &lt;= 4840（约为2周，实际论述根据配置可计算），且为整数）</td></tr>
</tbody>
</table>
<ul>
<li>提交取消提案，send 发送交易。</li>
</ul>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(2005)</td></tr>
<tr><td>verifier</td><td>discover.NodeID(64bytes)</td><td>提交提案的验证人</td></tr>
<tr><td>pIDID</td><td>string(uint64)</td><td>PIPID</td></tr>
<tr><td>endVotingRounds</td><td>uint64</td><td>投票共识轮数量。参考提交升级提案的说明，同时，此接口中此参数的值不能大于对应升级提案中的值</td></tr>
<tr><td>tobeCanceledProposalID</td><td>common.hash(32bytes)</td><td>待取消的升级提案ID</td></tr>
</tbody>
</table>
<ul>
<li>给提案投票，send 发送交易。</li>
</ul>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(2003)</td></tr>
<tr><td>verifier</td><td>discover.NodeID(64bytes)</td><td>投票验证人</td></tr>
<tr><td>proposalID</td><td>common.Hash(32bytes)</td><td>提案ID</td></tr>
<tr><td>option</td><td>uint8(1byte)</td><td>投票选项</td></tr>
<tr><td>programVersion</td><td>uint32(4bytes)</td><td>节点代码版本，有rpc的getProgramVersion接口获取</td></tr>
<tr><td>versionSign</td><td>common.VesionSign(65bytes)</td><td>代码版本签名，有rpc的getProgramVersion接口获取</td></tr>
</tbody>
</table>
<ul>
<li>版本声明，send 发送交易。</li>
</ul>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(2004)</td></tr>
<tr><td>verifier</td><td>discover.NodeID(64bytes)</td><td>声明的节点，只能是验证人/候选人</td></tr>
<tr><td>programVersion</td><td>uint32(4bytes)</td><td>声明的版本，有rpc的getProgramVersion接口获取</td></tr>
<tr><td>versionSign</td><td>common.VesionSign(65bytes)</td><td>声明的版本签名，有rpc的getProgramVersion接口获取</td></tr>
</tbody>
</table>
<ul>
<li>查询提案，call 查询</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>2100)</td></tr>
<tr><td>proposalID</td><td>common.Hash(32bytes)</td><td>提案ID</td></tr>
</tbody>
</table>
<p>返参：Proposal接口实现对象的json字符串</p>
<ul>
<li>查询提案结果，call 查询</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(2101)</td></tr>
<tr><td>proposalID</td><td>common.Hash(32bytes)</td><td>提案ID</td></tr>
</tbody>
</table>
<p>返参：TallyResult对象的json字符串</p>
<ul>
<li>查询提案列表，call 查询</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(2102)</td></tr>
</tbody>
</table>
<p>返参：Proposal接口实现对象列表的json字符串。</p>
<ul>
<li>查询节点的链生效版本，call 查询</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(2103)</td></tr>
</tbody>
</table>
<p>返参：版本号的json字符串，如{65536}，表示版本是：1.0.0。
解析时，需要把ver转成4个字节。主版本：第二个字节；小版本：第三个字节，patch版本，第四个字节。</p>
<ul>
<li>查询提案的累积可投票人数，call 查询</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(2105)</td></tr>
<tr><td>proposalID</td><td>common.Hash(32bytes)</td><td>提案ID</td></tr>
<tr><td>blockHash</td><td>common.Hash(32bytes)</td><td>块hash</td></tr>
</tbody>
</table>
<p>返参：
是个[]uint16数组</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td></td><td>uint16</td><td>累积可投票人数</td></tr>
<tr><td></td><td>uint16</td><td>赞成票数</td></tr>
<tr><td></td><td>uint16</td><td>反对票数</td></tr>
<tr><td></td><td>uint16</td><td>弃权票数</td></tr>
</tbody>
</table>
<p><strong>ProposalType 提案类型定义</strong></p>
<table>
<thead>
<tr><th>类型</th><th>定义</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>TextProposal</td><td>0x01</td><td>文本提案</td></tr>
<tr><td>VersionProposal</td><td>0x02</td><td>升级提案</td></tr>
<tr><td>CancelProposal</td><td>0x04</td><td>取消提案</td></tr>
</tbody>
</table>
<p><strong>ProposalStatus 提案状态定义</strong></p>
<p>对文本提案来说，有：0x01,0x02,0x03三种状态；
对升级提案来说，有：0x01,0x03,0x04,0x05,0x06四种状态。
对取消提案来说，有：0x01,0x02,0x03三种状态；</p>
<table>
<thead>
<tr><th>类型</th><th>定义</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>Voting</td><td>0x01</td><td>投票中</td></tr>
<tr><td>Pass</td><td>0x02</td><td>投票通过</td></tr>
<tr><td>Failed</td><td>0x03</td><td>投票失败</td></tr>
<tr><td>PreActive</td><td>0x04</td><td>（升级提案）预生效</td></tr>
<tr><td>Active</td><td>0x05</td><td>（升级提案）生效</td></tr>
<tr><td>Canceled</td><td>0x06</td><td>（升级提案）被取消</td></tr>
</tbody>
</table>
<p><strong>VoteOption 投票选项定义</strong></p>
<table>
<thead>
<tr><th>类型</th><th>定义</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>Yeas</td><td>0x01</td><td>支持</td></tr>
<tr><td>Nays</td><td>0x02</td><td>反对</td></tr>
<tr><td>Abstentions</td><td>0x03</td><td>弃权</td></tr>
</tbody>
</table>
<p><strong>Proposal接口 提案定义</strong></p>
<p>子类TextProposal：文本提案</p>
<p>字段说明：</p>
<table>
<thead>
<tr><th>字段</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>ProposalID</td><td>common.Hash(32bytes)</td><td>提案ID</td></tr>
<tr><td>Proposer</td><td>common.NodeID(64bytes)</td><td>提案节点ID</td></tr>
<tr><td>ProposalType</td><td>byte</td><td>提案类型， 0x01：文本提案； 0x02：升级提案；0x03参数提案；0x04取消提案。</td></tr>
<tr><td>PIPID</td><td>string</td><td>提案PIPID</td></tr>
<tr><td>SubmitBlock</td><td>8bytes</td><td>提交提案的块高</td></tr>
<tr><td>EndVotingBlock</td><td>8bytes</td><td>提案投票结束的块高，系统根据SubmitBlock</td></tr>
</tbody>
</table>
<p>子类VersionProposal：升级提案</p>
<p>字段说明：</p>
<table>
<thead>
<tr><th>字段</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>ProposalID</td><td>common.Hash(32bytes)</td><td>提案ID</td></tr>
<tr><td>Proposer</td><td>common.NodeID(64bytes)</td><td>提案节点ID</td></tr>
<tr><td>ProposalType</td><td>byte</td><td>提案类型， 0x01：文本提案； 0x02：升级提案；0x03参数提案；0x04取消提案。</td></tr>
<tr><td>PIPID</td><td>string</td><td>提案PIPID</td></tr>
<tr><td>SubmitBlock</td><td>8bytes</td><td>提交提案的块高</td></tr>
<tr><td>EndVotingRounds</td><td>8bytes</td><td>投票持续的共识周期数量</td></tr>
<tr><td>EndVotingBlock</td><td>8bytes</td><td>提案投票结束的块高，系统根据SubmitBlock，EndVotingRounds算出</td></tr>
<tr><td>ActiveBlock</td><td>8bytes</td><td>提案生效块高，系统根据EndVotingBlock算出</td></tr>
<tr><td>NewVersion</td><td>uint</td><td>升级版本</td></tr>
</tbody>
</table>
<p>子类CancelProposal：取消提案</p>
<p>字段说明：</p>
<table>
<thead>
<tr><th>字段</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>ProposalID</td><td>common.Hash(32bytes)</td><td>提案ID</td></tr>
<tr><td>Proposer</td><td>common.NodeID(64bytes)</td><td>提案节点ID</td></tr>
<tr><td>ProposalType</td><td>byte</td><td>提案类型， 0x01：文本提案； 0x02：升级提案；0x03参数提案；0x04取消提案。</td></tr>
<tr><td>PIPID</td><td>string</td><td>提案PIPID</td></tr>
<tr><td>SubmitBlock</td><td>8bytes</td><td>提交提案的块高</td></tr>
<tr><td>EndVotingRounds</td><td>8bytes</td><td>投票持续的共识周期数量</td></tr>
<tr><td>EndVotingBlock</td><td>8bytes</td><td>提案投票结束的块高，系统根据SubmitBlock，EndVotingRounds算出</td></tr>
<tr><td>TobeCanceled</td><td>common.Hash(32bytes)</td><td>提案要取消的升级提案ID</td></tr>
</tbody>
</table>
<p><strong>Vote 投票定义</strong></p>
<table>
<thead>
<tr><th>字段</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>voter</td><td>64bytes</td><td>投票验证人</td></tr>
<tr><td>proposalID</td><td>common.Hash(32bytes)</td><td>提案ID</td></tr>
<tr><td>option</td><td>VoteOption</td><td>投票选项</td></tr>
</tbody>
</table>
<p><strong>TallyResult 投票结果定义</strong></p>
<table>
<thead>
<tr><th>字段</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>proposalID</td><td>common.Hash(32bytes)</td><td>提案ID</td></tr>
<tr><td>yeas</td><td>uint16(2bytes)</td><td>赞成票</td></tr>
<tr><td>nays</td><td>uint16(2bytes)</td><td>反对票</td></tr>
<tr><td>abstentions</td><td>uint16(2bytes)</td><td>弃权票</td></tr>
<tr><td>accuVerifiers</td><td>uint16(2bytes)</td><td>在整个投票期内有投票资格的验证人总数</td></tr>
<tr><td>status</td><td>byte</td><td>状态</td></tr>
<tr><td>canceledBy</td><td>common.Hash(32bytes)</td><td>当status=0x06时，记录发起取消的ProposalID</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="举报惩罚"></a><a href="#举报惩罚" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>举报惩罚</h4>
<ul>
<li>举报双签，send 发送交易。</li>
</ul>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>描述</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(3000)</td></tr>
<tr><td>typ</td><td>uint8</td><td>代表双签类型，<br />1：prepareBlock，2：prepareVote，3：viewChange</td></tr>
<tr><td>data</td><td>string</td><td>单个证据的json值，格式参照[RPC接口Evidences][evidences_interface]</td></tr>
</tbody>
</table>
<ul>
<li>查询节点是否已被举报过多签，call 查询</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>描述</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(3001)</td></tr>
<tr><td>typ</td><td>uint32</td><td>代表双签类型，<br />1：prepareBlock，2：prepareVote，3：viewChange</td></tr>
<tr><td>addr</td><td>20bytes</td><td>举报的节点地址</td></tr>
<tr><td>blockNumber</td><td>uint64</td><td>多签的块高</td></tr>
</tbody>
</table>
<p>回参：</p>
<table>
<thead>
<tr><th>类型</th><th>描述</th></tr>
</thead>
<tbody>
<tr><td>16进制</td><td>举报的交易Hash</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="锁仓"></a><a href="#锁仓" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>锁仓</h4>
<ul>
<li>创建锁仓计划，send 发送交易。</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>account</td><td>20bytes</td><td><code>锁仓释放到账账户</code></td></tr>
<tr><td>plan</td><td>[]RestrictingPlan</td><td>plan 为 RestrictingPlan 类型的列表（数组），RestrictingPlan 定义如下：<br>type RestrictingPlan struct { <br/>    Epoch uint64<br/>    Amount：*big.Int<br/>}<br/>其中，Epoch：表示结算周期的倍数。与每个结算周期出块数的乘积表示在目标区块高度上释放锁定的资金。Epoch * 每周期的区块数至少要大于最高不可逆区块高度。<br>Amount：表示目标区块上待释放的金额。</td></tr>
</tbody>
</table>
<ul>
<li>获取锁仓信息，call 查询</li>
</ul>
<p>注：本接口支持获取历史数据，请求时可附带块高，默认情况下查询最新块的数据。</p>
<p>入参：</p>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>account</td><td>20bytes</td><td><code>锁仓释放到账账户</code></td></tr>
</tbody>
</table>
<p>返参：</p>
<p>返回参数为下面字段的 json 格式字符串</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>balance</td><td>string(0x十六进制字符串)</td><td>总锁仓余额-已释放金额</td></tr>
<tr><td>pledge</td><td>string(0x十六进制字符串)</td><td>质押/抵押金额</td></tr>
<tr><td>debt</td><td>string(0x十六进制字符串)</td><td>欠释放金额</td></tr>
<tr><td>plans</td><td>bytes</td><td>锁仓分录信息，json数组：[{&quot;blockNumber&quot;:&quot;&quot;,&quot;amount&quot;:&quot;&quot;},...,{&quot;blockNumber&quot;:&quot;&quot;,&quot;amount&quot;:&quot;&quot;}]。其中：<br/>blockNumber：*big.Int，释放区块高度<br/>amount：\string(0x十六进制字符串)，释放金额</td></tr>
</tbody>
</table>
<h4><a class="anchor" aria-hidden="true" id="奖励接口"></a><a href="#奖励接口" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>奖励接口</h4>
<ul>
<li>提取账户当前所有的可提取的委托奖励，send 发送交易。</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(5000)</td></tr>
</tbody>
</table>
<p>注:交易结果存储在交易回执的logs.data中，如交易成功，存储 rlp.Encode([][]byte{[]byte(状态码0)， rlp.Encode(<code>节点收益列表</code>) })，如交易不成功，与之前方式一致。</p>
<p>返回的<code>节点收益列表</code>为数组</p>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>NodeID</td><td>discover.NodeID(64bytes)</td><td>节点ID</td></tr>
<tr><td>StakingNum</td><td>uint64</td><td>节点的质押块高</td></tr>
<tr><td>Reward</td><td>*big.Int</td><td>领取到的收益</td></tr>
</tbody>
</table>
<ul>
<li>查询账户在各节点未提取委托奖励，call 查询。</li>
</ul>
<p>入参：</p>
<table>
<thead>
<tr><th>参数</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>funcType</td><td>uint16(2bytes)</td><td>代表方法类型码(5100)</td></tr>
<tr><td>address</td><td>20bytes</td><td><code>要查询账户的地址</code></td></tr>
<tr><td>nodeIDs</td><td>[]discover.NodeID</td><td><code>要查询的节点，如果为空则查询账户委托的所有节点</code></td></tr>
</tbody>
</table>
<p>返参：</p>
<p>是个[]Reward数组</p>
<table>
<thead>
<tr><th>名称</th><th>类型</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>nodeID</td><td>discover.NodeID(64bytes)</td><td>节点ID</td></tr>
<tr><td>stakingNum</td><td>uint64</td><td>节点的质押块高</td></tr>
<tr><td>reward</td><td>string(0x十六进制字符串)</td><td>未领取的委托收益</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="内置合约错误码说明"></a><a href="#内置合约错误码说明" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>内置合约错误码说明</h3>
<table>
<thead>
<tr><th>错误码</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>301000</td><td>Wrong bls public key</td></tr>
<tr><td>301001</td><td>Wrong bls public key proof</td></tr>
<tr><td>301002</td><td>The Description length is wrong</td></tr>
<tr><td>301003</td><td>The program version sign is wrong</td></tr>
<tr><td>301004</td><td>The program version of the relates node's is too low</td></tr>
<tr><td>301005</td><td>DeclareVersion is failed on create staking</td></tr>
<tr><td>301006</td><td>The address must be the same as initiated staking</td></tr>
<tr><td>301100</td><td>Staking deposit too low</td></tr>
<tr><td>301101</td><td>This candidate is already exist</td></tr>
<tr><td>301102</td><td>This candidate is not exist</td></tr>
<tr><td>301103</td><td>This candidate status was invalided</td></tr>
<tr><td>301104</td><td>IncreaseStake von is too low</td></tr>
<tr><td>301105</td><td>Delegate deposit too low</td></tr>
<tr><td>301106</td><td>The account is not allowed to be used for delegating</td></tr>
<tr><td>301107</td><td>The candidate does not accept the delegation</td></tr>
<tr><td>301108</td><td>Withdrew delegation von is too low</td></tr>
<tr><td>301109</td><td>This delegation is not exist</td></tr>
<tr><td>301110</td><td>The von operation type is wrong</td></tr>
<tr><td>301111</td><td>The von of account is not enough</td></tr>
<tr><td>301112</td><td>The blockNumber is disordered</td></tr>
<tr><td>301113</td><td>The von of delegation is not enough</td></tr>
<tr><td>301114</td><td>Withdrew delegation von calculation is wrong</td></tr>
<tr><td>301115</td><td>The validator is not exist</td></tr>
<tr><td>301116</td><td>The fn params is wrong</td></tr>
<tr><td>301117</td><td>The slashing type is wrong</td></tr>
<tr><td>301118</td><td>Slashing amount is overflow</td></tr>
<tr><td>301119</td><td>Slashing candidate von calculate is wrong</td></tr>
<tr><td>301200</td><td>Getting verifierList is failed</td></tr>
<tr><td>301201</td><td>Getting validatorList is failed</td></tr>
<tr><td>301202</td><td>Getting candidateList is failed</td></tr>
<tr><td>301203</td><td>Getting related of delegate is failed</td></tr>
<tr><td>301204</td><td>Query candidate info failed</td></tr>
<tr><td>301205</td><td>Query delegate info failed</td></tr>
</tbody>
</table>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/zh-CN/Python_SDK"><span class="arrow-prev">← </span><span>Python SDK</span></a><a class="docs-next button" href="/docs/zh-CN/Java_SDK"><span>Java SDK</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#web3js-调用接口">Web3.js 调用接口</a><ul class="toc-headings"><li><a href="#准备工作">准备工作</a></li><li><a href="#详细使用">详细使用</a></li></ul></li><li><a href="#内置合约调用指南">内置合约调用指南</a><ul class="toc-headings"><li><a href="#概述">概述</a></li><li><a href="#简要使用">简要使用</a></li><li><a href="#api-调用详细说明">API 调用详细说明</a></li><li><a href="#内置合约入参详细说明">内置合约入参详细说明</a></li><li><a href="#内置合约错误码说明">内置合约错误码说明</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="https://www.platon.network/" class="nav-home"><img src="/docs/img/PlatON-logo2.svg" alt="PlatON" width="66" height="58"/></a><div><a href="https://www.platon.network/">PlatON network</a><a href="https://latticex.foundation/home">Lattice.Foundation</a><a href="https://forum.latticex.foundation/">Forum</a></div><div class="gitstar"><a class="github-button" href="https://github.com/PlatONnetwork/PlatON-Go" data-color-scheme="no-preference: light; light: light; dark: light;" data-icon="octicon-star" data-size="small" data-show-count="true" aria-label="Star PlatONnetwork/PlatON-Go on GitHub">Star</a></div></section><section class="copyright">COPYRIGHT  © 2021 PLATON NETWORK.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'c2ce4863993980eb049b661be250c773',
                indexName: 'platon',
                inputSelector: '#search_input_react',
                algoliaOptions: {"hitsPerPage":10}
              });
            </script></body></html>