"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[719],{3905:function(n,t,e){e.d(t,{Zo:function(){return i},kt:function(){return A}});var r=e(7294);function a(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function l(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function o(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?l(Object(e),!0).forEach((function(t){a(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function d(n,t){if(null==n)return{};var e,r,a=function(n,t){if(null==n)return{};var e,r,a={},l=Object.keys(n);for(r=0;r<l.length;r++)e=l[r],t.indexOf(e)>=0||(a[e]=n[e]);return a}(n,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)e=l[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(a[e]=n[e])}return a}var c=r.createContext({}),s=function(n){var t=r.useContext(c),e=t;return n&&(e="function"==typeof n?n(t):o(o({},t),n)),e},i=function(n){var t=s(n.components);return r.createElement(c.Provider,{value:t},n.children)},p={inlineCode:"code",wrapper:function(n){var t=n.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(n,t){var e=n.components,a=n.mdxType,l=n.originalType,c=n.parentName,i=d(n,["components","mdxType","originalType","parentName"]),u=s(e),A=a,f=u["".concat(c,".").concat(A)]||u[A]||p[A]||l;return e?r.createElement(f,o(o({ref:t},i),{},{components:e})):r.createElement(f,o({ref:t},i))}));function A(n,t){var e=arguments,a=t&&t.mdxType;if("string"==typeof n||a){var l=e.length,o=new Array(l);o[0]=u;var d={};for(var c in t)hasOwnProperty.call(t,c)&&(d[c]=t[c]);d.originalType=n,d.mdxType="string"==typeof n?n:a,o[1]=d;for(var s=2;s<l;s++)o[s]=e[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,e)}u.displayName="MDXCreateElement"},1205:function(n,t,e){e.r(t),e.d(t,{contentTitle:function(){return c},default:function(){return u},frontMatter:function(){return d},metadata:function(){return s},toc:function(){return i}});var r=e(7462),a=e(3366),l=(e(7294),e(3905)),o=["components"],d={id:"WASM_Contract_5",title:"PlatON WASM contract (\u4e94) - \u4ee3\u7406\u673a\u5236",sidebar_label:"WASM\u4ee3\u7406\u673a\u5236"},c=void 0,s={unversionedId:"WASM_Contract_5",id:"WASM_Contract_5",isDocsHomePage:!1,title:"PlatON WASM contract (\u4e94) - \u4ee3\u7406\u673a\u5236",description:"\u6982\u8ff0",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/PlatON WASM\u4e94-\u4ee3\u7406\u673a\u5236.md",sourceDirName:".",slug:"/WASM_Contract_5",permalink:"/docs/zh-CN/WASM_Contract_5",editUrl:"https://github.com/PlatONnetwork/docs/tree/master/website/i18n/zh-CN/docusaurus-plugin-content-docs/current/PlatON WASM\u4e94-\u4ee3\u7406\u673a\u5236.md",version:"current",frontMatter:{id:"WASM_Contract_5",title:"PlatON WASM contract (\u4e94) - \u4ee3\u7406\u673a\u5236",sidebar_label:"WASM\u4ee3\u7406\u673a\u5236"},sidebar:"docs",previous:{title:"WASM\u53c2\u6570\u4f20\u9012\u8be6\u89e3",permalink:"/docs/zh-CN/WASM_Contract_4"},next:{title:"WASM\u4ee3\u7406\u673a\u5236\u4e2d\u8bbf\u95ee\u5408\u7ea6\u4e8b\u4ef6",permalink:"/docs/zh-CN/WASM_Contract_6"}},i=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",children:[]},{value:"\u793a\u4f8b\u8bf4\u660e",id:"\u793a\u4f8b\u8bf4\u660e",children:[{value:"contractProxy",id:"contractproxy",children:[]},{value:"\u4e1a\u52a1\u5408\u7ea61\uff08calcContract\uff09",id:"\u4e1a\u52a1\u5408\u7ea61calccontract",children:[]},{value:"\u4e1a\u52a1\u5408\u7ea62\uff08calcContract\uff09",id:"\u4e1a\u52a1\u5408\u7ea62calccontract",children:[]}]},{value:"\u5408\u7ea6\u4ee3\u7406\u673a\u5236\u7684\u8fd0\u884c\u673a\u5236",id:"\u5408\u7ea6\u4ee3\u7406\u673a\u5236\u7684\u8fd0\u884c\u673a\u5236",children:[]},{value:"\u5408\u7ea6\u90e8\u7f72",id:"\u5408\u7ea6\u90e8\u7f72",children:[]},{value:"\u8bbf\u95ee\u793a\u4f8b",id:"\u8bbf\u95ee\u793a\u4f8b",children:[{value:"\u4e1a\u52a1\u5408\u7ea61",id:"\u4e1a\u52a1\u5408\u7ea61",children:[]},{value:"\u4e1a\u52a1\u5408\u7ea62",id:"\u4e1a\u52a1\u5408\u7ea62",children:[]}]}],p={toc:i};function u(n){var t=n.components,d=(0,a.Z)(n,o);return(0,l.kt)("wrapper",(0,r.Z)({},p,d,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,l.kt)("p",null,"\u4ece\u672c\u7bc7\u5f00\u59cb\uff0cCross\u6280\u672f\u56e2\u961f\u5c06\u5f00\u59cb\u5bf9PlatON\u4e0aWASM\u667a\u80fd\u5408\u7ea6\u7684\u4e00\u4e9b\u8fdb\u9636\u4f7f\u7528\u8fdb\u884c\u8bb2\u89e3\u3002\n\u7ecf\u7f16\u8bd1\u90e8\u7f72\u540e\u7684\u533a\u5757\u94fe\u667a\u80fd\u5408\u7ea6\u672c\u8d28\u4e0a\u662f\u8bb0\u5f55\u5728\u94fe\u4e0a\u7684\u4e00\u6bb5\u5b57\u8282\u7801\uff0c\u56e0\u4e3a\u533a\u5757\u94fe\u4e0d\u53ef\u7be1\u6539\u7684\u7279\u70b9\uff0c\u5408\u7ea6\u90e8\u7f72\u540e\u5b9e\u9645\u4e0a\u662f\u201c\u6c38\u8fdc\u201d\u4fdd\u5b58\u5728\u4e86\u94fe\u4e0a\uff0c\u800c\u667a\u80fd\u5408\u7ea6\u4f5c\u4e3aDApp\u7684\u201c\u540e\u53f0\u201d\uff0c\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\uff0c\u7531\u4e8e\u5e94\u7528\u529f\u80fd\u7684\u8fed\u4ee3\u66f4\u65b0\uff0c\u5176\u66f4\u6539\u8fed\u4ee3\u7684\u9700\u6c42\u51e0\u4e4e\u662f\u5fc5\u7136\u7684\u3002\u76ee\u524d\uff0cPlatON\u4e0a\u7684WASM\u5408\u7ea6\u5c1a\u672a\u516c\u5f00\u76f4\u63a5\u8fdb\u884c\u5408\u7ea6\u5728\u7ebf\u66f4\u65b0\u7684\u5e95\u5c42\u673a\u5236\uff0c\u672c\u7bc7\u5185\u5bb9\u5c06\u63d0\u4f9b\u4e00\u79cd\u53ef\u5e94\u7528\u4e8ePlatON\u4e0aWASM\u667a\u80fd\u5408\u7ea6\u5728\u7ebf\u5347\u7ea7\u7684\u4ee3\u7406\u673a\u5236\uff0c\u6709\u5173\u5408\u7ea6\u5728\u7ebf\u5347\u7ea7\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\uff0c\u5c06\u5728\u540e\u7eed\u6587\u7ae0\u4e2d\u8fdb\u884c\u8bb2\u89e3\u3002"),(0,l.kt)("h2",{id:"\u793a\u4f8b\u8bf4\u660e"},"\u793a\u4f8b\u8bf4\u660e"),(0,l.kt)("p",null,"\u672c\u6587\u793a\u4f8b\u7531\u4e09\u4e2a\u5408\u7ea6\u7ec4\u6210\uff1acontractProxy\uff08\u4ee3\u7406\u5408\u7ea6\uff09\u3001calcContract\uff08\u4e1a\u52a1\u5408\u7ea61\uff09\u3001calcContract2\uff08\u4e1a\u52a1\u5408\u7ea62\uff09\u7ec4\u6210\u3002"),(0,l.kt)("h3",{id:"contractproxy"},"contractProxy"),(0,l.kt)("p",null,"contractProxy\u5408\u7ea6\u7684\u529f\u80fd\u5206\u4e3a\u4e24\u90e8\u5206\uff1a\u4e00\u662f\u5b8c\u6210\u4ee3\u7406\u7ba1\u7406\u7684\u76f8\u5173\u529f\u80fd\uff0c\u4e8c\u662f\u5bf9\u4e1a\u52a1\u63a5\u53e3\u7684\u8c03\u7528\uff0c\u5408\u7ea6\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'#include <platon/platon.hpp>\n#include <string>\n\n//this proxy instance can be proxy for only one contract at a time\n//real contract shall be deployed before this proxy is deployed\nCONTRACT calc_contract_proxy : platon::Contract{\npublic:\n    PLATON_EVENT1(incalcAdd, std::string, int)\n    PLATON_EVENT1(inmakeSum, std::string, int)\n\n    //the input param is for Security considerations\n    ACTION void init(std::string& contractAddr){\n        auto rst = platon::make_address(contractAddr);\n        //when the contractAddr is illegal, the proxy can not be used\n        if (!rst.second){\n            platon::internal::platon_throw("deploy failed!");\n        }\n        else{\n            _contractAddr.self() = rst;\n        }\n    }\n\n    //contract can be altered. But the caller must be current contract\n    ACTION bool RegisterContract(std::string& contractAddr){\n        //can\'t be called when owner is illegal\n        if (!_contractAddr.self().second){\n            platon::internal::platon_throw("this contract init failed!");\n            return false;\n        }\n\n        platon::Address senderAddr = platon::platon_caller();\n\n        //if caller is the owner, replace the owner address\n        if (senderAddr != _contractAddr.self().first){\n            return false;\n        }\n\n        auto result = platon::make_address(contractAddr);\n        if (!result.second){\n            return false;\n        }\n\n        _contractAddr.self() = result;\n        return true;\n    }\n\n    //the following methods are for represented contracts\n    //the interfaces are agree with the represented contracts\n    ACTION std::pair<int, bool> calcAdd(int a, int b){\n        //can\'t be called when owner is illegal\n        if (!(_contractAddr.self().second)){\n            platon::internal::platon_throw("this contract init failed!");\n            return std::pair<int, bool>(0, false);\n        }\n\n        //make call to real contract\n        auto result = platon::platon_call_with_return_value<int>(_contractAddr.self().first, (unsigned int)(0), (unsigned int)(0), "calcAdd", a, b);\n        PLATON_EMIT_EVENT1(incalcAdd, "calcAdd" , result.first);\n        return result;\n    }\n\n    CONST std::pair<int, bool> const_calcAdd(int a, int b){\n        //can\'t be called when owner is illegal\n        if (!(_contractAddr.self().second)){\n                platon::internal::platon_throw("this contract init failed!");\n                return std::pair<int, bool>(0, false);\n        }\n\n        //make call to real contract\n        auto result = platon::platon_call_with_return_value<int>(_contractAddr.self().first, (unsigned int)(0), (unsigned int)(0), "const_calcAdd", a, b);\n        return result;\n    }\n\n    ACTION std::pair<int, bool> makeSum(std::vector<int>& eles){\n        //can\'t be called when owner is illegal\n        if (!(_contractAddr.self().second)){\n            platon::internal::platon_throw("this contract init failed!");\n            return std::pair<int, bool>(0, false);\n        }\n\n        //make call to real contract\n        unsigned int len = eles.size();\n        if (0 == len){\n            PLATON_EMIT_EVENT1(inmakeSum, "makeSum" , 0);\n            return std::pair<int, bool>(0, true);\n        }\n        else{\n            //call methods\n            auto result = platon::platon_call_with_return_value<int>(_contractAddr.self().first, (unsigned int)(0), (unsigned int)(0), "makeSum", eles);\n            PLATON_EMIT_EVENT1(inmakeSum, "makeSum" , result.first);\n            return result;\n        }\n    }\n\nprivate:\n    platon::StorageType<"contract"_n, std::pair<platon::Address, bool>>            _contractAddr;\n};\nPLATON_DISPATCH(calc_contract_proxy, (init)(RegisterContract)(calcAdd)(const_calcAdd)(makeSum))\n')),(0,l.kt)("h4",{id:"\u63a5\u53e3\u8bf4\u660e"},"\u63a5\u53e3\u8bf4\u660e\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"init\uff1a\u521d\u59cb\u5316\uff0c\u90e8\u7f72\u65f6\u8c03\u7528\uff0c\u9700\u8981\u8f93\u5165\u6b63\u5e38\u7684lat\u5730\u5740\uff08\u6700\u597d\u662f\u4e1a\u52a1\u5408\u7ea6\uff0c\u4e5f\u53ef\u4ee5\u662f\u666e\u901a\u5730\u5740\uff09\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u4ee3\u7406\u7ba1\u7406\u76f8\u5173\u63a5\u53e3\uff1a")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"RegisterContract\uff1a\u66f4\u6539\u4e1a\u52a1\u5408\u7ea6\u5730\u5740\u65f6\u8c03\u7528\uff0c\u8c03\u7528\u8005\u5fc5\u987b\u662f\u5f53\u524d\u5730\u5740\u7684\u62e5\u6709\u8005\uff1b")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"\u4e1a\u52a1\u4ee3\u7406\u8c03\u7528\u63a5\u53e3\uff1a")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"calcAdd\u3001const_calcAdd\u3001makeSum\uff0c\u901a\u8fc7\u8c03\u7528\u771f\u5b9e\u7684\u4e1a\u52a1\u5408\u7ea6\u63a5\u53e3\uff0c\u5b8c\u6210\u4e1a\u52a1\u64cd\u4f5c\uff0c\u83b7\u53d6\u6267\u884c\u7ed3\u679c\uff0c\u5e76\u901a\u8fc7\u4e8b\u4ef6\u673a\u5236\u8fd4\u56de\u4e1a\u52a1\u6267\u884c\u7ed3\u679c\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u8bf4\u660e\uff1a\u5728\u672c\u6587\u6848\u4f8b\u4e2d\uff0c\u4ee3\u7406\u5408\u7ea6\u4e2d\u7684\u4e1a\u52a1\u4ee3\u7406\u63a5\u53e3\uff0c\u9700\u8981\u4e0e\u4e1a\u52a1\u5408\u7ea6\u4e2d\u7684\u76f8\u5173\u63a5\u53e3\u4e00\u81f4\uff0c\u5b9e\u9645\u4e0a\uff0c\u53ef\u4ee5\u5f00\u53d1\u66f4\u52a0\u901a\u7528\u7684\u65b9\u5f0f\uff0c\u4f8b\u5982\u5c06\u4e1a\u52a1\u5408\u7ea6\u63a5\u53e3\u7684\u4ee3\u7406\u8c03\u7528\u5c01\u88c5\u5230\u4e00\u4e2a\u53ef\u53d8\u53c2\u6570\u7684\u63a5\u53e3\u4e2d\u5b8c\u6210\u3002")),(0,l.kt)("h3",{id:"\u4e1a\u52a1\u5408\u7ea61calccontract"},"\u4e1a\u52a1\u5408\u7ea61\uff08calcContract\uff09"),(0,l.kt)("p",null,"\u4e1a\u52a1\u5408\u7ea61\u5b8c\u6210\u5b9e\u9645\u7684\u4e1a\u52a1\u64cd\u4f5c\uff0c\u540c\u65f6\u4e5f\u9700\u8981\u5b9e\u73b0\u4e00\u5b9a\u7684\u4ee3\u7406\u7ba1\u7406\u64cd\u4f5c\u529f\u80fd\u3002\u4ece\u4e1a\u52a1\u5408\u7ea61\u7684\u4ee3\u7801\u53ef\u4ee5\u770b\u5230 \uff0c\u4f5c\u4e3a\u88ab\u4ee3\u7406\u5408\u7ea6\uff0c\u5728\u5b9e\u73b0\u7f3a\u5c11\u5fc5\u8981\u7684\u4fdd\u62a4\u673a\u5236\u3002\u5408\u7ea6\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'#include <platon/platon.hpp>\n#include <string>\n#include <vector>\n\nCONTRACT calc_contract : public platon::Contract{\npublic:\n    ACTION void init(){\n        //the owner of the contract is best to be the operator of the deployment\n        //in this instance, owner address can not be changed\n        _ownerAddr.self() = std::pair<platon::Address, bool>(platon::platon_caller(), true);\n    }\n\n    //methods for proxy mechanism\n    //this methods shall be called only after the proxy contract is deployed\n    ACTION bool RegisterProxy(const std::string& proxyAddr){\n        //set and register the proxy address\n        auto p_Addr = platon::make_address(proxyAddr);\n        if (!p_Addr.second){\n            _proxyAddr.self() = std::pair<platon::Address, bool>(platon::Address(), false);\n            platon::internal::platon_throw("register proxy failed! illegal proxy address!");\n            return false;\n        }\n        else{\n            _proxyAddr.self() = p_Addr;\n            return true;\n        }\n    }\n\n    CONST std::string GetProxyAddress(){\n        return _proxyAddr.self().first.toString();\n    }\n\n    CONST std::string GetOwnerAddress(){\n        return _ownerAddr.self().first.toString();\n    }\n\n    //the param is the next contract address the proxy really use\n    ACTION bool updateContract(const std::string& contractAddr){\n        //only owner can updateContract\n        auto send_Addr = platon::platon_caller();\n        if (_ownerAddr.self().first != send_Addr){\n            return false;\n        }\n\n        //check the contract address\n        auto c_Addr = platon::make_address(contractAddr);\n        if (!c_Addr.second){\n            return false;\n        }\n\n        //call proxy\n        if (!_proxyAddr.self().second){\n            return false;\n        }\n\n        auto result = platon::platon_call_with_return_value<bool>(_proxyAddr.self().first, (unsigned int)(0), (unsigned int)(0), "RegisterOwner", contractAddr);\n        return result.second;\n    }\n\n    //calculation methods\n    ACTION int calcAdd(int a, int b){\n        return a + b;\n    }\n\n    CONST int const_calcAdd(int a, int b){\n        return a + b;\n    }\n\n    ACTION int makeSum(std::vector<int>& eles){\n        int rst = 0;\n        for (auto itr = eles.begin(); itr != eles.end(); ++itr){\n            rst += *itr;\n        }\n        return rst;\n    }\n\nprivate:\n    //contracts using proxy mechanism are needed to using owner address principle.\n    platon::StorageType<"owner"_n, std::pair<platon::Address, bool>>            _ownerAddr;\n    \n    platon::StorageType<"proxy"_n, std::pair<platon::Address, bool>>            _proxyAddr;\n};\n\nPLATON_DISPATCH(calc_contract, (init)(RegisterProxy)(GetProxyAddress)(GetOwnerAddress)(updateContract)(calcAdd)(const_calcAdd)(makeSum))\n')),(0,l.kt)("h4",{id:"\u63a5\u53e3\u8bf4\u660e-1"},"\u63a5\u53e3\u8bf4\u660e\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"init\uff1a\u521d\u59cb\u5316owner\uff0cowner\u5730\u5740\u5373\u5408\u7ea6\u7684\u90e8\u7f72\u8005\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u4ee3\u7406\u7ba1\u7406\u63a5\u53e3\uff1a")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"RegisterProxy\uff1a\u6ce8\u518c\u4ee3\u7406\u5408\u7ea6\u5730\u5740\uff0c\u5728\u4e1a\u52a1\u5408\u7ea61\u4e2d\u6ca1\u6709\u5bf9\u8c03\u7528\u8005\u8fdb\u884c\u9650\u5236\uff0c\u8fd9\u4f1a\u5e26\u6765\u5b89\u5168\u9690\u60a3\uff1b"),(0,l.kt)("li",{parentName:"ul"},"updateContract\uff1a\u5411\u4ee3\u7406\u5408\u7ea6\u7533\u8bf7\u5730\u5740\u53d8\u66f4\u8bf7\u6c42\uff0c\u5c06\u4e1a\u52a1\u5408\u7ea6\u8f6c\u79fb\u81f3\u5176\u4ed6\u7684\u4e1a\u52a1\u5408\u7ea6\uff0c\u8fd9\u662f\u5408\u7ea6\u5728\u7ebf\u66f4\u65b0\u7684\u4e00\u4e2a\u91cd\u8981\u673a\u5236\u3002\u63a5\u53e3\u6267\u884c\u6210\u529f\u540e\uff0c\u672c\u5408\u7ea6\u4e0d\u518d\u88ab\u4ee3\u7406\uff0c\u5728\u4e1a\u52a1\u5408\u7ea61\u4e2d\uff0c\u6ca1\u6709\u5bf9\u672c\u5730\u4fdd\u5b58\u7684\u4ee3\u7406\u5730\u5740\u8fdb\u884c\u6e05\u7406\uff0c\u8fd9\u4e5f\u4f1a\u5e26\u6765\u4e00\u5b9a\u7684\u5b89\u5168\u9690\u60a3\uff1b")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"\u4e1a\u52a1\u529f\u80fd\u63a5\u53e3\uff1a")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"calcAdd\u3001const_calcAdd\u3001makeSum\uff0c\u6267\u884c\u5b9e\u9645\u7684\u4e1a\u52a1\u64cd\u4f5c\u3002\u5728\u4e1a\u52a1\u5408\u7ea61\u4e2d\uff0c\u6ca1\u6709\u5bf9\u8c03\u7528\u8005\u8fdb\u884c\u9650\u5236\uff0c\u8fd9\u4e5f\u4f1a\u5e26\u6765\u5b89\u5168\u9690\u60a3\u3002")),(0,l.kt)("h3",{id:"\u4e1a\u52a1\u5408\u7ea62calccontract"},"\u4e1a\u52a1\u5408\u7ea62\uff08calcContract\uff09"),(0,l.kt)("p",null,"\u4e1a\u52a1\u5408\u7ea62\u5b8c\u6210\u5b9e\u9645\u7684\u4e1a\u52a1\u64cd\u4f5c\uff0c\u540c\u65f6\u4e5f\u9700\u8981\u5b9e\u73b0\u4e00\u5b9a\u7684\u4ee3\u7406\u7ba1\u7406\u64cd\u4f5c\u529f\u80fd\u3002\u4e1a\u52a1\u5408\u7ea62\u91c7\u7528\u4e86\u8f83\u4e3a\u89c4\u8303\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u5176\u4e1a\u52a1\u63a5\u53e3\u53ea\u80fd\u901a\u8fc7\u4ee3\u7406\u8fdb\u884c\u8bbf\u95ee\u3002\u5408\u7ea6\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'#include <platon/platon.hpp>\n#include <string>\n#include <vector>\n\nCONTRACT calc_contract2 : public platon::Contract\n{\npublic:\n    ACTION void init(){\n        //the owner of the contract is best to be the operator of the deployment\n        //in this instance, owner address can not be changed\n        _ownerAddr.self() = std::pair<platon::Address, bool>(platon::platon_caller(), true);\n\n        //init the proxy\n        _proxyAddr.self() = std::pair<platon::Address, bool>(platon::Address(), false);\n    }\n\n    //this methods shall be called only after the proxy contract is deployed\n    ACTION bool RegisterProxy(const std::string& proxyAddr){\n        //only owner can Register Proxy\n        auto send_Addr = platon::platon_caller();\n        if (_ownerAddr.self().first != send_Addr){\n            return false;\n        }\n\n        //set and register the proxy address\n        auto p_Addr = platon::make_address(proxyAddr);\n        if (!p_Addr.second){\n            _proxyAddr.self() = std::pair<platon::Address, bool>(platon::Address(), false);\n            platon::internal::platon_throw("register proxy failed! illegal proxy address!");\n            return false;\n        }\n        else{\n            _proxyAddr.self() = p_Addr;\n            return true;\n        }\n    }\n\n    CONST std::string GetProxyAddress(){\n        if (_proxyAddr.self().second){\n            return _proxyAddr.self().first.toString();\n        }\n        else {\n            return "proxy not initialized!";\n        }\n    }\n\n    CONST std::string GetOwnerAddress(){\n        return _ownerAddr.self().first.toString();\n    }\n\n    //methods for proxy mechanism\n    //the param is the next contract address the proxy really use\n    ACTION bool updateContract(const std::string& contractAddr){\n        //only owner can updateContract\n        auto send_Addr = platon::platon_caller();\n        if (_ownerAddr.self().first != send_Addr){\n            return false;\n        }\n\n        //check the contract address\n        auto c_Addr = platon::make_address(contractAddr);\n        if (!c_Addr.second){\n            return false;\n        }\n\n        //call proxy\n        if (!_proxyAddr.self().second){\n            return false;\n        }\n\n        auto result = platon::platon_call_with_return_value<bool>(_proxyAddr.self().first, (unsigned int)(0), (unsigned int)(0), "RegisterContract", contractAddr);\n\n        if (!result.second){\n            return false;\n        }\n\n        //clear the proxy address\n        _proxyAddr.self() = std::pair<platon::Address, bool>(platon::Address(), false);\n        return result.second;\n    }\n\n    //calculation methods, the interface must be the same with the proxy\n    ACTION int calcAdd(int a, int b){\n        if (!_proxyAddr.self().second){\n                return -999999;\n        }\n\n        //only proxy could call\n        auto send_Addr = platon::platon_caller();\n        if (_proxyAddr.self().first != send_Addr){\n            return -999999;\n        }\n\n        //be different with contract1\n        return a + b + 1000000;\n    }\n\n    CONST int const_calcAdd(int a, int b){\n        if (!_proxyAddr.self().second){\n                return -999999;\n        }\n\n        //only proxy could call\n        auto send_Addr = platon::platon_caller();\n        if (_proxyAddr.self().first != send_Addr){\n            return -999999;\n        }\n        return a + b + 1000000;\n    }\n\n    ACTION int makeSum(std::vector<int>& eles){\n        if (!_proxyAddr.self().second){\n                return -999999;\n        }\n\n        //only proxy could call\n        auto send_Addr = platon::platon_caller();\n        if (_proxyAddr.self().first != send_Addr){\n            return -999999;\n        }\n\n        int rst = 0;\n        for (auto itr = eles.begin(); itr != eles.end(); ++itr){\n            rst += *itr;\n        }\n        //be different with contract1\n        return rst + 1000000;\n    }\n\nprivate:\n    //contracts using proxy mechanism are needed to using owner address principle.\n    platon::StorageType<"owner"_n, std::pair<platon::Address, bool>>            _ownerAddr;\n    platon::StorageType<"proxy"_n, std::pair<platon::Address, bool>>            _proxyAddr;\n};\n\nPLATON_DISPATCH(calc_contract2, (init)(RegisterProxy)(GetProxyAddress)(GetOwnerAddress)(updateContract)(calcAdd)(const_calcAdd)(makeSum))\n')),(0,l.kt)("h4",{id:"\u63a5\u53e3\u8bf4\u660e-2"},"\u63a5\u53e3\u8bf4\u660e\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"init\uff1a\u521d\u59cb\u5316owner\uff0cowner\u5730\u5740\u5373\u5408\u7ea6\u7684\u90e8\u7f72\u8005\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u4ee3\u7406\u7ba1\u7406\u63a5\u53e3\uff1a")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"RegisterProxy\uff1a\u6ce8\u518c\u4ee3\u7406\u5408\u7ea6\u5730\u5740\uff0c\u5728\u4e1a\u52a1\u5408\u7ea62\u4e2d\u5bf9\u8c03\u7528\u8005\u8fdb\u884c\u4e86\u9650\u5236\uff0c\u53ea\u6709\u5408\u7ea6owner\uff08\u90e8\u7f72\u8005\uff09\u6709\u6743\u9650\u8c03\u7528\uff0c\u8fd9\u662f\u4e00\u79cd\u5e94\u5bf9\u4e1a\u52a1\u5408\u7ea61\u4e2d\u5b89\u5168\u9690\u60a3\u7684\u65b9\u5f0f\uff1b"),(0,l.kt)("li",{parentName:"ul"},"updateContract\uff1a\u5728\u4e1a\u52a1\u5408\u7ea62\u4e2d\uff0c\u53d8\u66f4\u7533\u8bf7\u6267\u884c\u6210\u529f\u540e\uff0c\u4f1a\u5bf9\u672c\u5730\u7ba1\u7406\u7684\u4ee3\u7406\u8fdb\u884c\u6e05\u7406\uff0c\u8fd9\u662f\u4e00\u79cd\u5e94\u5bf9\u4e1a\u52a1\u5408\u7ea61\u4e2d\u5b89\u5168\u9690\u60a3\u7684\u65b9\u5f0f\uff1b")),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"\u4e1a\u52a1\u529f\u80fd\u63a5\u53e3\uff1a")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"calcAdd\u3001const_calcAdd\u3001makeSum\uff0c\u6267\u884c\u5b9e\u9645\u7684\u4e1a\u52a1\u64cd\u4f5c\u3002\u5728\u4e1a\u52a1\u5408\u7ea62\u4e2d\uff0c\u5bf9\u8c03\u7528\u8005\u8eab\u4efd\u8fdb\u884c\u4e86\u9650\u5236\uff0c\u53ea\u6709\u4ee3\u7406\u5408\u7ea6\u80fd\u591f\u8c03\u7528\u8fd9\u4e9b\u4e1a\u52a1\u529f\u80fd\u63a5\u53e3\uff0c\u5373\u8be5\u5408\u7ea6\u7684\u8c03\u7528\u53ea\u80fd\u901a\u8fc7\u4ee3\u7406\u5408\u7ea6\u5b8c\u6210\uff0c\u8fd9\u662f\u4e00\u79cd\u5e94\u5bf9\u4e1a\u52a1\u5408\u7ea61\u4e2d\u5b89\u5168\u9690\u60a3\u7684\u65b9\u5f0f\uff0c\u4e5f\u662f\u652f\u6301\u5408\u7ea6\u5728\u7ebf\u5347\u7ea7\u66f4\u65b0\u7684\u4e00\u4e2a\u91cd\u8981\u673a\u5236\uff1b"),(0,l.kt)("li",{parentName:"ul"},"\u4e1a\u52a1\u5408\u7ea62\u5bf9\u6bcf\u4e2a\u8ba1\u7b97\u7ed3\u679c\uff0c\u52a0\u4e861000000\uff0c\u8fd9\u662f\u4e3a\u4e86\u4e0e\u5408\u7ea61\u8fdb\u884c\u533a\u5206\u3002")),(0,l.kt)("h2",{id:"\u5408\u7ea6\u4ee3\u7406\u673a\u5236\u7684\u8fd0\u884c\u673a\u5236"},"\u5408\u7ea6\u4ee3\u7406\u673a\u5236\u7684\u8fd0\u884c\u673a\u5236"),(0,l.kt)("p",null,(0,l.kt)("img",{src:e(5454).Z})),(0,l.kt)("h2",{id:"\u5408\u7ea6\u90e8\u7f72"},"\u5408\u7ea6\u90e8\u7f72"),(0,l.kt)("p",null,"\u4ece\u4ee3\u7406\u5408\u7ea6\u3001\u4e1a\u52a1\u5408\u7ea6\u7684\u521d\u59cb\u5316\u63a5\u53e3\u53ef\u4ee5\u770b\u51fa\uff0c\u5408\u7ea6\u7684\u90e8\u7f72\u6709\u4e00\u5b9a\u7684\u63a8\u8350\u987a\u5e8f\uff08\u975e\u5f3a\u5236\uff09\u3002\u7531\u4e8e\u4ee3\u7406\u5408\u7ea6\u7684\u90e8\u7f72\u9700\u8981\u8f93\u5165\u4e00\u4e2a\u5408\u7ea6\u5730\u5740\uff08\u4e00\u822c\u662f\u88ab\u4ee3\u7406\u7684\u4e1a\u52a1\u5408\u7ea6\u7684\u5730\u5740\uff0c\u4e5f\u53ef\u4ee5\u662f\u666e\u901a\u5730\u5740\uff09\uff0c\u56e0\u6b64\u4ee3\u7406\u5408\u7ea6\u4e00\u822c\u5728\u4e1a\u52a1\u5408\u7ea6\u5b8c\u6210\u90e8\u7f72\u540e\uff0c\u624d\u8fdb\u884c\u90e8\u7f72\uff08\u4ee5\u4e1a\u52a1\u5408\u7ea6\u5730\u5740\u4f5c\u4e3a\u53c2\u6570\uff09\u3002\n\u5982\u679c\u4ee3\u7406\u5408\u7ea6\u90e8\u7f72\u65f6\u4f7f\u7528\u4e86\u666e\u901a\u7684\u5730\u5740\uff0c\u5219\u540e\u7eed\u4ee3\u7406\u5408\u7ea6\u5b9e\u9645\u8fdb\u884c\u4e1a\u52a1\u4ee3\u7406\u65f6\uff0c\u9700\u8981\u901a\u8fc7\u90e8\u7f72\u65f6\u4f20\u5165\u7684\u666e\u901a\u5730\u5740\uff0c\u8c03\u7528\u4ee3\u7406\u5408\u7ea6\u7684RegisterContract\uff0c\u6765\u6ce8\u518c\u66f4\u65b0\u4e1a\u52a1\u5408\u7ea6\u7684\u5730\u5740\uff0c\u6b64\u540e\u66f4\u65b0\u5730\u5740\u9700\u8981\u901a\u8fc7\u6ce8\u518c\u6210\u529f\u7684\u5408\u7ea6\u6765\u8c03\u7528\u5b8c\u6210\u3002\n\u5408\u7ea6\u90e8\u7f72\u7684\u64cd\u4f5c\u65b9\u6cd5\u5728PlatON\u5b98\u7f51\u3001\u524d\u9762\u7684\u7cfb\u5217\u6587\u7ae0\u4e2d\u5df2\u7ecf\u6709\u4e86\u8be6\u7ec6\u7684\u9610\u8ff0\uff0c\u8be6\u89c1\u5b98\u65b9wasm\u5408\u7ea6\u5f00\u53d1\u624b\u518c\uff1a",(0,l.kt)("a",{parentName:"p",href:"https://devdocs.platon.network/docs/zh-CN/Wasm_Dev_Manual/%EF%BC%8C%E4%BB%A5%E5%8F%8A%E3%80%8APlatON%E4%B8%8A%E7%9A%84WASM%E6%99%BA%E8%83%BD%E5%90%88%E7%BA%A6%E5%BC%80%E5%8F%91%EF%BC%881%EF%BC%89%E2%80%94%E2%80%94%E5%90%88%E7%BA%A6%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8%E3%80%8B%E3%80%82"},"https://devdocs.platon.network/docs/zh-CN/Wasm_Dev_Manual/\uff0c\u4ee5\u53ca\u300aPlatON\u4e0a\u7684WASM\u667a\u80fd\u5408\u7ea6\u5f00\u53d1\uff081\uff09\u2014\u2014\u5408\u7ea6\u5f00\u53d1\u5165\u95e8\u300b\u3002")),(0,l.kt)("h2",{id:"\u8bbf\u95ee\u793a\u4f8b"},"\u8bbf\u95ee\u793a\u4f8b"),(0,l.kt)("p",null,"\u5728\u672c\u6587\u793a\u4f8b\u4e2d\uff0c\u9996\u5148\u4f7f\u7528platon-truffle\u5de5\u5177\u90e8\u7f72\u4e86\u4e1a\u52a1\u5408\u7ea61\uff0c\u7136\u540e\u5229\u7528\u8be5\u5408\u7ea6\u5730\u5740\u90e8\u7f72\u4ee3\u7406\u5408\u7ea6\u3002\n\u4ee3\u7406\u673a\u5236\u7684\u8bbf\u95ee\u8c03\u7528\u57fa\u4e8eclient-sdk-python\u5f00\u53d1\uff0c\u5728\u6d4b\u8bd5\u4f7f\u7528\u4e2d\u5982\u679c\u9047\u5230\u95ee\u9898\uff0c\u8bf7\u901a\u8fc7\u4e0b\u65b9\u4e8c\u7ef4\u7801\u8054\u7cfbcross\u6280\u672f\u56e2\u961f\u3002\n\u8bbf\u95ee\u793a\u4f8b\u7684\u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"from client_sdk_python import Web3, HTTPProvider, WebsocketProvider\nfrom client_sdk_python.eth import PlatON\n\ntrue = True\nfalse = False\nfrom_address = '...'\n\nproxyAddr = '...'\nproxy_abi = []\n\ncontractAddr = '...'\ncontract_abi = []\n\ncontractAddr_2 = '...'\ncontract_2_abi = []\n\ndef proxyCall():\n    w3 = Web3(HTTPProvider(\"http://127.0.0.1:6789\"))\n    platon = PlatON(w3)\n    hello = platon.wasmcontract(address=proxyAddr, abi=proxy_abi,vmtype=1)\n\n    tx_events_hash = hello.functions.calcAdd(73, 8).transact({'from':from_address,'gas':1500000})\n    tx_events_receipt = platon.waitForTransactionReceipt(tx_events_hash)\n    rstAdd2 = hello.events.incalcAdd().processReceipt(tx_events_receipt)\n    print('***********************calcAdd: ')\n    print(rstAdd2)\n\n    tx_events_hash_sum = hello.functions.makeSum([11, 12, 13]).transact({'from':from_address,'gas':1500000})\n    tx_events_receipt_sum = platon.waitForTransactionReceipt(tx_events_hash_sum)\n    rstAdd_sum = hello.events.inmakeSum().processReceipt(tx_events_receipt_sum)\n    print('')\n    print('***********************makeSum: ')\n    print(rstAdd_sum[0]['args']['arg1'])\n    return\n\ndef contract_1_Call():\n    w3 = Web3(HTTPProvider(\"http://127.0.0.1:6789\"))\n    platon = PlatON(w3)\n\n    hello = platon.wasmcontract(address=contractAddr, abi=contract_abi,vmtype=1)\n    rstAdd = hello.functions.calcAdd(73, 8).call()\n    print(rstAdd)\n\n    rstConst_Add = hello.functions.const_calcAdd(100, 99).call()\n    print(rstConst_Add)\n\n    rstSum = hello.functions.makeSum([11, 12, 13]).call()\n    print(rstSum)\n    return\n\ndef contract_2_Call():\n    w3 = Web3(HTTPProvider(\"http://127.0.0.1:6789\"))\n    platon = PlatON(w3)\n\n    hello = platon.wasmcontract(address=contractAddr_2, abi=contract_2_abi,vmtype=1)\n    rstAdd = hello.functions.calcAdd(73, 8).call()\n    print(rstAdd)\n\n    rstConst_Add = hello.functions.const_calcAdd(100, 99).call()\n    print(rstConst_Add)\n\n    rstSum = hello.functions.makeSum([11, 12, 13]).call()\n    print(rstSum)\n    return\n\ndef contract_1_to_2():\n    w3 = Web3(HTTPProvider(\"http://127.0.0.1:6789\"))\n    platon = PlatON(w3)\n    hello = platon.wasmcontract(address=contractAddr, abi=contract_abi,vmtype=1)\n\n    print(hello.functions.GetOwnerAddress().call())\n    print(hello.functions.GetProxyAddress().call())\n\n    tx_events_hash = hello.functions.updateContract(contractAddr_2).transact({'from':from_address,'gas':1500000})\n    tx_events_receipt = platon.waitForTransactionReceipt(tx_events_hash)\n    print(tx_events_receipt)\n\ndef c2_registerProxy():\n    w3 = Web3(HTTPProvider(\"http://127.0.0.1:6789\"))\n    platon = PlatON(w3)\n    hello = platon.wasmcontract(address=contractAddr_2, abi=contract_2_abi,vmtype=1)\n\n    print(hello.functions.GetProxyAddress().call())\n\n    tx_events_hash = hello.functions.RegisterProxy(proxyAddr).transact({'from':from_address,'gas':1500000})\n    tx_events_receipt = platon.waitForTransactionReceipt(tx_events_hash)\n    print(tx_events_receipt)\n\n    print(hello.functions.GetProxyAddress().call())\n\ndef contract_2_to_1():\n    w3 = Web3(HTTPProvider(\"http://127.0.0.1:6789\"))\n    platon = PlatON(w3)\n    hello = platon.wasmcontract(address=contractAddr_2, abi=contract_2_abi,vmtype=1)\n\n    print(hello.functions.GetOwnerAddress().call())\n    print(hello.functions.GetProxyAddress().call())\n\n    tx_events_hash = hello.functions.updateContract(contractAddr).transact({'from':from_address,'gas':1500000})\n    tx_events_receipt = platon.waitForTransactionReceipt(tx_events_hash)\n    print(tx_events_receipt)\n\ndef whichContract():\n    w3 = Web3(HTTPProvider(\"http://127.0.0.1:6789\"))\n    platon = PlatON(w3)\n    hello = platon.wasmcontract(address=proxyAddr, abi=proxy_abi,vmtype=1)\n\n    rst = hello.functions.const_calcAdd(73, 8).call()\n    print(rst)\n")),(0,l.kt)("h3",{id:"\u4e1a\u52a1\u5408\u7ea61"},"\u4e1a\u52a1\u5408\u7ea61"),(0,l.kt)("h4",{id:"\u4e1a\u52a1\u5408\u7ea61\u76f4\u63a5\u8c03\u7528"},"\u4e1a\u52a1\u5408\u7ea61\u76f4\u63a5\u8c03\u7528"),(0,l.kt)("p",null,"\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"contract_1_Call()\n")),(0,l.kt)("p",null,"\u8f93\u51fa\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{src:e(9785).Z})),(0,l.kt)("p",null,"\u8bf4\u660e\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u4e1a\u52a1\u5408\u7ea61\u4e2d\u672a\u4f5c\u4ee3\u7406\u6ce8\u518c\u7684\u9650\u5236\uff0c\u56e0\u6b64\u80fd\u76f4\u63a5\u6267\u884c\u64cd\u4f5c\u3002")),(0,l.kt)("h4",{id:"\u4ee3\u7406\u8c03\u7528\u4e1a\u52a1\u5408\u7ea61\u64cd\u4f5c"},"\u4ee3\u7406\u8c03\u7528\u4e1a\u52a1\u5408\u7ea61\u64cd\u4f5c"),(0,l.kt)("p",null,"\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"proxyCall()\n")),(0,l.kt)("p",null,"\u8f93\u51fa\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{src:e(8399).Z})),(0,l.kt)("p",null,"\u8bf4\u660e\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u901a\u8fc7\u4e8b\u4ef6\u673a\u5236\u83b7\u53d6\u64cd\u4f5c\u7ed3\u679c\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u64cd\u4f5c\u7ed3\u679c\u53ef\u5728\u6355\u6349\u5230\u7684\u8fd4\u56de\u4e8b\u4ef6\u4e2d\uff0c\u901a\u8fc7\u201crstAdd_sum","[0]['args']","['arg1']","\u201d\u6765\u83b7\u53d6\u3002")),(0,l.kt)("h4",{id:"\u90e8\u7f72\u4e1a\u52a1\u5408\u7ea62"},"\u90e8\u7f72\u4e1a\u52a1\u5408\u7ea62"),(0,l.kt)("p",null,"\u4f7f\u7528platon-truffle\u5de5\u5177\u90e8\u7f72\u4e1a\u52a1\u5408\u7ea62\uff0c\u83b7\u53d6\u5176\u5730\u5740\u3002"),(0,l.kt)("h4",{id:"\u4e1a\u52a1\u5408\u7ea61\u8c03\u7528\u4ee3\u7406\u53d8\u66f4\u64cd\u4f5c"},"\u4e1a\u52a1\u5408\u7ea61\uff0c\u8c03\u7528\u4ee3\u7406\u53d8\u66f4\u64cd\u4f5c"),(0,l.kt)("p",null,"\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"contract_1_to_2()\n")),(0,l.kt)("p",null,"\u8f93\u51fa\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{src:e(5164).Z})),(0,l.kt)("h3",{id:"\u4e1a\u52a1\u5408\u7ea62"},"\u4e1a\u52a1\u5408\u7ea62"),(0,l.kt)("h4",{id:"\u4ee3\u7406\u8c03\u7528\u4e1a\u52a1\u5408\u7ea62\u64cd\u4f5c"},"\u4ee3\u7406\u8c03\u7528\u4e1a\u52a1\u5408\u7ea62\u64cd\u4f5c"),(0,l.kt)("p",null,"\u6b64\u65f6\uff0c\u4e1a\u52a1\u5408\u7ea62\u5c1a\u672a\u8c03\u7528RegisterProxy\u8fdb\u884c\u4ee3\u7406\u6ce8\u518c\u3002\n\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"proxyCall()\n")),(0,l.kt)("p",null,"\u8f93\u51fa\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{src:e(7959).Z})),(0,l.kt)("p",null,"\u8bf4\u660e\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u4e1a\u52a1\u5408\u7ea62\u4e2d\u505a\u4e86\u4ee3\u7406\u9650\u5236\uff0c\u5728\u5c1a\u672a\u6ce8\u518c\u4ee3\u7406\u65f6\uff0c\u65e0\u6cd5\u5b8c\u6210\u6b63\u5e38\u7684\u4e1a\u52a1\u64cd\u4f5c\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u4ee3\u7406\u8c03\u7528\u4e1a\u52a1\u5408\u7ea62\u867d\u7136\u6210\u529f\u4e86\uff0c\u4f46\u662f\u7ed3\u679c\u5e76\u975e\u671f\u671b\u7684\u503c\uff0c\u8fd9\u662f\u4e00\u79cd\u5728\u7ebf\u66f4\u65b0\u7684\u5b89\u5168\u673a\u5236\u3002")),(0,l.kt)("h4",{id:"\u4e1a\u52a1\u5408\u7ea62\u6ce8\u518c\u4ee3\u7406"},"\u4e1a\u52a1\u5408\u7ea62\u6ce8\u518c\u4ee3\u7406"),(0,l.kt)("p",null,"\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"c2_registerProxy()\n")),(0,l.kt)("p",null,"\u8f93\u51fa\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{src:e(6746).Z})),(0,l.kt)("p",null,"\u8bf4\u660e\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u6ce8\u518c\u524d\u540e\u5206\u522b\u8c03\u7528GetProxyAddress\uff0c\u89c2\u5bdf\u5f53\u524d\u7ba1\u7406\u7684\u4ee3\u7406\u4fe1\u606f\u3002")),(0,l.kt)("h4",{id:"\u4ee3\u7406\u8c03\u7528\u4e1a\u52a1\u5408\u7ea62\u64cd\u4f5c-1"},"\u4ee3\u7406\u8c03\u7528\u4e1a\u52a1\u5408\u7ea62\u64cd\u4f5c"),(0,l.kt)("p",null,"\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"proxyCall()\n")),(0,l.kt)("p",null,"\u8f93\u51fa\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{src:e(9953).Z})),(0,l.kt)("p",null,"\u8bf4\u660e\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5b8c\u6210\u4ee3\u7406\u6ce8\u518c\u540e\uff0c\u4e1a\u52a1\u5408\u7ea6\u8c03\u7528\u6210\u529f\uff0c\u8fd4\u56de\u671f\u671b\u7ed3\u679c\u3002")),(0,l.kt)("h4",{id:"\u4e1a\u52a1\u5408\u7ea62\u8c03\u7528\u4ee3\u7406\u53d8\u66f4\u64cd\u4f5c"},"\u4e1a\u52a1\u5408\u7ea62\uff0c\u8c03\u7528\u4ee3\u7406\u53d8\u66f4\u64cd\u4f5c"),(0,l.kt)("p",null,"\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"contract_2_to_1()\n")),(0,l.kt)("p",null,"\u8f93\u51fa\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{src:e(9998).Z})),(0,l.kt)("p",null,"\u8bf4\u660e\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u8fde\u7eed\u8c03\u7528\u4e24\u6b21\uff0c\u7b2c\u4e8c\u6b21\u4f1a\u53d1\u73b0\u4e1a\u52a1\u5408\u7ea62\u5df2\u7ecf\u6267\u884c\u4e86\u4ee3\u7406\u4fe1\u606f\u6e05\u7406\u5de5\u4f5c\u3002")),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"\u672c\u6559\u7a0b\u8d21\u732e\u8005 @",(0,l.kt)("a",{parentName:"em",href:"https://github.com/xiyu1984"},"xiyu"))))}u.isMDXComponent=!0},5454:function(n,t,e){t.Z=e.p+"assets/images/5-1-d59878ad45c08e40f5051dc75eaad292.png"},9785:function(n,t){t.Z="data:image/png;base64,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"},8399:function(n,t,e){t.Z=e.p+"assets/images/5-3-d6cf71e29e9f258191a1925a225f5f15.png"},5164:function(n,t,e){t.Z=e.p+"assets/images/5-4-a00b5b241e10f2a4107cde8b4989ff33.png"},7959:function(n,t,e){t.Z=e.p+"assets/images/5-5-ae389cd5b9e0a894bf89d65eb1828413.png"},6746:function(n,t,e){t.Z=e.p+"assets/images/5-6-da5e124b8ac7c1716808cbf20c25e1b0.png"},9953:function(n,t,e){t.Z=e.p+"assets/images/5-7-25538bd05e93a51a94f07c42a6dc2047.png"},9998:function(n,t,e){t.Z=e.p+"assets/images/5-8-05f6ae67fccd2ebdee80e5317cd94f36.png"}}]);