"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2701],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return m}});var l=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},a=Object.keys(e);for(l=0;l<a.length;l++)t=a[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)t=a[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=l.createContext({}),u=function(e){var n=l.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=u(e.components);return l.createElement(p.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return l.createElement(l.Fragment,{},n)}},c=l.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=u(t),m=r,k=c["".concat(p,".").concat(m)]||c[m]||s[m]||a;return t?l.createElement(k,o(o({ref:n},d),{},{components:t})):l.createElement(k,o({ref:n},d))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,o=new Array(a);o[0]=c;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var u=2;u<a;u++)o[u]=t[u];return l.createElement.apply(null,o)}return l.createElement.apply(null,t)}c.displayName="MDXCreateElement"},870:function(e,n,t){t.r(n),t.d(n,{contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return d}});var l=t(7462),r=t(3366),a=(t(7294),t(3905)),o=["components"],i={id:"Solidity_Dev_Manual",title:"\u5165\u95e8\u624b\u518c",sidebar_label:"\u5165\u95e8\u624b\u518c"},p=void 0,u={unversionedId:"Solidity_Dev_Manual",id:"Solidity_Dev_Manual",isDocsHomePage:!1,title:"\u5165\u95e8\u624b\u518c",description:"\u5165\u95e8\u624b\u518c",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/solidity\u5408\u7ea6\u5165\u95e8\u624b\u518c.md",sourceDirName:".",slug:"/Solidity_Dev_Manual",permalink:"/docs/zh-CN/Solidity_Dev_Manual",editUrl:"https://github.com/PlatONnetwork/docs/tree/master/website/i18n/zh-CN/docusaurus-plugin-content-docs/current/solidity\u5408\u7ea6\u5165\u95e8\u624b\u518c.md",version:"current",frontMatter:{id:"Solidity_Dev_Manual",title:"\u5165\u95e8\u624b\u518c",sidebar_label:"\u5165\u95e8\u624b\u518c"},sidebar:"docs",previous:{title:"\u7cfb\u7edf\u5408\u7ea6\u63a5\u53e3\u8bf4\u660e",permalink:"/docs/zh-CN/PlatON_system_contract_api"},next:{title:"\u8fc1\u79fb\u6559\u7a0b",permalink:"/docs/zh-CN/Solidity_Contract_Migrate"}},d=[{value:"\u5165\u95e8\u624b\u518c",id:"\u5165\u95e8\u624b\u518c",children:[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",children:[]},{value:"platon-truffle\u5f00\u53d1\u5de5\u5177\u4ecb\u7ecd",id:"platon-truffle\u5f00\u53d1\u5de5\u5177\u4ecb\u7ecd",children:[]},{value:"\u521b\u5efaHelloWorld\u5408\u7ea6",id:"\u521b\u5efahelloworld\u5408\u7ea6",children:[]},{value:"\u7f16\u8bd1HelloWorld\u5408\u7ea6",id:"\u7f16\u8bd1helloworld\u5408\u7ea6",children:[]},{value:"\u90e8\u7f72HelloWorld\u5408\u7ea6",id:"\u90e8\u7f72helloworld\u5408\u7ea6",children:[]},{value:"\u8c03\u7528HelloWorld\u5408\u7ea6",id:"\u8c03\u7528helloworld\u5408\u7ea6",children:[]}]},{value:"\u4f17\u7b79\u5408\u7ea6",id:"\u4f17\u7b79\u5408\u7ea6",children:[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb-1",children:[]},{value:"\u4f17\u7b79\u7684\u6d41\u7a0b",id:"\u4f17\u7b79\u7684\u6d41\u7a0b",children:[]},{value:"\u4f17\u7b79\u5408\u7ea6",id:"\u4f17\u7b79\u5408\u7ea6-1",children:[]}]},{value:"FAQ",id:"faq",children:[{value:"\u7f16\u8bd1\u76f8\u5173",id:"\u7f16\u8bd1\u76f8\u5173",children:[]}]}],s={toc:d};function c(e){var n=e.components,t=(0,r.Z)(e,o);return(0,a.kt)("wrapper",(0,l.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"\u5165\u95e8\u624b\u518c"},"\u5165\u95e8\u624b\u518c"),(0,a.kt)("h3",{id:"\u7b80\u4ecb"},"\u7b80\u4ecb"),(0,a.kt)("p",null,"\u672c\u6559\u7a0b\u4e3b\u8981\u662f\u6307\u5bfc\u7528\u6237\u5728PlatON\u4e0a\u4f7f\u7528solidity\u8bed\u8a00\u521b\u5efa\u7b80\u5355\u7684HelloWorld\u667a\u80fd\u5408\u7ea6\uff0c\u901a\u8fc7platon-truffle\u7f16\u8bd1\uff0c\u90e8\u7f72\uff0c\u8c03\u7528\u6b64\u5408\u7ea6\u3002\u5982\u679c\u60a8\u60f3\u4f7f\u7528\u66f4\u52a0\u4e30\u5bcc\u7684API\u53ef\u4ee5\u53c2\u8003",(0,a.kt)("a",{parentName:"p",href:"/docs/zh-CN/Java_SDK"},"Java SDK\u5f00\u53d1\u6307\u5357")," \u6216\u8005 ",(0,a.kt)("a",{parentName:"p",href:"/docs/zh-CN/JS_SDK"},"JS SDK\u5f00\u53d1\u6307\u5357")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"solidity\u667a\u80fd\u5408\u7ea6\u8bed\u6cd5\u8bf7\u53c2\u8003",(0,a.kt)("a",{parentName:"li",href:"https://solidity.readthedocs.io/en/develop/"},"Solidity\u5b98\u65b9\u6587\u6863")),(0,a.kt)("li",{parentName:"ul"},"\u5728\u5f00\u53d1\u5408\u7ea6\u524d\uff0c\u5982\u679c\u9700\u8981\u642d\u5efa\u8282\u70b9\u8fde\u63a5\u5230PlatON\u7f51\u7edc\u6216\u8005\u521b\u5efa\u79c1\u6709\u7f51\u7edc\u8bf7\u53c2\u8003\uff1a",(0,a.kt)("a",{parentName:"li",href:"/docs/zh-CN/Join_PlatON_NetWork"},"\u8fde\u63a5 PlatON \u7f51\u7edc"))),(0,a.kt)("h3",{id:"platon-truffle\u5f00\u53d1\u5de5\u5177\u4ecb\u7ecd"},"platon-truffle\u5f00\u53d1\u5de5\u5177\u4ecb\u7ecd"),(0,a.kt)("p",null,"platon-truffle\u662fPlatON\u63d0\u4f9b\u7684\u4e00\u6b3e\u80fd\u591f\u5728\u672c\u5730\u7f16\u8bd1\u3001\u90e8\u7f72\u3001\u8c03\u7528\u667a\u80fd\u5408\u7ea6\u7684\u5de5\u5177\uff0c\u5177\u4f53\u7684\u5b89\u88c5\u53ca\u4f7f\u7528\u624b\u518c\u53c2\u89c1"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"platon-truffle\u5f00\u53d1\u5de5\u5177",(0,a.kt)("a",{parentName:"li",href:"https://platon-truffle.readthedocs.io/en/v1.1.1/getting-started/installation.html"},"\u5b89\u88c5\u53c2\u8003")),(0,a.kt)("li",{parentName:"ul"},"platon-truffle\u5f00\u53d1\u5de5\u5177",(0,a.kt)("a",{parentName:"li",href:"https://platon-truffle.readthedocs.io/en/v1.1.1/"},"\u4f7f\u7528\u624b\u518c"))),(0,a.kt)("h3",{id:"\u521b\u5efahelloworld\u5408\u7ea6"},"\u521b\u5efaHelloWorld\u5408\u7ea6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-solidity"},"pragma solidity ^0.5.17;\n\ncontract HelloWorld {\n    \n    string name;\n    \n    function setName(string memory _name) public returns(string memory){\n        name = _name;\n        return name;\n    }\n    \n    function getName() public view returns(string memory){\n        return name;\n    }\n}\n")),(0,a.kt)("p",null,"\u5408\u7ea6\u6587\u4ef6\u8bf4\u660e"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"pragma solidity ^0.5.17",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"pragma solidity\uff1a\u662fsolidity\u7248\u672c\u58f0\u660e\n0.5.17\uff1a\u4ee3\u8868solidity\u7248\u672c\n^ \uff1a\u8868\u793a\u5411\u4e0a\u517c\u5bb9,\u5373\u53ef\u4ee5\u75280.5.17\u4ee5\u4e0a\u7248\u672c\u7f16\u8bd1\u5668\u8fdb\u884c\u7f16\u8bd1"))),(0,a.kt)("li",{parentName:"ul"},"contract HelloWorld",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"contract\uff1a\u5408\u7ea6\u58f0\u660e\u7684\u5173\u952e\u5b57\nHelloWorld\uff1a\u5f53\u524d\u5408\u7ea6\u7684\u540d\u79f0"))),(0,a.kt)("li",{parentName:"ul"},"string name",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"name\uff1a\u5408\u7ea6\u7684\u72b6\u6001\u53d8\u91cf\nstring\uff1a\u6307\u660e\u6b64\u72b6\u6001\u53d8\u91cf\u7684\u7c7b\u578b"))),(0,a.kt)("li",{parentName:"ul"},"function setName(string memory _name) public returns(string memory)",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"function\uff1a\u5408\u7ea6\u4e2d\u51fd\u6570\u58f0\u660e\u5173\u952e\u5b57\nsetName\uff1a\u6b64\u51fd\u6570\u7684\u540d\u79f0\nmemory\uff1a\u58f0\u660e_name\u53c2\u6570\u7684\u5b58\u50a8\u4f4d\u7f6e\uff08\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u51fd\u6570\u8f93\u5165\u53c2\u6570\u4e0e\u8f93\u51fa\u53c2\u6570\u5fc5\u987b\u58f0\u660e\u4e3amemory\uff09\n_name\uff1a\u4e3a\u6b64\u51fd\u6570\u7684\u5c40\u90e8\u53d8\u91cf\npublic\uff1a\u58f0\u660e\u6b64\u51fd\u6570\u7684\u53ef\u89c1\u6027\nname = _name\uff1a\u6b64\u64cd\u4f5c\u5c06\u5916\u90e8\u4f20\u8fdb\u6765\u7684\u5c40\u90e8\u53d8\u91cf\u8d4b\u503c\u7ed9\u72b6\u6001\u53d8\u91cf"))),(0,a.kt)("li",{parentName:"ul"},"function getName() public view returns(string memory)",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"view:\u5982\u679c\u4e00\u4e2a\u51fd\u6570\u5e26\u6709view\u5173\u952e\u5b57\uff0c\u6b64\u51fd\u6570\u5c06\u4e0d\u4f1a\u6539\u53d8\u5408\u7ea6\u4e2d\u72b6\u6001\u53d8\u91cf\u7684\u503c\uff08\u4e3b\u8981\u7528\u4e8e\u67e5\u8be2\uff09")))),(0,a.kt)("h3",{id:"\u7f16\u8bd1helloworld\u5408\u7ea6"},"\u7f16\u8bd1HelloWorld\u5408\u7ea6"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step1.")," \u4e3aHelloWorld\u9879\u76ee\u521b\u5efa\u65b0\u76ee\u5f55"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mkdir HelloWorld && cd HelloWorld\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4ee5\u4e0b\u547d\u4ee4\u5982\u679c\u6ca1\u6709\u7279\u6b8a\u8bf4\u660e\u90fd\u5728HelloWorld\u76ee\u5f55\u4e0b\u8fdb\u884c")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step2.")," \u4f7f\u7528platon-truffle\u521d\u59cb\u5316\u4e00\u4e2a\u5de5\u7a0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"platon-truffle init\n")),(0,a.kt)("p",null,"\u5728\u64cd\u4f5c\u5b8c\u6210\u4e4b\u540e\uff0c\u5c31\u6709\u5982\u4e0b\u9879\u76ee\u7ed3\u6784\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"contracts/: Solidity\u5408\u7ea6\u76ee\u5f55")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"migrations/: \u90e8\u7f72\u811a\u672c\u6587\u4ef6\u76ee\u5f55")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"test/: \u6d4b\u8bd5\u811a\u672c\u76ee\u5f55")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"truffle-config.js: platon-truffle \u914d\u7f6e\u6587\u4ef6"))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step3.")," \u5c06\u4e4b\u524d\u7f16\u5199\u597d\u7684HelloWorld\u5408\u7ea6\u653e\u81f3HelloWorld/contracts/\u76ee\u5f55\u4e0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"ls contracts/\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5c06\u770b\u5230HelloWorld.sol")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step4.")," \u4fee\u6539platon-truffle \u914d\u7f6e\u6587\u4ef6truffle-config.js\uff0c\u5c06\u7f16\u8bd1\u5668\u7248\u672c\u4fee\u6539\u5bf9\u5e94\u7684solidity\u5408\u7ea6\u4e2d\u7684\u7248\u672c\u53f7"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"vim truffle-config.js\n")),(0,a.kt)("p",null,"truffle-config.js \u4fee\u6539\u90e8\u5206\u5185\u5bb9\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'compilers: {\n      solc: {\n            version: "^0.5.17",    // \u6b64\u7248\u672c\u53f7\u4e0eHelloWorld.sol\u4e2d\u58f0\u660e\u7684\u7248\u672c\u53f7\u4fdd\u6301\u4e00\u81f4\n      }\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step5.")," \u7f16\u8bd1\u5408\u7ea6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"platon-truffle compile\n")),(0,a.kt)("p",null,"\u5728\u64cd\u4f5c\u5b8c\u6210\u4e4b\u540e\uff0c\u751f\u6210\u5982\u4e0b\u76ee\u5f55\u7ed3\u6784\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"build/: Solidity\u5408\u7ea6\u7f16\u8bd1\u540e\u7684\u76ee\u5f55")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"build/contracts/HelloWorld.json  HelloWorld.sol\u5bf9\u5e94\u7684\u7f16\u8bd1\u6587\u4ef6"))),(0,a.kt)("h3",{id:"\u90e8\u7f72helloworld\u5408\u7ea6"},"\u90e8\u7f72HelloWorld\u5408\u7ea6"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step1.")," \u65b0\u589e\u5408\u7ea6\u90e8\u7f72\u811a\u672c\u6587\u4ef6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"cd migrations/ && touch 2_initial_helloworld.js\n")),(0,a.kt)("p",null,"\u90e8\u7f72\u811a\u672c\u6587\u4ef6\u540d\u5efa\u8bae\u4f7f\u7528\u5408\u7ea6\u540d\u79f0\u4fbf\u4e8e\u540e\u9762\u7ef4\u62a4,\u5982HelloWorld\u5408\u7ea6\u5bf9\u5e94\u7684\u90e8\u7f72\u811a\u672c\u6587\u4ef6\u4e3a2_initial_helloworld.js\uff0c\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'const helloWorld = artifacts.require("HelloWorld"); //artifacts.require\u544a\u8bc9platon-truffle\u9700\u8981\u90e8\u7f72\u54ea\u4e2a\u5408\u7ea6\uff0cHelloWorld\u5373\u4e4b\u524d\u5199\u7684\u5408\u7ea6\u7c7b\u540d\n    module.exports = function(deployer) {\n       deployer.deploy(helloWorld); //helloWorld\u5373\u4e4b\u524d\u5b9a\u4e49\u7684\u5408\u7ea6\u62bd\u8c61\uff08\u90e8\u7f72\u5e26\u53c2\u6570\u7684\u5408\u7ea6\u5931\u8d25\uff0c\u8bf7\u53c2\u8003FAQ\u90e8\u7f72\u5e26\u53c2\u6570\u5408\u7ea6\u5931\u8d25\u8bf4\u660e\uff09\n};\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step2.")," \u4fee\u6539truffle-config.js\u4e2d\u94fe\u7684\u914d\u7f6e\u4fe1\u606f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"vim truffle-config.js\n")),(0,a.kt)("p",null,"\u5c06truffle-config.js\u4e2d\u7684\u533a\u5757\u94fe\u76f8\u5173\u914d\u7f6e\u4fee\u6539\u6210\u60a8\u771f\u5b9e\u8fde\u63a5\u7684\u94fe\u914d\u7f6e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'networks: {\n    development: {\n       host: "10.1.1.6",     // \u533a\u5757\u94fe\u6240\u5728\u670d\u52a1\u5668\u4e3b\u673a\n       port: 8806,            // \u94fe\u7aef\u53e3\u53f7\n       network_id: "*",       // Any network (default: none)\n       from: "lat1wxadw8yzr6qxdw5yl3f2surp6ue6f03e07kcqc", //\u90e8\u7f72\u5408\u7ea6\u8d26\u53f7\u7684\u94b1\u5305\u5730\u5740\n       gas: 999999,\n       gasPrice: 50000000004,\n    },\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step3."),"  \u89e3\u9501\u94b1\u5305\u8d26\u6237"),(0,a.kt)("p",null,"\u8fdb\u5165platon-truffle\u63a7\u5236\u53f0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"platon-truffle console\n")),(0,a.kt)("p",null,"\u5bfc\u5165\u79c1\u94a5\uff08\u5982\u679c\u4e4b\u524d\u5df2\u5bfc\u5165\u53ef\u4ee5\u8df3\u8fc7\u6b64\u6b65\u9aa4\uff09"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'web3.platon.personal.importRawKey("\u60a8\u7684\u94b1\u5305\u79c1\u94a5","\u60a8\u7684\u94b1\u5305\u5bc6\u7801");\n')),(0,a.kt)("p",null,"\u5bfc\u5165\u6210\u529f\u5c06\u770b\u5230\u79c1\u94a5\u5bf9\u5e94\u7684\u5730\u5740\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"'lat1wxadw8yzr6qxdw5yl3f2surp6ue6f03e07kcqc'\n")),(0,a.kt)("p",null,"\u89e3\u9501\u94b1\u5305\u8d26\u6237"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"}," web3.platon.personal.unlockAccount('\u60a8\u7684\u94b1\u5305\u5730\u5740','\u60a8\u7684\u94b1\u5305\u5bc6\u7801',999999);\n")),(0,a.kt)("p",null,"\u89e3\u9501\u6210\u529f\u5c06\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"ture\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step4."),"  \u90e8\u7f72\u5408\u7ea6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"platon-truffle migrate\n")),(0,a.kt)("p",null,"\u90e8\u7f72\u6210\u529f\u540e\uff0c\u5c06\u770b\u5230\u7c7b\u4f3c\u5982\u4e0b\u4fe1\u606f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"2_initial_helloworld.js\n======================\n\n   Deploying 'HelloWorld'\n   ----------------------\n   > transaction hash:    0x87cd48cc467f9bc943fd096c57c8a7e7b7fa941380538d9e59797800c6c4292c\n   > Blocks: 0            Seconds: 0\n   > contract address:    lat17rcz8c3uwaf3ktf0e0d8q0jw4k3dm8z22eer96\n   > block number:        282520\n   > block timestamp:     1585535169200\n   > account:             lat1wxadw8yzr6qxdw5yl3f2surp6ue6f03e07kcqc\n   > balance:             16447231233352977496646259638377769924557918764752765436645.336513079692286014\n   > gas used:            145569\n   > gas price:           50.000000004 gvon\n   > value sent:          0 LAT\n   > total cost:          0.000145569 LAT\n\n\n   > Saving migration to chain.\n   > Saving artifacts\n   -------------------------------------\n   > Total cost:          0.000145569 LAT\n\nSummary\n=======\n> Total deployments:   2\n> Final cost:          0.000259892 LAT\n")),(0,a.kt)("h3",{id:"\u8c03\u7528helloworld\u5408\u7ea6"},"\u8c03\u7528HelloWorld\u5408\u7ea6"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step1."),"  \u8fdb\u5165platon-truffle\u63a7\u5236\u53f0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"platon-truffle console\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4ee5\u4e0b\u8c03\u7528\u67e5\u8be2\u5c06\u5728truffle\u63a7\u5236\u53f0\u4e2d\u8fdb\u884c")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step2."),"  \u6784\u5efa\u5408\u7ea6\u5bf9\u8c61"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'var abi = [{"constant":false,"inputs":[{"internalType":"string","name":"_name","type":"string"}],"name":"setName","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getName","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"}]; //\u53ef\u4ee5\u4eceHelloWorld/build/contracts/HelloWorld.json\u6587\u4ef6\u4e2d\u83b7\u53d6\u5230\n\nvar contractAddr = \'lat17rcz8c3uwaf3ktf0e0d8q0jw4k3dm8z22eer96\';//\u90e8\u7f72\u5408\u7ea6\u65f6\u7684\u83b7\u53d6\u7684\u5730\u5740\nvar helloWorld = new web3.platon.Contract(abi,contractAddr); \n')),(0,a.kt)("p",null,"\u8bf4\u660e\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"abi")," \u662f\u5408\u7ea6\u63d0\u4f9b\u7ed9\u5916\u90e8\u8c03\u7528\u65f6\u7684\u63a5\u53e3\uff0c\u6bcf\u4e2a\u5408\u7ea6\u5bf9\u5e94\u7684abi\u5728\u7f16\u8bd1\u540e\u7684\u6587\u4ef6\u4e2d\uff0c\u5982\uff1a",(0,a.kt)("inlineCode",{parentName:"li"},"HelloWorld/build/contracts/HelloWorld.json")," \u4e2d\u53ef\u4ee5\u627e\u5230"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"contractAddr")," \u5728\u90e8\u7f72\u5408\u7ea6\u6210\u529f\u540e\u6709\u4e00\u4e2acontract address"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"helloWorld")," \u5c31\u662f\u6784\u5efa\u51fa\u6765\u4e0e\u94fe\u4e0a\u5408\u7ea6\u4ea4\u4e92\u7684\u5408\u7ea6\u5bf9\u8c61\u62bd\u8c61")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step3."),"  \u8c03\u7528\u5408\u7ea6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"helloWorld.methods.setName(\"hello world\").send({from: 'lat1wxadw8yzr6qxdw5yl3f2surp6ue6f03e07kcqc'}).on('receipt', function(receipt) {console.log(receipt);}).on('error', console.error);\n \n")),(0,a.kt)("p",null,"\u8c03\u7528\u5408\u7ea6\u547d\u4ee4\u8bf4\u660e\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"helloWorld")," \u662f\u4e4b\u524d\u6784\u5efa\u7684\u5408\u7ea6\u5bf9\u8c61"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"methods")," \u56fa\u5b9a\u8bed\u6cd5,\u6307\u91cf\u540e\u9762\u7d27\u8ddf\u5408\u7ea6\u7684\u65b9\u6cd5\u540d"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"setName")," \u662f\u6211\u4eecHelloWorld\u5408\u7ea6\u4e2d\u7684\u4e00\u4e2a\u65b9\u6cd5\uff0c\u6709\u4e00\u4e2aString\u7c7b\u578b\u7684\u5165\u53c2\uff0c\u6b64\u5904\u5165\u53c2\u4e3a",(0,a.kt)("inlineCode",{parentName:"li"},"hello world")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"from")," \u8c03\u7528\u8005\u7684\u94b1\u5305\u5730\u5740"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"on")," \u662f\u76d1\u542c\u5408\u7ea6\u5904\u7406\u7ed3\u679c\u4e8b\u4ef6\uff0c\u6b64\u5904\u5982\u679c\u6210\u529f\u5c06\u6253\u5370\u56de\u6267\uff0c\u5931\u8d25\u8f93\u51fa\u9519\u8bef\u65e5\u5fd7")),(0,a.kt)("p",null,"\u51fd\u6570\u8c03\u7528\u6210\u529f\uff0c\u5c06\u4f1a\u770b\u5230\u5982\u4e0b\u4fe1\u606f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"{ blockHash:\n  '0xe592a4f203ed058df7515205717f167848b1a56b8bb143f9eba512facae22aa1',\n  blockNumber: 283911,\n  contractAddress: null,\n  cumulativeGasUsed: 44820,\n  from: 'lat1wxadw8yzr6qxdw5yl3f2surp6ue6f03e07kcqc',\n  gasUsed: 44820,\n  logsBloom:\n'0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',\n  status: true,\n  to: 'lat17rcz8c3uwaf3ktf0e0d8q0jw4k3dm8z22eer96',//\u4ea4\u6613\u8c03\u7528\u7684\u5408\u7ea6\u5730\u5740\n  transactionHash:\n   '0x2b381a8efab4774ae029fdf2e2585b48c03c033c64d543c9c606c925689fca31',//\u4ea4\u6613hash\n  transactionIndex: 0,\n  events: {} }\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step4."),"  \u5408\u7ea6\u67e5\u8be2"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},'helloWorld.methods.getName().call(null,function(error,result){console.log("name is:" + result);})  \n')),(0,a.kt)("p",null,"\u67e5\u8be2\u5408\u7ea6\u547d\u4ee4\u8bf4\u660e\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"helloWorld")," \u662f\u4e4b\u524d\u6784\u5efa\u7684\u5408\u7ea6\u5bf9\u8c61"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"methods")," \u6307\u5b9a\u5c06\u83b7\u53d6\u5408\u7ea6\u4e2d\u7684\u65b9\u6cd5"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"getName")," \u662f\u6211\u4eecHelloWorld\u5408\u7ea6\u4e2d\u7684\u4e00\u4e2a\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u6ca1\u6709\u5165\u53c2\uff0c\u6545\u5165\u53c2\u4e3a\u7a7a"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"call")," \u6307\u660e\u662f\u67e5\u8be2\u65b9\u6cd5"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"function")," \u662f\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u5c06\u5904\u7406\u8c03\u7528\u540e\u7684\u7ed3\u679c\uff0c\u6b64\u5904\u6211\u4eec\u901a\u8fc7console.log\u6253\u5370\u51fa\u6267\u884c\u7ed3\u679c")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\u4f17\u7b79\u5408\u7ea6"},"\u4f17\u7b79\u5408\u7ea6"),(0,a.kt)("h3",{id:"\u7b80\u4ecb-1"},"\u7b80\u4ecb"),(0,a.kt)("p",null,"\u200b        \u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u5408\u7ea6\u8fdb\u884c\u4e00\u6b21\u4f17\u7b79\u3002\u5408\u7ea6\u521b\u5efa\u8005\u53d1\u8d77\u4f17\u7b79\uff0c\u5e76\u521d\u59cb\u5316\u4f17\u7b79\u7684\u4ee3\u5e01\u6570\u91cf\u53ca\u4f17\u7b79\u6301\u7eed\u7684\u65f6\u95f4\u3002\u5982\u679c\u5728\u6307\u5b9a\u65f6\u95f4\u5185\u4f17\u7b79\u5b8c\u6210\u5219\u6b64\u6b21\u4f17\u7b79\u6210\u529f\u3002\u5e76\u5173\u95ed\u4f17\u7b79\u5f00\u5173\uff0c\u6839\u636e\u4e00\u4e2a\u56fa\u5b9a\u5151\u6362\u6bd4\u7387\u5f97\u5230\u7684\u4e00\u5b9a\u6570\u91cf\u7684token\u4f1a\u88ab\u94f8\u9020\u51fa\u6765\uff0c\u5e76\u4e14\u4f1a\u88ab\u8ba1\u5165\u5728\u4e70\u65b9\u540d\u4e0b\u3002\u5426\u5219\u4f17\u7b79\u5931\u8d25\uff0c\u628a\u4f17\u7b79\u7684\u91d1\u989d\u8fd4\u8fd8\u7ed9\u6295\u8d44\u8005\u3002"),(0,a.kt)("p",null,"\u5728\u5408\u7ea6\u4e2d\u8bbe\u7f6e\u4e86\u4e24\u4e2a\u89d2\u8272"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f17\u7b79\u8005"),(0,a.kt)("li",{parentName:"ul"},"\u6295\u8d44\u8005")),(0,a.kt)("h3",{id:"\u4f17\u7b79\u7684\u6d41\u7a0b"},"\u4f17\u7b79\u7684\u6d41\u7a0b"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4f17\u7b79\u5408\u7ea6\u6307\u53d7\u76ca\u4eba"),(0,a.kt)("li",{parentName:"ol"},"\u90e8\u7f72\u5408\u7ea6\u521d\u59cb\u5316\u4f17\u7b79\u4ee3\u5e01\u6570\u91cf\u53ca\u6301\u7eed\u65f6\u95f4"),(0,a.kt)("li",{parentName:"ol"},"\u6295\u8d44\u8005\u8fdb\u884c\u6295\u8d44"),(0,a.kt)("li",{parentName:"ol"},"\u5224\u65ad\u4f17\u7b79\u662f\u5426\u7ed3\u675f",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u4f17\u7b79\u65f6\u95f4\u672a\u5230\uff0c\u4f17\u7b79\u4ee3\u5e01\u6570\u91cf\u5df2\u5b8c\u6210\uff0c\u5173\u95ed\u4f17\u7b79\u5f00\u5173\u3002\u7ed9\u6295\u8d44\u8005\u6309\u6bd4\u4f8b\u5206\u914dtoken\u3002\u4f17\u7b79\u6210\u529f"),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u4f17\u7b79\u65f6\u95f4\u5df2\u5230\uff0c\u4f17\u7b79\u4ee3\u5e01\u6570\u91cf\u5df2\u5b8c\u6210\uff0c\u7ed9\u6295\u8d44\u8005\u6309\u6bd4\u4f8b\u5206\u914dtoken\u3002\u4f17\u7b79\u6210\u529f"),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u4f17\u7b79\u65f6\u95f4\u5df2\u5230\uff0c\u4f17\u7b79\u4ee3\u5e01\u6570\u91cf\u672a\u5b8c\u6210\uff0c\u8fd4\u8fd8\u6295\u8d44\u8005\u4ee3\u5e01\u3002\u4f17\u7b79\u5931\u8d25")))),(0,a.kt)("h3",{id:"\u4f17\u7b79\u5408\u7ea6-1"},"\u4f17\u7b79\u5408\u7ea6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"pragma solidity ^0.5.17;\n\ncontract CrowdFunding {\n    address payable public beneficiaryAddress = address(uint160(0)); //\u53d7\u76ca\u4eba\u5730\u5740\uff0c\u8bbe\u7f6e\u4e3a\u5408\u7ea6\u521b\u5efa\u8005\n    uint256 public fundingGoal = 100 lat;  //\u4f17\u7b79\u76ee\u6807\uff0c\u5355\u4f4d\u662flat\n    uint256 public amountRaised = 0; //\u5df2\u7b79\u96c6\u91d1\u989d\u6570\u91cf\uff0c \u5355\u4f4d\u662fvon\n    uint256 public deadline; //\u622a\u6b62\u65f6\u95f4\n    uint256 public price;  //\u4ee3\u5e01\u4ef7\u683c\n    bool public fundingGoalReached = false;  //\u8fbe\u6210\u4f17\u7b79\u76ee\u6807\n    bool public crowdsaleClosed = false; //\u4f17\u7b79\u5173\u95ed\n\n    mapping(address => uint256) public balance; //\u4fdd\u5b58\u4f17\u7b79\u8005\u5bf9\u6350\u8d48\u7684\u91d1\u989d\n    \n    mapping(address => uint256) public tokenMap; //\u4fdd\u5b58\u4f17\u7b79\u8005\u6240\u62e5\u6709\u7684\u4ee3\u5e01\u6570\u91cf\n\n    //\u8bb0\u5f55\u5df2\u63a5\u6536\u7684LAT\u901a\u77e5\n    event GoalReached(address _beneficiaryAddress, uint _amountRaised);\n\n    //\u8f6c\u5e10\u901a\u77e5\n    event FundTransfer(address _backer, uint _amount, bool _isContribution);\n    \n    //\u6821\u9a8c\u5730\u5740\u662f\u5426\u4e3a\u7a7a\n    modifier validAddress(address _address) {\n        require(_address != address(uint160(0)));\n        _;\n    }\n\n    /**\n     * \u521d\u59cb\u5316\u6784\u9020\u51fd\u6570\n     *\n     * @param _fundingGoalInlats \u4f17\u7b79LAT\u5e01\u603b\u91cf\n     * @param _durationInMinutes \u4f17\u7b79\u622a\u6b62,\u5355\u4f4d\u662f\u5206\u949f\n     */\n    constructor (\n        uint _fundingGoalInlats,\n        uint _durationInMinutes\n    )public {\n        beneficiaryAddress = msg.sender;\n        fundingGoal = _fundingGoalInlats * 1 lat;\n        deadline = now + _durationInMinutes * 1 minutes;\n        price = 500 finney; //1\u4e2aLAT\u5e01\u53ef\u4ee5\u4e70 2 \u4e2a\u4ee3\u5e01\n    }\n\n\n    /**\n     * \u9ed8\u8ba4\u51fd\u6570\n     *\n     * \u9ed8\u8ba4\u51fd\u6570\uff0c\u53ef\u4ee5\u5411\u5408\u7ea6\u76f4\u63a5\u6253\u6b3e\n     */\n    function () payable external {\n\n        //\u5224\u65ad\u662f\u5426\u5173\u95ed\u4f17\u7b79\n        require(!crowdsaleClosed);\n        uint amount = msg.value;\n\n        //\u6350\u6b3e\u4eba\u7684\u91d1\u989d\u7d2f\u52a0\n        balance[msg.sender] += amount;\n\n        //\u6350\u6b3e\u603b\u989d\u7d2f\u52a0\n        amountRaised += amount;\n\n        //\u8f6c\u5e10\u64cd\u4f5c\uff0c\u8f6c\u591a\u5c11\u4ee3\u5e01\u7ed9\u6350\u6b3e\u4eba\n        tokenMap[msg.sender]  += amount / price;\n        \n        emit FundTransfer(msg.sender, amount, true);\n    }\n\n    /**\n     * \u5224\u65ad\u662f\u5426\u5df2\u7ecf\u8fc7\u4e86\u4f17\u7b79\u622a\u6b62\u9650\u671f\n     */\n    modifier afterDeadline() { if (now >= deadline) _; }\n\n    /**\n     * \u68c0\u6d4b\u4f17\u7b79\u76ee\u6807\u662f\u5426\u5df2\u7ecf\u8fbe\u5230\n     */\n    function checkGoalReached() public afterDeadline payable{\n        if (amountRaised >= fundingGoal){\n            //\u8fbe\u6210\u4f17\u7b79\u76ee\u6807\n            fundingGoalReached = true;\n            emit GoalReached(beneficiaryAddress, amountRaised);\n        }\n\n        //\u5173\u95ed\u4f17\u7b79\n        crowdsaleClosed = true;\n    }\n\n\n    /**\n     * \u6536\u56de\u8d44\u91d1\n     *\n     * \u68c0\u67e5\u662f\u5426\u8fbe\u5230\u4e86\u76ee\u6807\u6216\u65f6\u95f4\u9650\u5236\uff0c\u5982\u679c\u6709\uff0c\u5e76\u4e14\u8fbe\u5230\u4e86\u8d44\u91d1\u76ee\u6807\uff0c\n     * \u5c06\u5168\u90e8\u91d1\u989d\u53d1\u9001\u7ed9\u53d7\u76ca\u4eba\u3002\u5982\u679c\u6ca1\u6709\u8fbe\u5230\u76ee\u6807\uff0c\u6bcf\u4e2a\u8d21\u732e\u8005\u90fd\u53ef\u4ee5\u9000\u56de\n     * \u4ed6\u4eec\u8d21\u732e\u7684\u91d1\u989d\n     */\n    function safeWithdrawal() public afterDeadline {\n\n        //\u5982\u679c\u6ca1\u6709\u8fbe\u6210\u4f17\u7b79\u76ee\u6807\n        if (!fundingGoalReached) {\n            //\u83b7\u53d6\u5408\u7ea6\u8c03\u7528\u8005\u5df2\u6350\u6b3e\u4f59\u989d\n            uint amount = balance[msg.sender];\n\n            if (amount > 0) {\n                //\u8fd4\u56de\u5408\u7ea6\u53d1\u8d77\u8005\u6240\u6709\u4f59\u989d\n                msg.sender.transfer(amount);\n                emit FundTransfer(msg.sender, amount, false);\n                balance[msg.sender] = 0;\n            }\n        }\n\n        //\u5982\u679c\u8fbe\u6210\u4f17\u7b79\u76ee\u6807\uff0c\u5e76\u4e14\u5408\u7ea6\u8c03\u7528\u8005\u662f\u53d7\u76ca\u4eba\n        if (fundingGoalReached && beneficiaryAddress == msg.sender) {\n\n            //\u5c06\u6240\u6709\u6350\u6b3e\u4ece\u5408\u7ea6\u4e2d\u7ed9\u53d7\u76ca\u4eba\n            beneficiaryAddress.transfer(amountRaised);\n            \n            emit FundTransfer(beneficiaryAddress, amountRaised, false);\n        }\n    }\n}\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u7f16\u8bd1\u4f17\u7b79\u5408\u7ea6\uff1a")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step1.")," \u4e3a\u4f17\u7b79\u5408\u7ea6\u521b\u5efa\u65b0\u76ee\u5f55"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mkdir myCrowdFunding && cd myCrowdFunding\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4ee5\u4e0b\u547d\u4ee4\u5982\u679c\u6ca1\u6709\u7279\u6b8a\u8bf4\u660e\u90fd\u5728myCrowdFunding\u76ee\u5f55\u4e0b\u8fdb\u884c")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step2.")," \u4f7f\u7528platon-truffle\u521d\u59cb\u5316\u4e00\u4e2a\u5de5\u7a0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"platon-truffle init\n")),(0,a.kt)("p",null,"\u5728\u64cd\u4f5c\u5b8c\u6210\u4e4b\u540e\uff0c\u5c31\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u9879\u76ee\u7ed3\u6784\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"contracts/: Solidity\u5408\u7ea6\u76ee\u5f55"),(0,a.kt)("li",{parentName:"ul"},"migrations/: \u90e8\u7f72\u811a\u672c\u6587\u4ef6\u76ee\u5f55"),(0,a.kt)("li",{parentName:"ul"},"test/: \u6d4b\u8bd5\u811a\u672c\u76ee\u5f55"),(0,a.kt)("li",{parentName:"ul"},"truffle-config.js: platon-truffle \u914d\u7f6e\u6587\u4ef6")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step3.")," \u5c06\u7f16\u5199\u597d\u7684\u4f17\u7b79\u5408\u7ea6\u653e\u81f3myCrowdFunding/contracts/\u76ee\u5f55\u4e0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"ls myCrowdFunding/contracts/\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5c06\u770b\u5230 CrowdFunding.sol")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step4.")," \u4fee\u6539platon-truffle \u914d\u7f6e\u6587\u4ef6truffle-config.js\uff0c\u5c06\u7f16\u8bd1\u5668\u7248\u672c\u4fee\u6539\u5bf9\u5e94\u7684solidity\u5408\u7ea6\u4e2d\u7684\u7248\u672c\u53f7"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"vim truffle-config.js\n")),(0,a.kt)("p",null,"truffle-config.js \u4fee\u6539\u90e8\u5206\u5185\u5bb9\u5982\u4e0b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'compilers: {\n     solc: {\n        version: "0.5.17",    // \u6b64\u7248\u672c\u53f7\u4e0eCrowdFunding.sol\u4e2d\u58f0\u660e\u7684\u7248\u672c\u53f7\u4fdd\u6301\u4e00\u81f4\n    }\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step5.")," \u7f16\u8bd1\u5408\u7ea6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"platon-truffle compile\n")),(0,a.kt)("p",null,"\u5728\u64cd\u4f5c\u5b8c\u6210\u4e4b\u540e\uff0c\u5c31\u6709\u8fd9\u6837\u7684\u4e00\u4e2a\u76ee\u5f55\u7ed3\u6784\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"build/: Solidity\u5408\u7ea6\u7f16\u8bd1\u540e\u7684\u76ee\u5f55"),(0,a.kt)("li",{parentName:"ul"},"build/contracts/CrowdFunding.json CrowdFunding.sol\u5bf9\u5e94\u7684\u7f16\u8bd1\u6587\u4ef6")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u90e8\u7f72\u4f17\u7b79\u5408\u7ea6\uff1a")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step1.")," \u6dfb\u52a0\u90e8\u7f72\u811a\u672c\u6587\u4ef6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"cd migrations/ && touch 2_initial_CrowdFunding.js\n")),(0,a.kt)("p",null,"\u90e8\u7f72\u811a\u672c\u6587\u4ef6\u4e3a:2_initial_crowdFunding.js\uff0c\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'const CrowdFunding = artifacts.require("CrowdFunding"); //\u9700\u8981\u90e8\u7f72\u7684\u5408\u7ea6\u540d\u79f0 \nmodule.exports = function(deployer) {\n      deployer.deploy(CrowdFunding);\n};\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step2.")," \u4fee\u6539truffle-config.js\u4e2d\u94fe\u7684\u914d\u7f6e\u4fe1\u606f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"vim truffle-config.js\n")),(0,a.kt)("p",null,"\u5c06truffle-config.js\u4e2d\u7684\u533a\u5757\u94fe\u76f8\u5173\u914d\u7f6e\u4fee\u6539\u6210\u60a8\u771f\u5b9e\u8fde\u63a5\u7684\u94fe\u914d\u7f6e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'networks: {\n    development: {\n       host: "10.1.1.6",     // \u533a\u5757\u94fe\u6240\u5728\u670d\u52a1\u5668\u4e3b\u673a\n       port: 8806,            // \u94fe\u7aef\u53e3\u53f7\n       network_id: "*",       // Any network (default: none)\n       from: "lat1wxadw8yzr6qxdw5yl3f2surp6ue6f03e07kcqc", //\u90e8\u7f72\u5408\u7ea6\u8d26\u53f7\u7684\u94b1\u5305\u5730\u5740\n       gas: 999999,\n       gasPrice: 50000000004,\n    },\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step3."),"  \u90e8\u7f72\u5408\u7ea6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"platon-truffle migrate\n")),(0,a.kt)("p",null,"\u90e8\u7f72\u6210\u529f\u5c06\u8f93\u51fa\u5982\u4e0b\u4fe1\u606f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Compiling your contracts...\n Everything is up to date, there is nothing to compile.\n 3_initial_CrowdFunding.js\n \n    Deploying 'CrowdFunding'\n     transaction hash:    0x3a6419cd4169d7cfb430a1fc5632239ac4a01845827f20df9b3229a334c5488b\n     Blocks: 0            Seconds: 0\n     contract address:    lat1qtgycm7jkrq8csa2rgef6enlru0u02g8u82kpt //\u90e8\u7f72\u540e\u7684\u5408\u7ea6\u5730\u5740\n     block number:        280532\n     block timestamp:     1581751224032\n     account:             lat1wxadw8yzr6qxdw5yl3f2surp6ue6f03e07kcqc\n     balance:             90000000.806077629992489796\n     gas used:            379154\n     gas price:           50.000000004 gVON\n     value sent:          0 LAT\n     total cost:          0.018957700001516616 LAT\n \n     Saving migration to chain.\n     Saving artifacts\n     Total cost:     0.018957700001516616 LAT\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u4f17\u7b79\u8005\u67e5\u8be2\u4f17\u7b79\u60c5\u51b5\uff1a")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step1."),"  \u8fdb\u5165platon-truffle\u63a7\u5236\u53f0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"platon-truffle console\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4ee5\u4e0b\u8c03\u7528\u67e5\u8be2\u5c06\u5728truffle\u63a7\u5236\u53f0\u4e2d\u8fdb\u884c")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step2."),"  \u6784\u5efa\u7684\u4f17\u7b79\u5408\u7ea6\u5bf9\u8c61"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"var abi = [...]; //\u4f17\u7b79\u5408\u7ea6\u7684ABI\uff0c\u4ece\u7f16\u8bd1\u540e\u7684\u6587\u4ef6\u83b7\u53d6\nvar contractAddr = 'lat1qtgycm7jkrq8csa2rgef6enlru0u02g8u82kpt'; //\u4f17\u7b79\u5408\u7ea6\u5730\u5740\nvar crowdFunding = new web3.platon.Contract(abi,contractAddr);  \n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step3."),"  \u67e5\u8be2\u5df2\u7b79\u96c6\u91d1\u989d"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'crowdFunding.methods.amountRaised().call(null,function(error,result){console.log("result:" + result);}); //\u67e5\u8be2\u5df2\u7b79\u96c6\u91d1\u989d\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"step4."),"  \u4f17\u7b79\u8005\u5224\u65ad\u4f17\u7b79\u662f\u5426\u6210\u529f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"crowdFunding.methods.safeWithdrawal().send({from:'lat1wxadw8yzr6qxdw5yl3f2surp6ue6f03e07kcqc'}).on('data', function(event){ console.log(event);}).on('error', console.error); \n")),(0,a.kt)("p",null,"\u8c03\u7528\u5408\u7ea6\u547d\u4ee4\u8bf4\u660e\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"crowdFunding")," \u662f\u6211\u4eec\u4e4b\u524d\u6784\u5efa\u7684\u5408\u7ea6\u5bf9\u8c61"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"methods")," \u56fa\u5b9a\u8bed\u6cd5\uff0c\u6307\u5b9a\u5c06\u83b7\u53d6\u5408\u7ea6\u4e2d\u7684\u65b9\u6cd5"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"safeWithdrawal")," \u662f\u6211\u4eec\u4f17\u7b79\u5408\u7ea6\u4e2d\u7684\u4e00\u4e2a\u65b9\u6cd5\uff0c\u7528\u4e8e\u6536\u56de\u8d44\u91d1"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"from")," \u8c03\u7528\u8005\u7684\u94b1\u5305\u5730\u5740"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"on")," \u662f\u76d1\u542c\u5408\u7ea6\u5904\u7406\u7ed3\u679c\u4e8b\u4ef6\uff0c\u5931\u8d25\u8f93\u51fa\u9519\u8bef\u65e5\u5fd7")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"faq"},"FAQ"),(0,a.kt)("h3",{id:"\u7f16\u8bd1\u76f8\u5173"},"\u7f16\u8bd1\u76f8\u5173"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"platon-truffle\u6709\u54ea\u4e9b\u547d\u4ee4\u5982\u4f55\u4f7f\u7528\uff1f"),(0,a.kt)("p",{parentName:"li"},"platon-truffle\u5f00\u53d1\u4f7f\u7528\u624b\u518c",(0,a.kt)("a",{parentName:"p",href:"https://platon-truffle.readthedocs.io/en/v0.11.1/"},"\u53c2\u8003\u8fd9\u91cc"),"\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"\u5408\u7ea6\u4e3a\u4ec0\u4e48\u8bed\u6cd5\u6821\u9a8c\u901a\u4e0d\u8fc7\uff1f"),(0,a.kt)("p",{parentName:"li"},"solidity\u5408\u7ea60.4.x\u7248\u672c\u4e0e0.5.x\u7248\u672c\u6709\u91cd\u5927\u53d8\u66f4\uff0c\u5177\u4f53\u8bed\u6cd5",(0,a.kt)("a",{parentName:"p",href:"https://solidity.readthedocs.io/en/develop/"},"\u53c2\u8003\u8fd9\u91cc"),"\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"platon-truffle\u6267\u884ctruffle compile \u5931\u8d25?"),(0,a.kt)("p",{parentName:"li"},"1.\u786e\u8ba4\u7f16\u8bd1\u7684\u5408\u7ea6\u6587\u4ef6\u4e2d\u7684\u7248\u672c\u53f7\u4e0etruffle-config.js\u4e2d\u6307\u5b9a\u7684\u7248\u672c\u53f7\u662f\u5426\u4e00\u81f4\u3002\n2.\u53ef\u80fd\u8bed\u6cd5\u6709\u8bef\uff0c\u53ef\u4ee5\u6839\u636e\u547d\u4ee4\u884c\u63d0\u793a\u4fee\u590d\u540e\u518d\u8fdb\u884c\u7f16\u8bd1\u3002")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"platon-truffle\u6267\u884ctruffle migrate\u90e8\u7f72\u5408\u7ea6\u5931\u8d25?"))),(0,a.kt)("p",null,"1.\u786e\u8ba4truffle-config.js\u4e2d\u8fde\u63a5\u7684\u94fe\u7684\u914d\u7f6e\u4fe1\u606f\u53ca\u7528\u6237\u7684\u94b1\u5305\u5730\u5740\u662f\u5426\u6b63\u786e\u3002"),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"truffle migrate\u90e8\u7f72\u5e26\u53c2\u6570\u7684\u6784\u9020\u51fd\u6570\u5408\u7ea6\u5931\u8d25?")),(0,a.kt)("p",null,"\u4ee5\u5408\u7ea6A.sol\u4e3a\u4f8b\uff0c\u5728migrations/2_initial_A.js\u6587\u4ef6\u4e2d\uff0c\u786e\u8ba4\u662f\u5426\u6dfb\u52a0\u6784\u9020\u53c2\u6570\u4fe1\u606f\u5982\uff1a\nA.sol\u6784\u9020\u51fd\u6570\u683c\u5f0f\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"constructor(uint256 a, string memory b, string memory c) public {}\n")),(0,a.kt)("p",null,"2_initial_A.js\u6587\u4ef6\u914d\u7f6e\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"}," const A = artifacts.require(\"A\");  \n module.exports = function(deployer) {\n      deployer.deploy(A,100,'PLA','PLAT');//\u9700\u8981\u4f20\u5165\u5bf9\u5e94\u6784\u9020\u51fd\u6570\u53c2\u6570\n };   \n")))}c.isMDXComponent=!0}}]);